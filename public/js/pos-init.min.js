/*! For license information please see pos-init.min.js.LICENSE.txt */
(self.webpackChunknexopos_4x=self.webpackChunknexopos_4x||[]).push([[443,198,93,326,140],{1487:(t,e,r)=>{"use strict";r.d(e,{l:()=>M,kq:()=>W,ih:()=>X,kX:()=>U});var n=r(6486),i=r(5121),s=r(5750),o=r(8345),a=r(2357),l=r(9248),c=r(230);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===u(s)?s:String(s)),n)}var i,s}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._subject=new l.x}var e,r,n;return e=t,r=[{key:"defineClient",value:function(t){this._client=t}},{key:"post",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("post",t,e,r)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("get",t,void 0,e)}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("delete",t,void 0,e)}},{key:"put",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("put",t,e,r)}},{key:"response",get:function(){return this._lastRequestData}},{key:"_request",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=W.applyFilters("http-client-url",e.replace(/\/$/,"")),this._subject.next({identifier:"async.start",url:e,data:n}),new c.y((function(s){r._client[t](e,n,Object.assign(Object.assign({},r._client.defaults[t]),i)).then((function(t){r._lastRequestData=t,s.next(t.data),s.complete(),r._subject.next({identifier:"async.stop"})})).catch((function(t){var e;s.error((null===(e=t.response)||void 0===e?void 0:e.data)||t.response||t),r._subject.next({identifier:"async.stop"})}))}))}},{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(t){var e=t.identifier,r=t.value;this._subject.next({identifier:e,value:r})}}],r&&d(e.prototype,r),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),p=r(3);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==h(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===h(s)?s:String(s)),n)}var i,s}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._subject=new p.t}var e,r,n;return e=t,(r=[{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(t){var e=t.identifier,r=t.value;this._subject.next({identifier:e,value:r})}}])&&v(e.prototype,r),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_=r(6515);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===y(s)?s:String(s)),n)}var i,s}var g=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={},this.behaviorState=new _.X({}),this.behaviorState.subscribe((function(t){r.state=t})),this.setState(e)}var e,r,n;return e=t,(r=[{key:"setState",value:function(t){this.behaviorState.next(Object.assign(Object.assign({},this.state),{object:t}))}}])&&b(e.prototype,r),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),x=r(2401),w=r(8272),C=r(381),k=r(1419),P=r(538),j=r(3658);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===S(s)?s:String(s)),n)}var i,s}var E=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=ns.base_url}var e,r,n;return e=t,(r=[{key:"get",value:function(t){return this.url+t}}])&&O(e.prototype,r),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),T=P.default.filter("abbreviate",(function(t){var e=t;if(t>=1e3){for(var r,n=Math.floor((""+t).length/3),i=2;i>=1;i--){if(((r=parseFloat((0!=n?t/Math.pow(1e3,n):t).toPrecision(i)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}r%1!=0&&(r=r.toFixed(1)),e=r+["","k","m","b","t"][n]}return e})),L=r(3515),$=r(9364);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===F(s)?s:String(s)),n)}var i,s}var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.instances=new Object}var e,r,n;return e=t,(r=[{key:"getInstance",value:function(t){return this.instances[t]}},{key:"defineInstance",value:function(t,e){this.instances[t]=e}}])&&D(e.prototype,r),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),V=r(2319),N=r(8094),q=r(3216),Z=r(2867),R=r(4554),I=r(6891);function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==G(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===G(s)?s:String(s)),n)}var i,s}var H=r(6606);window._=n,window.ChartJS=s,window.Pusher=H,window.Vue=P.default,window.moment=C,window.Axios=i.Z,window.__=N.__,window.__m=N.c,window.VueRouter=o.ZP,window.SnackBar=a.S,window.nsHooks=(0,V.Hu)(),window.popupResolver=q.Z,window.popupCloser=Z.Z,window.Axios.defaults.headers.common["x-requested-with"]="XMLHttpRequest",window.Axios.defaults.withCredentials=!0,ns.websocket.enabled&&(window.Echo=new R.ZP({broadcaster:"pusher",key:ns.websocket.key,wsHost:ns.websocket.host,wsPort:ns.websocket.port,wssPort:ns.websocket.port,namespace:"",forceTLS:ns.websocket.secured,disableStats:!0,encrypted:ns.websocket.secured,enabledTransports:ns.websocket.secured?["ws","wss"]:["ws"],disabledTransports:ns.websocket.secured?["sockjs","xhr_polling","xhr_streaming"]:[]}));var M=new m,X=new f,U=new a.S,z=new E,Q=new A,W=window.nsHooks,B=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.breakpoint="",this.detectScreenSizes(),(0,x.R)(window,"resize").subscribe((function(t){return e.detectScreenSizes()}))}var e,r,n;return e=t,(r=[{key:"detectScreenSizes",value:function(){switch(!0){case window.outerWidth>0&&window.outerWidth<=480:this.breakpoint="xs";break;case window.outerWidth>480&&window.outerWidth<=640:this.breakpoint="sm";break;case window.outerWidth>640&&window.outerWidth<=1024:this.breakpoint="md";break;case window.outerWidth>1024&&window.outerWidth<=1280:this.breakpoint="lg";break;case window.outerWidth>1280:this.breakpoint="xl"}}}])&&Y(e.prototype,r),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()),K=new g({sidebar:["xs","sm","md"].includes(B.breakpoint)?"hidden":"visible"});X.defineClient(i.Z),window.nsEvent=M,window.nsHttpClient=X,window.nsSnackBar=U,window.nsCurrency=L.W,window.nsTruncate=$.b,window.nsRawCurrency=L.f,window.nsAbbreviate=T,window.nsState=K,window.nsUrl=z,window.nsScreen=B,window.ChartJS=s,window.EventEmitter=m,window.Popup=k.G,window.RxJS=w,window.FormValidation=j.Z,window.nsCrudHandler=Q,window.nsTax=I.Z},3577:(t,e,r)=>{"use strict";r.r(e),r.d(e,{nsAvatar:()=>B,nsButton:()=>a,nsCheckbox:()=>p,nsCkeditor:()=>L,nsCloseButton:()=>P,nsCrud:()=>X,nsCrudForm:()=>y,nsDate:()=>w,nsDateRangePicker:()=>K.Z,nsDateTimePicker:()=>A.Z,nsDatepicker:()=>tt.Z,nsField:()=>g.P,nsIconButton:()=>j,nsInput:()=>c,nsLink:()=>l,nsMediaInput:()=>k,nsMenu:()=>s,nsMultiselect:()=>x,nsNotice:()=>J.Z,nsNumpad:()=>U.Z,nsPaginate:()=>et.Z,nsSearch:()=>st,nsSelect:()=>d,nsSelectAudio:()=>f,nsSpinner:()=>m,nsSubmenu:()=>o,nsSwitch:()=>D.Z,nsTableRow:()=>v,nsTabs:()=>$,nsTabsItem:()=>F,nsTextarea:()=>b});var n=r(538),i=r(1487),s=n.default.component("ns-menu",{data:function(){return{defaultToggledState:!1,_save:0}},props:["href","label","icon","notification","toggled","identifier"],template:'\n    <div>\n        <a @click="toggleEmit()" :href="href || \'javascript:void(0)\'" :class="defaultToggledState ? \'border-blue-800 bg-gray-800 dark:border-slate-700 dark:bg-slate-700\' : \'border-transparent bg-gray-900 dark:bg-slate-900\'" class="flex justify-between py-2 border-l-8 text-gray-200 dark:text-slate-300 dark:hover:bg-slate-700 px-3 font-bold  hover:bg-gray-700">\n            <span class="flex items-center">\n            <i class="las text-lg mr-2" :class="icon?.length > 0 ? icon : \'la-star\'"></i>\n            {{ label }}\n            </span>\n            <span v-if="notification > 0" class="rounded-full bg-red-600 text-white dark:text-slate-300 font-bold w-6 h-6 text-xs justify-center items-center flex">{{ notification }}</span>\n        </a>\n        <ul :class="defaultToggledState ? \'\' : \'hidden\'" class="submenu-wrapper">\n            <slot></slot>                  \n        </ul>\n    </div>\n    ',mounted:function(){var t=this;this.defaultToggledState=void 0!==this.toggled?this.toggled:this.defaultToggledState,i.l.subject().subscribe((function(e){e.value!==t.identifier&&(t.defaultToggledState=!1)}))},methods:{toggleEmit:function(){var t=this;this.toggle().then((function(e){e&&i.l.emit({identifier:"side-menu.open",value:t.identifier})}))},toggle:function(){var t=this;return new Promise((function(e,r){0===t.href.length&&(t.defaultToggledState=!t.defaultToggledState,e(t.defaultToggledState))}))}}}),o=n.default.component("ns-submenu",{data:function(){return{}},props:["href","label","active"],mounted:function(){},template:'\n    <div>\n        <li>\n            <a :class="active ? \'font-bold text-white dark:text-slate-300\' : \'text-gray-100 dark:text-slate-200\'" :href="href" class="py-2 border-l-8 border-blue-800 dark:border-slate-700 px-3 block bg-gray-800 dark:bg-slate-800 dark:hover:bg-slate-700 hover:bg-gray-700">\n                <slot></slot>\n            </a>\n        </li>\n    </div>\n    '}),a=n.default.component("ns-button",{data:function(){return{clicked:!1,_save:0}},props:["type","disabled","link","href","routerLink","to"],template:'\n    <div class="flex ns-button" :class="type ? type : \'default\'" @click="$emit( \'click\' )">\n        <button :disabled="isDisabled" v-if="!link && !href" class="flex rounded items-center cursor-pointer py-2 px-3 font-semibold"><slot></slot></button>\n        <router-link  :to="to" v-if="routerLink" class="flex rounded items-center cursor-pointer py-2 px-3 font-semibold"><slot></slot></router-link>\n        <a v-if="href" :href="href" class="flex rounded items-center cursor-pointer py-2 px-3 font-semibold"><slot></slot></a>\n    </div>\n    ',mounted:function(){},computed:{isDisabled:function(){return this.disabled&&(0===this.disabled.length||"disabled"===this.disabled||this.disabled)}}}),l=n.default.component("ns-link",{data:function(){return{clicked:!1,_save:0}},props:["type","to","href","target"],template:'\n    <div class="flex">\n        <router-link v-if="to" :to="to" :class="buttonclass" class="rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></router-link>\n        <a v-if="href" :target="target" :href="href" :class="buttonclass" class="hover:underline rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></a>\n    </div>\n    ',computed:{buttonclass:function(){switch(this.type){case"info":return"shadow bg-blue-400 text-white";case"success":return"shadow bg-green-400 text-white";case"error":return"shadow bg-red-400 text-white";case"warning":return"shadow bg-orange-400 text-white";default:return"shadow bg-white text-gray-800"}}}}),c=n.default.component("ns-input",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto ns-input">\n        <label :for="field.name" :class="hasError ? \'has-error\' : \'is-pristine\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="mt-1 relative overflow-hidden border rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="leading sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <input \n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" :type="type || field.type || \'text\'" \n                :class="inputClass" class="block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs ns-description"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs ns-error">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">This field is required.</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">This field must contain a valid email address.</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),u=r(8094),d=n.default.component("ns-select",{data:function(){return{}},props:["name","placeholder","field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},mounted:function(){},methods:{__:u.__},template:'\n    <div class="flex flex-col flex-auto ns-select">\n        <label :for="field.name" :class="hasError ? \'has-error\' : \'is-pristine\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="border mt-1 relative rounded-md shadow-sm mb-2 overflow-hidden">\n            <select :disabled="field.disabled ? field.disabled : false" @change="$emit( \'change\', $event )" :name="field.name" v-model="field.value" :class="inputClass" class="form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 appearance-none">\n                <option :value="null">{{ __( \'Choose an option\' ) }}</option>\n                <option :value="option.value" v-for="option of field.options" class="py-2">{{ option.label }}</option>\n            </select>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs ns-description"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs ns-error">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),f=n.default.component("ns-select-audio",{data:function(){return{}},props:["name","placeholder","field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__:u.__,playSelectedSound:function(){this.field.value.length>0&&new Audio(this.field.value).play()}},template:'\n    <div class="flex flex-col flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-error-primary\' : \'text-primary\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-error-primary\' : \'border-input-edge\'" class="border mt-1 flex relative overflow-hidden rounded-md shadow-sm mb-2 form-input">\n            <div @click="playSelectedSound()" class="border-r-2 border-input-edge flex-auto flex items-center justify-center hover:bg-info-primary hover:text-white">\n                <button class="w-10 flex item-center justify-center">\n                    <i class="las la-play text-2xl"></i>\n                </button>\n            </div>\n            <select :disabled="field.disabled ? field.disabled : false" @change="$emit( \'change\', $event )" :name="field.name" v-model="field.value" :class="inputClass" class="text-primary block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 outline-none">\n                <option :value="option.value" v-for="option of field.options" class="py-2">{{ option.label }}</option>\n            </select>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),p=n.default.component("ns-checkbox",{data:function(){return{}},props:["checked","field","label"],template:'\n    <div class="flex items-center justify-center cursor-pointer" @click="toggleIt()">\n        <div class="w-6 h-6 flex bg-input-background border-input-edge border items-center justify-center cursor-pointer">\n            <i v-if="isChecked" class="las la-check"></i>   \n        </div>\n        <span v-if="label" class="mx-2">{{ label }}</span>\n        <span v-if="field" class="mx-2">{{ field.label }}</span>\n    </div>\n    ',computed:{isChecked:function(){return this.field?this.field.value:this.checked}},methods:{toggleIt:function(){void 0!==this.field&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}}),h=r(1419),v=n.default.component("ns-table-row",{props:["options","row","columns","prependOptions","showOptions"],data:function(){return{optionsToggled:!1}},mounted:function(){},methods:{__:u.__,sanitizeHTML:function(t){var e=document.createElement("div");e.innerHTML=t;for(var r=e.getElementsByTagName("script"),n=r.length;n--;)r[n].parentNode.removeChild(r[n]);return e.innerHTML},getElementOffset:function(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},toggleMenu:function(t){var e=this;if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout((function(){var t=e.$el.querySelectorAll(".relative > .absolute")[0],r=e.$el.querySelectorAll(".relative")[0],n=e.getElementOffset(r);t.style.top=n.top+"px",t.style.left=n.left+"px",void 0!==r&&(r.classList.remove("relative"),r.classList.add("dropdown-holder"))}),100);else{var r=this.$el.querySelectorAll(".dropdown-holder")[0];r.classList.remove("dropdown-holder"),r.classList.add("relative")}},handleChanged:function(t){this.row.$checked=t,this.$emit("updated",this.row)},triggerAsync:function(t){var e=this;t.confirm?confirm(t.confirm.message)&&i.ih[t.type.toLowerCase()](t.url).subscribe((function(t){i.kX.success(t.message).subscribe(),e.$emit("reload",e.row)}),(function(t){e.toggleMenu(),i.kX.error(t.message).subscribe()})):(i.l.emit({identifier:"ns-table-row-action",value:{action:t,row:this.row,component:this}}),this.toggleMenu())},triggerPopup:function(t,e){var r=window.nsExtraComponents[t.component];if(t.component)return r?new Promise((function(n,i){h.G.show(r,{resolve:n,reject:i,row:e,action:t})})):i.kX.error((0,u.__)('Unable to load the component "'.concat(t.component,'". Make sure the component is registered to "nsExtraComponents".'))).subscribe();this.triggerAsync(t)}},template:'\n    <tr class="ns-table-row" :class="row.$cssClass ? row.$cssClass : \'border text-sm\'">\n        <td class="font-sans p-2">\n            <ns-checkbox @change="handleChanged( $event )" :checked="row.$checked"> </ns-checkbox>\n        </td>\n        <td v-if="prependOptions && showOptions" class="font-sans p-2">\n            <div class=""> \x3c!-- flex items-center justify-center --\x3e\n                <button @click="toggleMenu( $event )" :class="row.$toggled ? \'active\': \'\'" class="ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"><i class="las la-ellipsis-h"></i> {{ __( \'Options\' ) }}</button>\n                <div @click="toggleMenu( $event )" v-if="row.$toggled" class="absolute w-full h-full z-10 top-0 left-0"></div>\n                <div class="relative">\n                    <div v-if="row.$toggled" class="zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper">\n                        <div class="rounded-md shadow-xs">\n                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">\n                                <template v-for="action of row.$actions">\n                                    <a :href="action.url" v-if="action.type === \'GOTO\'" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                    <a href="javascript:void(0)" @click="triggerAsync( action )" v-if="[ \'GET\', \'DELETE\' ].includes( action.type )" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                    <a href="javascript:void(0)" @click="triggerPopup( action, row )" v-if="[ \'POPUP\' ].includes( action.type )" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                </template>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </td>\n        <td v-for="(column, identifier) of columns" class="font-sans p-2">\n            <template v-if="row[ identifier ] && row[ identifier ].type && row[ identifier ].type === \'link\'">\n                <a target="_blank" :href="row[ identifier ].href" v-html="sanitizeHTML( row[ identifier ].label )"></a>\n            </template>\n            <template v-if="typeof row[ identifier ] === \'string\' || typeof row[ identifier ] === \'number\'">\n                <div v-html="sanitizeHTML( row[ identifier ] )"></div>\n            </template>\n            <template v-if="row[ identifier ] === null">\n                <div>{{ __( \'Undefined\' ) }}</div>\n            </template>\n        </td>\n        <td v-if="!prependOptions && showOptions" class="font-sans p-2 flex flex-col items-center justify-center">\n            <div class=""> \x3c!-- flex items-center justify-center --\x3e\n                <button @click="toggleMenu( $event )" :class="row.$toggled ? \'active\': \'\'" class="ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"><i class="las la-ellipsis-h"></i> {{ __( \'Options\' ) }}</button>\n                <div @click="toggleMenu( $event )" v-if="row.$toggled" class="absolute w-full h-full z-10 top-0 left-0"></div>\n                <div class="relative">\n                    <div v-if="row.$toggled" class="zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right -ml-28 w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper">\n                        <div class="rounded-md shadow-xs">\n                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">\n                                <template v-for="action of row.$actions">\n                                    <a :href="action.url" :target="action.target || \'\'" v-if="action.type === \'GOTO\'" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                    <a href="javascript:void(0)" @click="triggerAsync( action )" v-if="[ \'GET\', \'DELETE\' ].includes( action.type )" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                    <a href="javascript:void(0)" @click="triggerPopup( action, row )" v-if="[ \'POPUP\' ].includes( action.type )" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                </template>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </td>\n    </tr>\n    '}),m=n.default.component("ns-spinner",{data:function(){return{}},mounted:function(){},computed:{validatedSize:function(){return this.size||24},validatedBorder:function(){return this.border||8},validatedAnimation:function(){return this.animation||"fast"}},props:["color","size","border"],template:"\n    <div class=\"flex items-center justify-center\">\n        <div class=\"loader ease-linear rounded-full border-gray-200\" :class=\"validatedAnimation + ' border-4 border-t-4' + ' w-' + validatedSize + ' h-' + validatedSize\"></div>\n    </div>\n    "}),_=r(3658),y=n.default.component("ns-crud-form",{data:function(){return{form:{},globallyChecked:!1,formValidation:new _.Z,rows:[]}},mounted:function(){this.loadForm()},props:["src","create-url","field-class","return-url","submit-url","submit-method","disable-tabs"],computed:{activeTabFields:function(){for(var t in this.form.tabs)if(this.form.tabs[t].active)return this.form.tabs[t].fields;return[]}},methods:{__:u.__,toggle:function(t){for(var e in this.form.tabs)this.form.tabs[e].active=!1;this.form.tabs[t].active=!0},handleShowOptions:function(t){this.rows.forEach((function(e){e.$id!==t.$id&&(e.$toggled=!1)}))},submit:function(){var t=this;return this.formValidation.validateForm(this.form).length>0?i.kX.error(this.$slots["error-invalid"]?this.$slots["error-invalid"][0].text:"No error message provided for having an invalid form.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe():(this.formValidation.disableForm(this.form),void 0===this.submitUrl?i.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:"No error message provided for not having a valid submit url.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe():void i.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,this.formValidation.extractForm(this.form)).subscribe((function(e){if("success"===e.status){if(t.submitMethod&&"post"===t.submitMethod.toLowerCase()&&!1!==t.returnUrl)return document.location=e.data.editUrl||t.returnUrl;i.kX.info(e.message,(0,u.__)("Okay"),{duration:3e3}).subscribe(),t.$emit("save",e)}t.formValidation.enableForm(t.form)}),(function(e){i.kX.error(e.message,void 0,{duration:5e3}).subscribe(),void 0!==e.data&&t.formValidation.triggerError(t.form,e.data),t.formValidation.enableForm(t.form)})))},handleGlobalChange:function(t){this.globallyChecked=t,this.rows.forEach((function(e){return e.$checked=t}))},loadForm:function(){var t=this;i.ih.get("".concat(this.src)).subscribe({next:function(e){t.form=t.parseForm(e.form),i.kq.doAction("ns-crud-form-loaded",t),t.$emit("updated",t.form)},error:function(t){i.kX.error(t.message,"OKAY",{duration:0}).subscribe()}})},parseForm:function(t){t.main.value=void 0===t.main.value?"":t.main.value,t.main=this.formValidation.createFields([t.main])[0];var e=0;for(var r in t.tabs)0===e&&(t.tabs[r].active=!0),t.tabs[r].active=void 0!==t.tabs[r].active&&t.tabs[r].active,t.tabs[r].fields=this.formValidation.createFields(t.tabs[r].fields),e++;return t}},template:'\n    <div class="form flex-auto" id="crud-form">\n        <div v-if="Object.values( form ).length === 0" class="flex items-center justify-center h-full">\n            <ns-spinner />\n        </div>\n        <div v-if="Object.values( form ).length > 0">\n            <div class="flex flex-col">\n                <div class="flex justify-between items-center" v-if="form.main">\n                    <label for="title" class="font-bold my-2 text-primary">\n                        <span v-if="form.main.name">{{ form.main.label }}</span>\n                    </label>\n                    <div for="title" class="text-sm my-2">\n                        <a v-if="returnUrl" :href="returnUrl" class="rounded-full border px-2 py-1 ns-inset-button error">{{ __( \'Go Back\' ) }}</a>\n                    </div>\n                </div>\n                <template v-if="form.main.name">\n                    <div :class="form.main.disabled ? \'disabled\' : form.main.errors.length > 0 ? \'error\' : \'info\'" class="input-group flex border rounded overflow-hidden">\n                        <input v-model="form.main.value" \n                            @blur="formValidation.checkField( form.main )" \n                            @change="formValidation.checkField( form.main )" \n                            :disabled="form.main.disabled"\n                            type="text" \n                            class="flex-auto outline-none h-10 px-2">\n                        <button :disabled="form.main.disabled" :class="form.main.disabled ? \'disabled\' : form.main.errors.length > 0 ? \'error\' : \'\'" @click="submit()" class="outline-none px-4 h-10 text-white border-l border-gray-400"><slot name="save">Save</slot></button>\n                    </div>\n                    <p class="text-xs text-primary py-1" v-if="form.main.description && form.main.errors.length === 0">{{ form.main.description }}</p>\n                    <p class="text-xs py-1 text-error-tertiary" v-for="error of form.main.errors">\n                        <span v-if="error.identifier=== \'required\'"><slot name="error-required">{{ error.identifier }}</slot></span>\n                        <span v-if="error.identifier=== \'invalid\'"><slot name="error-invalid">{{ error.message }}</slot></span>\n                    </p>\n                </template>\n            </div>\n            <div id="tabs-container" class="my-5 ns-tab" v-if="disableTabs !== \'true\'">\n                <div class="header flex" style="margin-bottom: -2px;">\n                    <div v-for="( tab , identifier ) of form.tabs" \n                        @click="toggle( identifier )" \n                        :class="tab.active ? \'active border border-b-transparent\' : \'inactive border\'" \n                        class="tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer" style="margin-right: -1px">{{ tab.label }}</div>\n                </div>\n                <div class="border ns-tab-item p-4">\n                    <div class="-mx-4 flex flex-wrap">\n                        <div :class="fieldClass || \'px-4 w-full md:w-1/2 lg:w-1/3\'" v-for="field of activeTabFields">\n                            <ns-field @blur="formValidation.checkField( field )" @change="formValidation.checkField( field )" :field="field"/>\n                        </div>\n                    </div>\n                    <div class="flex justify-end" v-if="! form.main.name">\n                        <div class="ns-button" :class="form.main.disabled ? \'default\' : ( form.main.errors.length > 0 ? \'error\' : \'info\' )">\n                            <button :disabled="form.main.disabled" @click="submit()" class="outline-none px-4 h-10 border-l"><slot name="save">{{ __( \'Save\' ) }}</slot></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    '}),b=n.default.component("ns-textarea",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto ns-textarea">\n        <label :for="field.name" :class="hasError ? \'text-error-primary\' : \'text-primary\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="mt-1 relative border overflow-hidden rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-secondary sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <textarea \n                :rows="field.data ? ( field.data.rows || 10 ) : 10"\n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" :type="type || field.type || \'text\'" \n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5" :placeholder="placeholder"></textarea>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">This field is required.</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">This field must contain a valid email address.</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),g=r(3012),x=n.default.component("ns-multiselect",{data:function(){return{showPanel:!1,search:""}},props:["field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},_options:function(){var t=this;return this.field.options.map((function(e){return e.selected=void 0!==e.selected&&e.selected,t.field.value&&t.field.value.includes(e.value)&&(e.selected=!0),e}))}},methods:{__:u.__,addOption:function(t){this.field.disabled||(this.$emit("addOption",t),this.$forceUpdate(),setTimeout((function(){}),100))},removeOption:function(t,e){var r=this;if(!this.field.disabled)return e.preventDefault(),e.stopPropagation(),this.$emit("removeOption",t),this.$forceUpdate(),setTimeout((function(){r.search=""}),100),!1}},mounted:function(){var t=this;this.field.value&&this.field.value.reverse().forEach((function(e){var r=t.field.options.filter((function(t){return t.value===e}));r.length>=0&&t.addOption(r[0])}))},template:'\n    <div class="flex flex-col ns-multiselect">\n        <label :for="field.name" :class="hasError ? \'text-error-secondary\' : \'text-primary\'" class="block mb-1 leading-5 font-medium"><slot></slot></label>\n        <div class="flex flex-col">\n            <div @click="showPanel = !showPanel" :class="showPanel ? \'\' : \'\'" class="select-preview flex justify-between rounded border border-input-option-hover p-2 items-center">\n                <div class="flex -mx-1 -my-1 flex-wrap">\n                    <div class="px-1 my-1" v-for="(option,index) of _options.filter( o => o.selected )">\n                        <div class="rounded bg-info-secondary text-white flex justify-between p-1 items-center">\n                            <span class="pr-8">{{ option.label }}</span>\n                            <button @click="removeOption( option, $event )" class="rounded outline-none hover:bg-info-tertiary h-6 w-6 flex items-center justify-center">\n                                <i class="las la-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <i class="las la-angle-down" v-if="showPanel"></i>\n                    <i class="las la-angle-up" v-if="!showPanel"></i>\n                </div>\n            </div>\n            <div class="h-0 z-10" v-if="showPanel" :class="showPanel ? \'shadow\' : \'\'">\n                <div class="ns-dropdown shadow">\n                    <div class="search border-b border-input-option-hover">\n                        <input v-model="search" class="p-2 w-full bg-transparent text-primary outline-none" placeholder="Search">\n                    </div>\n                    <div class="h-40 overflow-y-auto">\n                        <div @click="addOption( option )" v-for="(option, index) of _options" :class="option.selected ? \'bg-info-secondary text-white\' : \'text-primary\'" class="option p-2 flex justify-between cursor-pointer hover:bg-info-secondary hover:text-white">\n                            <span>{{ option.label }}</span>\n                            <span>\n                                <i v-if="option.checked" class="las la-check"></i>\n                            </span>\n                        </div>\n                    </div>\n                    <div v-if="_options.length === 0" class="p-2 text-center text-primary">{{ __( \'Nothing to display\' ) }}</div>\n                </div>\n            </div>\n        </div>\n        <div class="my-2">\n            <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n            <p v-for="error of field.errors" class="text-xs text-error-secondary">\n                <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n                <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n                <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n            </p>\n        </div>\n    </div>\n    '}),w=n.default.component("ns-date",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-input-edge cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-auto flex-col mb-2">\n        <label :for="field.name" :class="hasError ? \'text-error-primary\' : \'text-primary\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-error-primary\' : \'border-input-edge\'" class="bg-input-background text-secondary mt-1 relative border rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <input \n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" type="date"\n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),C=r(2478),k=n.default.component("ns-media-input",{template:'\n    <div class="flex flex-col mb-2 flex-auto ns-media">\n        <label :for="field.name" :class="hasError ? \'has-error\' : \'is-pristine\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="mt-1 relative border rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-primary sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <div class="rounded overflow-hidden flex">\n                <div \n                    v-if="field.data && field.data.type === \'model\'"\n                    class="form-input flex w-full sm:text-sm items-center sm:leading-5 h-10">\n                    <template v-if="field.value && field.value.name">\n                        <img class="w-8 h-8 m-1" :src="field.value.sizes.thumb" :alt="field.value.name">\n                        <span class="text-xs text-secondary">{{ field.value.name }}</span>\n                    </template>\n                </div>\n                <input \n                    v-if="! field.data || field.data.type === \'undefined\' || field.data.type === \'url\'"\n                    v-model="field.value" \n                    :disabled="field.disabled"\n                    @blur="$emit( \'blur\', this )" \n                    @change="$emit( \'change\', this )" \n                    :id="field.name" :type="type || field.type || \'text\'" \n                    :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n                <button \n                    @click="toggleMedia( field )"\n                    class="w-10 h-10 flex items-center justify-center border-l-2 outline-none">\n                    <i class="las la-photo-video"></i>\n                </button>\n            </div>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-primary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    ',computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":"ns-enabled"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},data:function(){return{}},props:["placeholder","leading","type","field"],mounted:function(){},methods:{toggleMedia:function(){var t=this;new Promise((function(e,r){h.G.show(C.default,Object.assign({resolve:e,reject:r},t.field.data||{}))})).then((function(e){"use-selected"===e.event&&(t.field.data&&"url"!==t.field.data.type?t.field.data&&"model"!==t.field.data.type||(t.field.value=e.value[0]):t.field.value=e.value[0].sizes.original,t.$forceUpdate())}))}}}),P=n.default.component("ns-close-button",{template:'\n    <button @click="clicked( $event )" class="outline-none ns-close-button border rounded-full h-8 w-8 items-center justify-center">\n        <i class="las la-times"></i>\n    </button>\n    ',methods:{clicked:function(t){this.$emit("click",t)}}}),j=n.default.component("ns-icon-button",{template:'\n    <button @click="clicked( $event )" :class="type ? type : buttonClass " class="ns-inset-button rounded-full h-8 w-8 border items-center justify-center">\n        <i :class="className" class="las"></i>\n    </button>\n    ',props:["className","buttonClass","type"],methods:{clicked:function(t){this.$emit("click",t)}}}),S=r(1272),O=r.n(S),E=r(5234),T=r.n(E),L=n.default.component("ns-ckeditor",{data:function(){return{editor:T()}},components:{ckeditor:O().component},mounted:function(){},methods:{__:u.__},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-error-primary\' : \'text-primary\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="mt-1 relative rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-secondary sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <ckeditor class="w-full" :editor="editor" v-model="field.value"></ckeditor>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),$=n.default.component("ns-tabs",{data:function(){return{childrens:[]}},props:["active"],computed:{activeComponent:function(){var t=this.$children.filter((function(t){return t.active}));return t.length>0&&t[0]}},methods:{toggle:function(t){this.$emit("active",t.identifier),this.$emit("changeTab",t.identifier)}},mounted:function(){this.childrens=this.$children},template:'\n    <div class="tabs flex flex-col flex-auto ns-tab">\n        <div class="header flex" style="margin-bottom: -1px;">\n            <div v-for="( tab , identifier ) of childrens" @click="toggle( tab )" :class="active === tab.identifier ? \'border-b-0 active z-10\' : \'border inactive\'" class="tab rounded-tl rounded-tr border  px-3 py-2 cursor-pointer" style="margin-right: -1px">{{ tab.label }}</div>\n        </div>\n        <slot></slot>\n    </div>\n    '}),F=n.default.component("ns-tabs-item",{data:function(){return{}},mounted:function(){},props:["label","identifier","padding"],template:'\n    <div :class="( padding || \'p-4\' )" class="ns-tab-item border flex-auto" v-if="$parent.active === identifier">\n        <slot></slot>\n    </div>\n    '}),D=r(3720),A=r(7359),V=r(2381),N=r(2867),q=r(3216);const Z={data:function(){return{fields:[],validation:new _.Z}},methods:{__:u.__,popupCloser:N.Z,popupResolver:q.Z,closePopup:function(){this.popupResolver(!1)},useFilters:function(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters:function(){this.fields.forEach((function(t){return t.value=""})),this.popupResolver(null)}},mounted:function(){this.fields=this.validation.createFields(this.$popupParams.queryFilters),this.popupCloser()}};var R=r(1900);const I=(0,R.Z)(Z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-box shadow-lg w-95vw h-95vh md:w-2/5-screen overflow-hidden md:h-5/6-screen flex flex-col"},[e("div",{staticClass:"p-2 border-b ns-box-header flex justify-between items-center"},[e("h3",[t._v(t._s(t.__("Search Filters")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.closePopup()}}})],1)]),t._v(" "),e("div",{staticClass:"p-2 ns-box-body flex-auto overflow-y-auto"},t._l(t.fields,(function(t,r){return e("ns-field",{key:r,attrs:{field:t}})})),1),t._v(" "),e("div",{staticClass:"p-2 flex justify-between ns-box-footer border-t"},[e("div",[e("ns-button",{attrs:{type:"error"},on:{click:function(e){return t.clearFilters()}}},[t._v(t._s(t.__("Clear Filters")))])],1),t._v(" "),e("div",[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.useFilters()}}},[t._v(t._s(t.__("Use Filters")))])],1)])])}),[],!1,null,null,null).exports;function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function Y(){Y=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var s=e&&e.prototype instanceof _?e:_,o=Object.create(s.prototype),a=new T(n||[]);return i(o,"_invoke",{value:j(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function _(){}function y(){}function b(){}var g={};c(g,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,o)&&(g=w);var C=b.prototype=_.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(i,s,o,a){var l=d(t[i],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==G(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function j(e,r,n){var i=f;return function(s,o){if(i===h)throw new Error("Generator is already running");if(i===v){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?v:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=v,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=d(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(G(e)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,a,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new P(u(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}var H=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};const M={data:function(){return{prependOptions:!1,showOptions:!0,isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],withFilters:!1,columns:[],selectedEntries:[],globallyChecked:!1,result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}},name:"ns-crud",mounted:function(){void 0!==this.identifier&&nsCrudHandler.defineInstance(this.identifier,this),this.loadConfig()},props:["src","create-url","mode","identifier","queryParams"],computed:{getParsedSrc:function(){return"".concat(this.src,"?").concat(this.sortColumn).concat(this.searchQuery).concat(this.queryFiltersString).concat(this.queryPage).concat(this.getQueryParams()?"&"+this.getQueryParams():"")},showQueryFilters:function(){return this.queryFilters.length>0},getSelectedAction:function(){var t=this,e=this.bulkActions.filter((function(e){return e.identifier===t.bulkAction}));return e.length>0&&e[0]},pagination:function(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage:function(){return this.result?"&page=".concat(this.page):""},resultInfo:function(){return(0,u.__)("displaying {perPage} on {items} items").replace("{perPage}",this.result.total).replace("{items}",this.result.total)}},methods:{__:u.__,getQueryParams:function(){var t=this;return this.queryParams?Object.keys(this.queryParams).map((function(e){return"".concat(e,"=").concat(t.queryParams[e])})).join("&"):""},pageNumbers:function(t,e){var r=[];e-3>1&&r.push(1,"...");for(var n=1;n<=t;n++)e+3>n&&e-3<n&&r.push(n);return e+3<t&&r.push("...",t),r.filter((function(t){return t>0||"string"==typeof t}))},downloadContent:function(){nsHttpClient.post("".concat(this.src,"/export?").concat(this.getParsedSrc),{entries:this.selectedEntries.map((function(t){return t.$id}))}).subscribe((function(t){setTimeout((function(){return document.location=t.url}),300),i.kX.success((0,u.__)("The document has been generated.")).subscribe()}),(function(t){i.kX.error(t.message||(0,u.__)("Unexpected error occurred.")).subscribe()}))},clearSelectedEntries:function(){var t=this;h.G.show(V.default,{title:(0,u.__)("Clear Selected Entries ?"),message:(0,u.__)("Would you like to clear all selected entries ?"),onAction:function(e){e&&(t.selectedEntries=[])}})},refreshRow:function(t){if(console.log({row:t}),!0===t.$checked){0===this.selectedEntries.filter((function(e){return e.$id===t.$id})).length&&this.selectedEntries.push(t)}else{var e=this.selectedEntries.filter((function(e){return e.$id===t.$id}));if(e.length>0){var r=this.selectedEntries.indexOf(e[0]);this.selectedEntries.splice(r,1)}}},handleShowOptions:function(t){this.result.data.forEach((function(e){e.$id!==t.$id&&(e.$toggled=!1)}))},handleGlobalChange:function(t){var e=this;this.globallyChecked=t,this.result.data.forEach((function(r){r.$checked=t,e.refreshRow(r)}))},loadConfig:function(){var t=this;nsHttpClient.get("".concat(this.src,"/config?").concat(this.getQueryParams())).subscribe((function(e){t.columns=e.columns,t.bulkActions=e.bulkActions,t.queryFilters=e.queryFilters,t.prependOptions=e.prependOptions,t.showOptions=e.showOptions,t.refresh()}),(function(t){i.kX.error(t.message,"OK",{duration:!1}).subscribe()}))},cancelSearch:function(){this.searchInput="",this.search()},search:function(){this.searchInput?this.searchQuery="&search=".concat(this.searchInput):this.searchQuery="",this.refresh()},sort:function(t){for(var e in this.columns)e!==t&&(this.columns[e].$sorted=!1,this.columns[e].$direction="");switch(this.columns[t].$sorted=!0,this.columns[t].$direction){case"asc":this.columns[t].$direction="desc";break;case"desc":this.columns[t].$direction="";break;case"":this.columns[t].$direction="asc"}["asc","desc"].includes(this.columns[t].$direction)?this.sortColumn="active=".concat(t,"&direction=").concat(this.columns[t].$direction):this.sortColumn="",this.$emit("sort",this.columns[t]),this.refresh()},bulkDo:function(){var t=this;return this.bulkAction?this.selectedEntries.length>0?confirm(this.getSelectedAction.confirm||this.$slots["error-bulk-confirmation"]||(0,u.__)("Would you like to perform the selected bulk action on the selected entries ?"))?nsHttpClient.post("".concat(this.src,"/bulk-actions"),{action:this.bulkAction,entries:this.selectedEntries.map((function(t){return t.$id}))}).subscribe({next:function(e){i.kX.info(e.message).subscribe(),t.selectedEntries=[],t.refresh()},error:function(t){i.kX.error(t.message).subscribe()}}):void 0:i.kX.error(this.$slots["error-no-selection"]?this.$slots["error-no-selection"][0].text:(0,u.__)("No selection has been made.")).subscribe():i.kX.error(this.$slots["error-no-action"]?this.$slots["error-no-action"][0].text:(0,u.__)("No action has been selected.")).subscribe()},openQueryFilter:function(){return H(this,void 0,void 0,Y().mark((function t(){var e,r=this;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(I),t.next=4,new Promise((function(t,e){h.G.show(I,{resolve:t,reject:e,queryFilters:r.queryFilters})}));case 4:e=t.sent,this.withFilters=!1,this.queryFiltersString="",null!==e&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(e))),this.refresh(),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,this,[[0,11]])})))},refresh:function(){var t=this;this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get("".concat(this.getParsedSrc)).subscribe((function(e){e.data=e.data.map((function(e){return t.selectedEntries.filter((function(t){return t.$id===e.$id})).length>0&&(e.$checked=!0),e})),t.isRefreshing=!1,t.result=e,t.page=e.current_page}),(function(e){t.isRefreshing=!1,i.kX.error(e.message).subscribe()}))}}};const X=(0,R.Z)(M,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full rounded-lg",class:"light"!==t.mode?"shadow mb-8":"",attrs:{id:"crud-table"}},["light"!==t.mode?e("div",{staticClass:"p-2 border-b border-popup-surface flex flex-col md:flex-row justify-between flex-wrap",attrs:{id:"crud-table-header"}},[e("div",{staticClass:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex",attrs:{id:"crud-search-box"}},[t.createUrl?e("div",{staticClass:"px-2 flex items-center justify-center"},[e("a",{staticClass:"rounded-full ns-crud-button text-sm h-10 flex items-center justify-center cursor-pointer px-3 outline-none border",attrs:{href:t.createUrl||"#"}},[e("i",{staticClass:"las la-plus"})])]):t._e(),t._v(" "),e("div",{staticClass:"px-2"},[e("div",{staticClass:"rounded-full p-1 ns-crud-input flex"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"w-36 md:w-auto bg-transparent outline-none px-2",attrs:{type:"text"},domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),t._v(" "),e("button",{staticClass:"rounded-full w-8 h-8 outline-none ns-crud-input-button",on:{click:function(e){return t.search()}}},[e("i",{staticClass:"las la-search"})]),t._v(" "),t.searchQuery?e("button",{staticClass:"ml-1 rounded-full w-8 h-8 bg-error-secondary text-white outline-none hover:bg-error-tertiary",on:{click:function(e){return t.cancelSearch()}}},[e("i",{staticClass:"las la-times"})]):t._e()])]),t._v(" "),e("div",{staticClass:"px-2 flex items-center justify-center"},[e("button",{staticClass:"rounded-full text-sm h-10 px-3 outline-none border ns-crud-button",on:{click:function(e){return t.refresh()}}},[e("i",{staticClass:"las la-sync",class:t.isRefreshing?"animate-spin":""})])]),t._v(" "),t.showQueryFilters?e("div",{staticClass:"px-2 flex items-center"},[e("button",{staticClass:"ns-crud-button border rounded-full text-sm h-10 px-3 outline-none",class:t.withFilters?"table-filters-enabled":"table-filters-disabled",on:{click:function(e){return t.openQueryFilter()}}},[t.withFilters?t._e():e("i",{staticClass:"las la-filter"}),t._v(" "),t.withFilters?e("i",{staticClass:"las la-check"}):t._e(),t._v(" "),t.withFilters?t._e():e("span",[t._v(t._s(t.__("Filters")))]),t._v(" "),t.withFilters?e("span",[t._v(t._s(t.__("Has Filters")))]):t._e()])]):t._e()]),t._v(" "),e("div",{staticClass:"-mx-1 flex flex-wrap w-full md:w-auto",attrs:{id:"crud-buttons"}},[t.selectedEntries.length>0?e("div",{staticClass:"px-1 flex items-center"},[e("button",{staticClass:"flex justify-center items-center rounded-full text-sm h-10 px-3 outline-none ns-crud-button border",on:{click:function(e){return t.clearSelectedEntries()}}},[e("i",{staticClass:"lar la-check-square"}),t._v(" "+t._s(t.__("{entries} entries selected").replace("{entries}",t.selectedEntries.length))+"\n                ")])]):t._e(),t._v(" "),e("div",{staticClass:"px-1 flex items-center"},[e("button",{staticClass:"flex justify-center items-center rounded-full text-sm h-10 px-3 ns-crud-button border outline-none",on:{click:function(e){return t.downloadContent()}}},[e("i",{staticClass:"las la-download"}),t._v(" "+t._s(t.__("Download")))])])])]):t._e(),t._v(" "),e("div",{staticClass:"flex"},[e("div",{staticClass:"overflow-x-auto flex-auto"},[Object.values(t.columns).length>0?e("table",{staticClass:"table ns-table w-full"},[e("thead",[e("tr",[e("th",{staticClass:"text-center px-2 border w-16 py-2"},[e("ns-checkbox",{attrs:{checked:t.globallyChecked},on:{change:function(e){return t.handleGlobalChange(e)}}})],1),t._v(" "),t.prependOptions&&t.showOptions?e("th",{staticClass:"text-left px-2 py-2 w-16 border"}):t._e(),t._v(" "),t._l(t.columns,(function(r,n){return e("th",{key:n,staticClass:"cursor-pointer justify-betweenw-40 border text-left px-2 py-2",style:{"min-width":r.width||"auto"},on:{click:function(e){return t.sort(n)}}},[e("div",{staticClass:"w-full flex justify-between items-center"},[e("span",{staticClass:"flex"},[t._v(t._s(r.label))]),t._v(" "),e("span",{staticClass:"h-6 w-6 flex justify-center items-center"},["desc"===r.$direction?e("i",{staticClass:"las la-sort-amount-up"}):t._e(),t._v(" "),"asc"===r.$direction?e("i",{staticClass:"las la-sort-amount-down"}):t._e()])])])})),t._v(" "),!t.prependOptions&&t.showOptions?e("th",{staticClass:"text-left px-2 py-2 w-16 border"}):t._e()],2)]),t._v(" "),e("tbody",[void 0!==t.result.data&&t.result.data.length>0?t._l(t.result.data,(function(r,n){return e("ns-table-row",{key:n,attrs:{columns:t.columns,prependOptions:t.prependOptions,showOptions:t.showOptions,row:r},on:{updated:function(e){return t.refreshRow(e)},reload:function(e){return t.refresh()},toggled:function(e){return t.handleShowOptions(e)}}})})):t._e(),t._v(" "),t.result&&0!==t.result.data.length?t._e():e("tr",[e("td",{staticClass:"text-center text-gray-600 dark:text-slate-300 py-3",attrs:{colspan:Object.values(t.columns).length+2}},[t._v(t._s(t.__("There is nothing to display...")))])])],2)]):t._e()])]),t._v(" "),e("div",{staticClass:"p-2 flex border-t flex-col md:flex-row justify-between footer"},[t.bulkActions.length>0?e("div",{staticClass:"mb-2 md:mb-0 flex justify-between rounded-full ns-crud-input p-1",attrs:{id:"grouped-actions"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.bulkAction,expression:"bulkAction"}],staticClass:"outline-none bg-transparent",attrs:{id:"grouped-actions"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.bulkAction=e.target.multiple?r:r[0]}}},[e("option",{staticClass:"bg-input-disabled",attrs:{selected:"",value:""}},[t._t("bulk-label",(function(){return[t._v(t._s(t.__("Bulk Actions")))]}))],2),t._v(" "),t._l(t.bulkActions,(function(r,n){return e("option",{key:n,staticClass:"bg-input-disabled",domProps:{value:r.identifier}},[t._v(t._s(r.label))])}))],2),t._v(" "),e("button",{staticClass:"ns-crud-input-button h-8 px-3 outline-none rounded-full flex items-center justify-center",on:{click:function(e){return t.bulkDo()}}},[t._t("bulk-go",(function(){return[t._v(t._s(t.__("Apply")))]}))],2)]):t._e(),t._v(" "),e("div",{staticClass:"flex"},[e("div",{staticClass:"items-center flex text-primary mx-4"},[t._v(t._s(t.resultInfo))]),t._v(" "),e("div",{staticClass:"flex items-center -mx-1",attrs:{id:"pagination"}},[t.result.current_page?[e("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.page=t.result.first_page,t.refresh()}}},[e("i",{staticClass:"las la-angle-double-left"})]),t._v(" "),t._l(t.pagination,(function(r,n){return["..."!==t.page?e("a",{key:n,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border",class:t.page==r?"bg-info-tertiary border-transparent text-white":"",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.page=r,t.refresh()}}},[t._v(t._s(r))]):t._e(),t._v(" "),"..."===t.page?e("a",{key:n,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border",attrs:{href:"javascript:void(0)"}},[t._v("...")]):t._e()]})),t._v(" "),e("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.page=t.result.last_page,t.refresh()}}},[e("i",{staticClass:"las la-angle-double-right"})])]:t._e()],2)])])])}),[],!1,null,null,null).exports;var U=r(8321),z=r(1726),Q=r(7259);const W=n.default.extend({methods:{__:u.__},name:"ns-avatar",data:function(){return{svg:""}},mounted:function(){this.svg=(0,z.createAvatar)(Q,{seed:this.displayName})},computed:{avatarUrl:function(){return 0===this.url.length?"":this.url}},props:["url","display-name"]});const B=(0,R.Z)(W,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"flex justify-between items-center flex-shrink-0"},[e("span",{staticClass:"hidden md:inline-block px-2"},[t._v(t._s(t.__("Howdy, {name}").replace("{name}",this.displayName)))]),t._v(" "),e("span",{staticClass:"md:hidden px-2"},[t._v(t._s(t.displayName))]),t._v(" "),e("div",{staticClass:"px-2"},[e("div",{staticClass:"w-8 h-8 overflow-hidden rounded-full bg-gray-600"},[""!==t.avatarUrl?e("img",{staticClass:"w-8 h-8 overflow-hidden rounded-full",attrs:{src:t.avatarUrl,alt:t.displayName,srcset:""}}):t._e(),t._v(" "),""===t.avatarUrl?e("div",{domProps:{innerHTML:t._s(t.svg)}}):t._e()])])])}),[],!1,null,null,null).exports;var K=r(9607),J=r(1128),tt=r(9785),et=r(5507);function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==rt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const it={name:"ns-search",props:["url","placeholder","value","label","method","searchArgument"],data:function(){return{searchText:"",searchTimeout:null,results:[]}},methods:{__:u.__,selectOption:function(t){this.$emit("select",t),this.searchText="",this.results=[]}},watch:{searchText:function(){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.searchText.length>0&&i.ih[t.method||"post"](t.url,nt({},t.searchArgument||"search",t.searchText)).subscribe({next:function(e){t.results=e},error:function(t){i.kX.error(t.message||(0,u.__)("An unexpected error occurred.")).subscribe()}})}),1e3)}},mounted:function(){}};const st=(0,R.Z)(it,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-search"},[e("div",{staticClass:"input-group info border"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"p-2 w-full",attrs:{type:"text",placeholder:t.placeholder||t.__("Search..."),id:""},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"relative"},[e("div",{staticClass:"w-full absolute"},[t.results.length>0&&t.searchText.length>0?e("ul",{staticClass:"ns-vertical-menu"},t._l(t.results,(function(r,n){return e("li",{key:n,staticClass:"border-b p-2 cursor-pointer",on:{click:function(e){return t.selectOption(r)}}},[t._v(t._s(r[t.label]))])})),0):t._e()])])])}),[],!1,null,null,null).exports},3012:(t,e,r)=>{"use strict";r.d(e,{P:()=>a});var n=r(538),i=r(9607),s=r(7359),o=r(3720),a=n.default.component("ns-field",{data:function(){return{}},mounted:function(){},components:{nsDateRangePicker:i.Z,nsDateTimePicker:s.Z,nsSwitch:o.Z},computed:{isInputField:function(){return["text","password","email","number","tel"].includes(this.field.type)},isDateField:function(){return["date"].includes(this.field.type)},isSelectField:function(){return["select"].includes(this.field.type)},isTextarea:function(){return["textarea"].includes(this.field.type)},isCheckbox:function(){return["checkbox"].includes(this.field.type)},isMultiselect:function(){return["multiselect"].includes(this.field.type)},isSelectAudio:function(){return["select-audio"].includes(this.field.type)},isSwitch:function(){return["switch"].includes(this.field.type)},isMedia:function(){return["media"].includes(this.field.type)},isCkEditor:function(){return["ckeditor"].includes(this.field.type)},isDateTimePicker:function(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker:function(){return["daterangepicker"].includes(this.field.type)},isCustom:function(){return["custom"].includes(this.field.type)}},props:["field"],methods:{addOption:function(t){"select"===this.field.type&&this.field.options.forEach((function(t){return t.selected=!1})),t.selected=!0;var e=this.field.options.indexOf(t);this.field.options.splice(e,1),this.field.options.unshift(t),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:t})},refreshMultiselect:function(){this.field.value=this.field.options.filter((function(t){return t.selected})).map((function(t){return t.value}))},removeOption:function(t){t.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:t})}},template:'\n    <div class="flex flex-auto">\n        <ns-input @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isInputField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-input>\n        <ns-date-time-picker @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateTimePicker">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date-time-picker>\n        <ns-date @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date>\n        <ns-media-input @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isMedia">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-media-input>\n        <ns-select @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isSelectField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-select>\n        <ns-date-range-picker @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateRangePicker">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date-range-picker>\n        <ns-select-audio @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isSelectAudio">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-select-audio>\n        <ns-textarea @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isTextarea">\n            <template>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-textarea v-slot>\n        <ns-checkbox @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isCheckbox">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-checkbox>\n        <ns-multiselect \n            @addOption="addOption( $event )" \n            @removeOption="removeOption( $event )" \n            :field="field" \n            v-if="isMultiselect">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-multiselect>\n        <ns-ckeditor \n            :field="field" \n            v-if="isCkEditor">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-ckeditor>\n        <ns-switch \n            :field="field" \n            @change="$emit( \'change\', field )"\n            v-if="isSwitch">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-switch>\n        <template v-if="isCustom">\n            <keep-alive>\n                <component \n                    :field="field"\n                    @blur="$emit( \'blur\', field )" \n                    @change="$emit( \'change\', field )" \n                    v-bind:is="field.component"></component>\n            </keep-alive>\n        </template>\n    </div>\n    '})},3515:(t,e,r)=>{"use strict";r.d(e,{W:()=>c,f:()=>u});var n=r(2077),i=r.n(n),s=r(538),o=r(6740),a=r.n(o),l=new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(t){return 0})).join(""),c=s.default.filter("currency",(function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full";switch(ns.currency.ns_currency_prefered){case"iso":e=ns.currency.ns_currency_iso;break;case"symbol":e=ns.currency.ns_currency_symbol}if("full"===n){var s={decimal:ns.currency.ns_currency_decimal_separator,separator:ns.currency.ns_currency_thousand_separator,precision:parseInt(ns.currency.ns_currency_precision),symbol:""};r=a()(t,s).format()}else r=i()(t).format("0.0a");return"".concat("before"===ns.currency.ns_currency_position?e:"").concat(r).concat("after"===ns.currency.ns_currency_position?e:"")})),u=function(t){var e="0.".concat(l);return parseFloat(i()(t).format(e))}},9364:(t,e,r)=>{"use strict";r.d(e,{b:()=>n});var n=r(538).default.filter("truncate",(function(t,e){return t?(t=t.toString()).length>e?t.substring(0,e)+"...":t:""}))},3658:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(s=i.key,o=void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(s,"string"),"symbol"===n(o)?o:String(o)),i)}var s,o}r.d(e,{Z:()=>s});var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,r=[{key:"validateFields",value:function(t){var e=this;return 0===t.map((function(t){return e.checkField(t),t.errors?0===t.errors.length:0})).filter((function(t){return!1===t})).length}},{key:"validateFieldsErrors",value:function(t){var e=this;return t.map((function(t){return e.checkField(t),t.errors})).flat()}},{key:"validateForm",value:function(t){t.main&&this.validateField(t.main);var e=[];for(var r in t.tabs)if(t.tabs[r].fields){var n=[],i=this.validateFieldsErrors(t.tabs[r].fields);i.length>0&&n.push(i),t.tabs[r].errors=n.flat(),e.push(n.flat())}return e.flat().filter((function(t){return void 0!==t}))}},{key:"initializeTabs",value:function(t){var e=0;for(var r in t)0===e&&(t[r].active=!0),t[r].active=void 0!==t[r].active&&t[r].active,t[r].fields=this.createFields(t[r].fields),e++;return t}},{key:"validateField",value:function(t){return this.checkField(t)}},{key:"fieldsValid",value:function(t){return!(t.map((function(t){return t.errors&&t.errors.length>0})).filter((function(t){return t})).length>0)}},{key:"createFields",value:function(t){return t.map((function(e){if(e.type=e.type||"text",e.errors=e.errors||[],e.disabled=e.disabled||!1,"custom"===e.type&&"string"==typeof e.component){var r=e.component;if(e.component=nsExtraComponents[e.component],!e.component)throw'Failed to load a custom component. "'.concat(r,'" is not provided as an extra component. More details here: https://my.nexopos.com/en/documentation/developpers-guides/how-to-register-a-custom-vue-component');e.component.$field=e,e.component.$fields=t}return e}))}},{key:"createForm",value:function(t){if(t.main&&(t.main=this.createFields([t.main])[0]),t.tabs)for(var e in t.tabs)t.tabs[e].errors=[],void 0!==t.tabs[e].fields?t.tabs[e].fields=this.createFields(t.tabs[e].fields):console.info('Warning: The tab "'.concat(t.tabs[e].label,'" is missing fields. Fallback on checking dynamic component instead.'));return t}},{key:"enableFields",value:function(t){return t.map((function(t){return t.disabled=!1}))}},{key:"disableFields",value:function(t){return t.map((function(t){return t.disabled=!0}))}},{key:"disableForm",value:function(t){for(var e in t.main&&(t.main.disabled=!0),t.tabs)t.tabs[e].fields.forEach((function(t){return t.disabled=!0}))}},{key:"enableForm",value:function(t){for(var e in t.main&&(t.main.disabled=!1),t.tabs)t.tabs[e].fields.forEach((function(t){return t.disabled=!1}))}},{key:"getValue",value:function(t){var e={};return t.forEach((function(t){e[t.name]=t.value})),e}},{key:"checkField",value:function(t){var e=this;return void 0!==t.validation&&(t.errors=[],this.detectValidationRules(t.validation).forEach((function(r){e.fieldPassCheck(t,r)}))),t}},{key:"extractForm",value:function(t){var e={};if(t.main&&(e[t.main.name]=t.main.value),t.tabs)for(var r in t.tabs)void 0===e[r]&&(e[r]={}),e[r]=this.extractFields(t.tabs[r].fields);return e}},{key:"extractFields",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.forEach((function(t){e[t.name]=t.value})),e}},{key:"detectValidationRules",value:function(t){var e=function(t){var e;return["email","required"].includes(t)?{identifier:t}:(e=/(min)\:([0-9])+/g.exec(t))||(e=/(max)\:([0-9])+/g.exec(t))?{identifier:e[1],value:e[2]}:t};return Array.isArray(t)?t.filter((function(t){return"string"==typeof t})).map(e):t.split("|").map(e)}},{key:"triggerError",value:function(t,e){if(console.log(e),e.errors){var r=function(r){var n=r.split(".").filter((function(t){return!/^\d+$/.test(t)}));2===n.length&&t.tabs[n[0]].fields.forEach((function(t){t.name===n[1]&&e.errors[r].forEach((function(e){var r={identifier:"invalid",invalid:!0,message:e,name:t.name};t.errors.push(r)}))})),r===t.main.name&&e.errors[r].forEach((function(e){t.main.errors.push({identifier:"invalid",invalid:!0,message:e,name:t.main.name})}))};for(var n in e.errors)r(n)}}},{key:"triggerFieldsErrors",value:function(t,e){if(e&&e.errors){var r=function(r){t.forEach((function(t){t.name===r&&e.errors[r].forEach((function(e){var r={identifier:"invalid",invalid:!0,message:e,name:t.name};t.errors.push(r)}))}))};for(var n in e.errors)r(n)}}},{key:"fieldPassCheck",value:function(t,e){if("required"===e.identifier){if(void 0===t.value||null===t.value||0===t.value.length)return t.errors.push({identifier:e.identifier,invalid:!0,name:t.name});t.errors.forEach((function(r,n){r.identifier===e.identifier&&!0===r.invalid&&t.errors.splice(n,1)}))}if("email"===e.identifier&&t.value.length>0){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(t.value))return t.errors.push({identifier:e.identifier,invalid:!0,name:t.name});t.errors.forEach((function(r,n){!0===r[e.identifier]&&t.errors.splice(n,1)}))}return t}}],r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},8094:(t,e,r)=>{"use strict";r.d(e,{__:()=>n,c:()=>i});var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NexoPOS";return nsLanguage.getEntries(e)&&nsLanguage.getEntries(e)[t]||t},i=function(t,e){return nsLanguage.getEntries(e)&&nsLanguage.getEntries(e)[t]||t}},2867:(t,e,r)=>{"use strict";function n(){var t=this;Object.keys(this).includes("$popup")&&(this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&(t.$popupParams&&void 0!==t.$popupParams.reject&&t.$popupParams.reject(!1),t.$popup.close()),"press-esc"===e.event&&(t.$popupParams&&void 0!==t.$popupParams.reject&&t.$popupParams.reject(!1),t.$popup.close())})),nsHotPress.create("popup-esc").whenPressed("escape",(function(e){e.preventDefault();var r=parseInt(t.$el.parentElement.getAttribute("data-index"));null===document.querySelector('.is-popup [data-index="'.concat(r+1,"]"))&&(t.$popupParams&&void 0!==t.$popupParams.reject&&t.$popupParams.reject(!1),t.$popup.close(),nsHotPress.destroy("popup-esc"))})))}r.d(e,{Z:()=>n})},3216:(t,e,r)=>{"use strict";function n(t){void 0!==this.$popupParams.resolve&&this.$popupParams.reject&&(!1!==t?this.$popupParams.resolve(t):this.$popupParams.reject(t)),this.$popup.close()}r.d(e,{Z:()=>n})},1419:(t,e,r)=>{"use strict";r.d(e,{G:()=>l});var n=r(9248);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(){s=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,s=Object.create(i.prototype),a=new $(n||[]);return o(s,"_invoke",{value:O(t,r,a)}),s}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",v="suspendedYield",m="executing",_="completed",y={};function b(){}function g(){}function x(){}var w={};d(w,l,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(F([])));k&&k!==r&&n.call(k,l)&&(w=k);var P=x.prototype=b.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(s,o,a,l){var c=p(t[s],t,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,l)}),(function(t){r("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,l)}))}l(c.arg)}var s;o(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function O(e,r,n){var i=h;return function(s,o){if(i===m)throw new Error("Generator is already running");if(i===_){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=p(e,r,n);if("normal"===c.type){if(i=n.done?_:v,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var s=p(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,y;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function r(){for(;++s<e.length;)if(n.call(e,s))return r.value=e[s],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return g.prototype=x,o(P,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:g,configurable:!0}),g.displayName=d(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,u,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},j(S.prototype),d(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new S(f(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(P),d(P,u,"Generator"),d(P,l,(function(){return this})),d(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(s=n.key,o=void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(s,"string"),"symbol"===i(o)?o:String(o)),n)}var s,o}var a=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))},l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config={primarySelector:void 0,popupClass:"shadow-lg h-half w-1/2 bg-white"},this.container=document.createElement("div"),this.popupBody=document.createElement("div"),this.popupSelector="",this.config=Object.assign(this.config,e),void 0===this.config.primarySelector&&document.querySelectorAll(".is-popup").length>0){var r=document.querySelectorAll(".is-popup").length;this.parentWrapper=document.querySelectorAll(".is-popup")[r-1]}else this.parentWrapper=document.querySelector("body").querySelectorAll("div")[0];this.event=new n.x}var e,r,i;return e=t,r=[{key:"hash",value:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<10;r++)t+=e.charAt(Math.floor(62*Math.random()));return t}},{key:"open",value:function(t){var e,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,void 0,void 0,s().mark((function o(){var a,l,c,u=this;return s().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("function"!=typeof t){s.next=9;break}return s.prev=1,s.next=4,t();case 4:t=s.sent.default,s.next=9;break;case 7:s.prev=7,s.t0=s.catch(1);case 9:a=document.querySelector("body").querySelectorAll("div")[0],this.parentWrapper.style.filter="blur(4px)",a.style.filter="blur(6px)",this.container.setAttribute("class","absolute top-0 left-0 w-full h-full flex items-center justify-center is-popup"),this.container.addEventListener("click",(function(t){u.event.next({event:"click-overlay",value:!0}),t.stopPropagation()})),this.popupBody.addEventListener("click",(function(t){t.stopImmediatePropagation()})),l=document.querySelectorAll(".is-popup").length,this.container.id="popup-container-"+this.hash(),this.popupSelector="#".concat(this.container.id),this.popupBody.setAttribute("class","zoom-out-entrance popup-body"),this.popupBody.setAttribute("data-index",l),this.popupBody.innerHTML='<div class="vue-component"></div>',this.container.appendChild(this.popupBody),document.body.appendChild(this.container),c=Vue.extend(t),this.instance=new c({propsData:{popup:this}}),this.instance.template=(null===(e=null==t?void 0:t.options)||void 0===e?void 0:e.template)||void 0,this.instance.render=t.render||void 0,this.instance.methods=(null===(r=null==t?void 0:t.options)||void 0===r?void 0:r.methods)||(null==t?void 0:t.methods),this.instance.data=(null===(n=null==t?void 0:t.options)||void 0===n?void 0:n.data)||(null==t?void 0:t.data),this.instance.$popup=this,this.instance.$popupParams=i,this.instance.$mount("#".concat(this.container.id," .vue-component"));case 32:case"end":return s.stop()}}),o,this,[[1,7]])})))}},{key:"close",value:function(){var t=this;this.instance.$destroy(),this.event.unsubscribe(),this.parentWrapper.style.filter="blur(0px)";var e=document.querySelector("body").querySelectorAll("div")[0];document.querySelectorAll(".is-popup").length<=1&&(e.style.filter="blur(0px)");var r="".concat(this.popupSelector," .popup-body");this.popupBody=document.querySelector(r),this.popupBody.classList.remove("zoom-out-entrance"),this.popupBody.classList.add("zoom-in-exit"),this.container=document.querySelector("".concat(this.popupSelector)),this.container.classList.remove("is-popup"),setTimeout((function(){t.container.remove()}),300)}}],i=[{key:"show",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new t(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return n.open(e,r),n}}],r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},5494:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(s=i.key,o=void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(s,"string"),"symbol"===n(o)?o:String(o)),i)}var s,o}r.d(e,{Z:()=>s});var s=function(){function t(e){var r=e.urls,n=e.options;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.printingURL={refund:"refund_printing_url",sale:"sale_printing_url",payment:"payment_printing_url"},this.urls=r,this.options=n}var e,r,n;return e=t,r=[{key:"processRegularPrinting",value:function(t,e){var r=document.querySelector("#printing-section");r&&r.remove();var n=this.urls[this.printingURL[e]].replace("{reference_id}",t),i=document.createElement("iframe");i.id="printing-section",i.className="hidden",i.src=n,document.body.appendChild(i),setTimeout((function(){document.querySelector("#printing-section").remove()}),5e3)}},{key:"process",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"aloud";"default"===this.options.ns_pos_printing_gateway?this.processRegularPrinting(t,e):this.processCustomPrinting(t,this.options.ns_pos_printing_gateway,e,r)}},{key:"processCustomPrinting",value:function(t,e,r){var n={printed:!1,reference_id:t,gateway:e,document:r,mode:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"aloud"};nsHooks.applyFilters("ns-custom-print",{params:n,promise:function(){return new Promise((function(t,e){e({status:"failed",message:__("The selected print gateway doesn't support this type of printing.","NsPrintAdapter")})}))}}).promise().then((function(t){nsSnackBar.success(t.message).subscribe()})).catch((function(t){nsSnackBar.error(t.message||__("An error unexpected occured while printing.")).subscribe()}))}}],r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},2357:(t,e,r)=>{"use strict";r.d(e,{S:()=>o});var n=r(3260);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(s=n.key,o=void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(s,"string"),"symbol"===i(o)?o:String(o)),n)}var s,o}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===window.snackbarQueue&&(window.snackbarQueue=[],this.queue=window.snackbarQueue)}var e,r,i;return e=t,r=[{key:"show",value:function(t,e){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return n.Observable.create((function(n){var s=r.__createSnack({message:t,label:e,type:i.type}),o=s.buttonNode,a=(s.textNode,s.snackWrapper,s.sampleSnack);o.addEventListener("click",(function(t){n.onNext(o),n.onCompleted(),a.remove()})),r.__startTimer(i.duration,a)}))}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"error"};return this.show(t,e,Object.assign(Object.assign({},r),{type:"error"}))}},{key:"success",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"success"};return this.show(t,e,Object.assign(Object.assign({},r),{type:"success"}))}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return this.show(t,e,Object.assign(Object.assign({},r),{type:"info"}))}},{key:"__startTimer",value:function(t,e){var r,n=function(){t>0&&!1!==t&&(r=setTimeout((function(){e.remove()}),t))};e.addEventListener("mouseenter",(function(){clearTimeout(r)})),e.addEventListener("mouseleave",(function(){n()})),n()}},{key:"__createSnack",value:function(t){var e=t.message,r=t.label,n=t.type,i=void 0===n?"info":n,s=document.getElementById("snack-wrapper")||document.createElement("div"),o=document.createElement("div"),a=document.createElement("p"),l=document.createElement("div"),c=document.createElement("button"),u="",d="";switch(i){case"info":u="",d="info";break;case"error":u="",d="error";break;case"success":u="",d="success"}return a.textContent=e,a.setAttribute("class","pr-2"),r&&(l.setAttribute("class","ns-button default"),c.textContent=r,c.setAttribute("class","px-3 py-2 shadow rounded uppercase ".concat(u)),l.appendChild(c)),o.appendChild(a),o.appendChild(l),o.setAttribute("class","md:rounded py-2 px-3 md:w-2/5 w-full z-10 md:my-2 shadow-lg flex justify-between items-center zoom-in-entrance anim-duration-300 ns-notice ".concat(d)),s.appendChild(o),null===document.getElementById("snack-wrapper")&&(s.setAttribute("id","snack-wrapper"),s.setAttribute("class","absolute bottom-0 w-full flex justify-between items-center flex-col"),document.body.appendChild(s)),{snackWrapper:s,sampleSnack:o,buttonsWrapper:l,buttonNode:c,textNode:a}}}],r&&s(e.prototype,r),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},6891:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(2985);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(s=n.key,o=void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(s,"string"),"symbol"===i(o)?o:String(o)),n)}var s,o}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"compute",value:function(e,r,n){switch(e){case"inclusive":return t.computeInclusive(r,n);case"exclusive":return t.computeExclusive(r,n)}}},{key:"computeInclusive",value:function(t,e){return n.tS(n.tS(t).divide(n.tS(e).add(100).done()).done()).multiply(100).done()}},{key:"computeExclusive",value:function(t,e){return n.tS(t).divide(100).multiply(n.tS(e).add(100).done()).done()}},{key:"getTaxValue",value:function(e,r,n){switch(e){case"inclusive":return r-t.compute(e,r,n);case"exclusive":return t.compute(e,r,n)-r}return 0}}],(r=null)&&s(e.prototype,r),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},257:(t,e,r)=>{"use strict";r.d(e,{$:()=>c});var n=r(1487),i=r(8094),s=r(1419),o=r(3287);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===a(s)?s:String(s)),n)}var i,s}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.product=e}var e,r,a;return e=t,(r=[{key:"run",value:function(t){var e=this;return new Promise((function(r,a){var l=new s.G({popupClass:"shadow-lg h-1/2-screen w-3/4 md:w-1/2 lg:w-2/5 xl:w-1/4 bg-white"}),c=e.product;if(!1===POS.options.getValue().ns_pos_show_quantity&&POS.processingAddQueue){if("enabled"===c.$original().stock_management&&"materialized"===c.$original().type){var u=POS.getStockUsage(c.$original().id,t.unit_quantity_id)-(c.quantity||0);if(1>parseFloat(t.$quantities().quantity)-u)return n.kX.error((0,i.__)("Unable to add the product, there is not enough stock. Remaining %s").replace("%s",(t.$quantities().quantity-u).toString())).subscribe()}r({quantity:1})}else l.open(o.Z,{resolve:r,reject:a,product:c,data:t})}))}}])&&l(e.prototype,r),a&&l(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()},8168:(t,e,r)=>{"use strict";var n=r(257),i=r(1419),s=r(1487),o=r(8094);const a={data:function(){return{unitsQuantities:[],loadsUnits:!1,options:null,optionsSubscriber:null}},beforeDestroy:function(){this.optionsSubscriber.unsubscribe()},mounted:function(){var t=this;this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&(t.$popupParams.reject(!1),t.$popup.close())})),this.optionsSubscriber=POS.options.subscribe((function(e){t.options=e})),void 0!==this.$popupParams.product.$original().selectedUnitQuantity?this.selectUnit(this.$popupParams.product.$original().selectedUnitQuantity):void 0!==this.$popupParams.product.$original().unit_quantities&&1===this.$popupParams.product.$original().unit_quantities.length?this.selectUnit(this.$popupParams.product.$original().unit_quantities[0]):(this.loadsUnits=!0,this.loadUnits())},methods:{__:o.__,displayRightPrice:function(t){return POS.getSalePrice(t,this.$popupParams.product.$original())},loadUnits:function(){var t=this;s.ih.get("/api/nexopos/v4/products/".concat(this.$popupParams.product.$original().id,"/units/quantities")).subscribe((function(e){if(0===e.length)return t.$popup.close(),s.kX.error((0,o.__)("This product doesn't have any unit defined for selling.")).subscribe();t.unitsQuantities=e,1===t.unitsQuantities.length&&t.selectUnit(t.unitsQuantities[0])}))},selectUnit:function(t){if(null===t.unit)return s.kX.error((0,o.__)('The unit attached to this product is missing or not assigned. Please review the "Unit" tab for this product.')).subscribe(),this.$popup.close();this.$popupParams.resolve({unit_quantity_id:t.id,unit_name:t.unit.name,$quantities:function(){return t}}),this.$popup.close()}}};const l=(0,r(1900).Z)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-full w-full flex items-center justify-center",attrs:{id:"ns-units-selector"}},[t.unitsQuantities.length>0?e("div",{staticClass:"ns-box w-2/3-screen lg:w-1/3-screen overflow-hidden flex flex-col"},[e("div",{staticClass:"h-16 flex justify-center items-center flex-shrink-0",attrs:{id:"header"}},[e("h3",{staticClass:"font-bold text-primary"},[t._v(t._s(t.__("Choose Selling Unit")))])]),t._v(" "),t.unitsQuantities.length>0?e("div",{staticClass:"grid grid-flow-row grid-cols-2 overflow-y-auto"},t._l(t.unitsQuantities,(function(r){return e("div",{key:r.id,staticClass:"ns-numpad-key info cursor-pointer border flex-shrink-0 flex flex-col items-center justify-center",on:{click:function(e){return t.selectUnit(r)}}},[e("div",{staticClass:"h-40 w-full flex items-center justify-center overflow-hidden"},[r.preview_url?e("img",{staticClass:"object-cover h-full",attrs:{src:r.preview_url,alt:r.unit.name}}):t._e(),t._v(" "),r.preview_url?t._e():e("div",{staticClass:"h-40 flex items-center justify-center"},[e("i",{staticClass:"las la-image text-primary text-6xl"})])]),t._v(" "),e("div",{staticClass:"h-0 w-full"},[e("div",{staticClass:"relative w-full flex items-center justify-center -top-10 h-20 py-2 flex-col overlay"},[e("h3",{staticClass:"font-bold text-primary py-2 text-center"},[t._v(t._s(r.unit.name)+" ("+t._s(r.quantity)+")")]),t._v(" "),e("p",{staticClass:"text-sm font-medium text-primary"},[t._v(t._s(t._f("currency")(t.displayRightPrice(r))))])])])])})),0):t._e()]):t._e(),t._v(" "),0===t.unitsQuantities.length?e("div",{staticClass:"h-56 flex items-center justify-center"},[e("ns-spinner")],1):t._e()])}),[],!1,null,null,null).exports;function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===c(s)?s:String(s)),n)}var i,s}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.product=e}var e,r,n;return e=t,(r=[{key:"run",value:function(){var t=this;return new Promise((function(e,r){var n=new i.G({popupClass:"shadow-lg h-1/2-screen w-3/4 xl:w-1/4 bg-white"}),s=t.product;n.open(l,{resolve:e,reject:r,product:s})}))}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),f=r(6515),p=r(538);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==h(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===h(s)?s:String(s)),n)}var i,s}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.detect()}var e,r,n;return e=t,(r=[{key:"detect",value:function(){window.innerWidth<544?this.screenIs="xs":window.innerWidth>=544&&window.innerWidth<768?this.screenIs="sm":window.innerWidth>=768&&window.innerWidth<992?this.screenIs="md":window.innerWidth>=992&&window.innerWidth<1200?this.screenIs="lg":window.innerWidth>=1200&&(this.screenIs="xl")}},{key:"is",value:function(t){return void 0===t?this.screenIs:this.screenIs===t}}])&&v(e.prototype,r),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_=r(3515),y=r(381),b=r.n(y),g=r(5494),x=r(6891),w=r(2985);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function k(){k=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var s=e&&e.prototype instanceof _?e:_,o=Object.create(s.prototype),a=new $(n||[]);return i(o,"_invoke",{value:O(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function _(){}function y(){}function b(){}var g={};c(g,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(F([])));w&&w!==r&&n.call(w,o)&&(g=w);var P=b.prototype=_.prototype=Object.create(g);function j(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,s,o,a){var l=d(t[i],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==C(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function O(e,r,n){var i=f;return function(s,o){if(i===h)throw new Error("Generator is already running");if(i===v){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?v:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=v,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=d(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(C(e)+" is not iterable")}return y.prototype=b,i(P,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},j(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new S(u(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(P),c(P,l,"Generator"),c(P,o,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==C(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===C(s)?s:String(s)),n)}var i,s}var j=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))},S=window.nsPosDashboardButton=r(6662).Z,O=window.nsPosPendingOrderButton=r(746).Z,E=window.nsPosOrderTypeButton=r(5250).Z,T=window.nsPosCustomersButton=r(5927).Z,L=window.nsPosResetButton=r(9323).Z,$=window.nsPosCashRegister=r(2881).Z,F=window.nsAlertPopup=r(9326).default,D=window.nsConfirmPopup=r(2381).default,A=(window.nsPOSLoadingPopup=r(4140).default,window.nsPromptPopup=r(8093).default),V=window.nsLayawayPopup=r(4207).Z,N=window.nsPosShippingPopup=r(4054).Z,q=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._orderTypeProcessQueue=[],this._holdPopupEnabled=!0,this._initialQueue=[],this._responsive=new m,this._isSubmitting=!1,this._processingAddQueue=!1,this.defaultOrder=function(){return{discount_type:null,title:"",discount:0,register_id:e.get("register")?e.get("register").id:void 0,discount_percentage:0,subtotal:0,total:0,coupons:[],total_coupons:0,tendered:0,note:"",note_visibility:"hidden",tax_group_id:void 0,tax_type:void 0,taxes:[],tax_groups:[],payment_status:void 0,customer_id:void 0,change:0,total_products:0,shipping:0,tax_value:0,products_exclusive_tax_value:0,products_inclusive_tax_value:0,total_tax_value:0,shipping_rate:0,shipping_type:void 0,customer:void 0,type:void 0,products:[],instalments:[],payments:[],addresses:{shipping:void 0,billing:void 0}}},this.addToCartQueue=[d,n.$],this.initialize(),this.print=new g.Z({urls:systemUrls,options:systemOptions})}var e,r,a;return e=t,r=[{key:"screen",get:function(){return this._screen}},{key:"visibleSection",get:function(){return this._visibleSection}},{key:"paymentsType",get:function(){return this._paymentsType}},{key:"selectedPaymentType",get:function(){return this._selectedPaymentType}},{key:"order",get:function(){return this._order}},{key:"types",get:function(){return this._types}},{key:"products",get:function(){return this._products}},{key:"customers",get:function(){return this._customers}},{key:"options",get:function(){return this._options}},{key:"orderTypeQueue",get:function(){return this._orderTypeProcessQueue}},{key:"settings",get:function(){return this._settings}},{key:"breadcrumbs",get:function(){return this._breadcrumbs}},{key:"initialQueue",get:function(){return this._initialQueue}},{key:"responsive",get:function(){return this._responsive}},{key:"processingAddQueue",get:function(){return this._processingAddQueue}},{key:"reset",value:function(){return j(this,void 0,void 0,k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._isSubmitting=!1,this.order.next(this.defaultOrder()),this.products.next([]),this._customers.next([]),this._breadcrumbs.next([]),this.defineCurrentScreen(),this.setHoldPopupEnabled(!0),t.next=9,this.processInitialQueue();case 9:s.kq.doAction("ns-after-cart-changed");case 10:case"end":return t.stop()}}),t,this)})))}},{key:"initialize",value:function(){var t=this;this._products=new f.X([]),this._customers=new f.X([]),this._types=new f.X([]),this._breadcrumbs=new f.X([]),this._screen=new f.X(""),this._paymentsType=new f.X([]),this._visibleSection=new f.X("both"),this._options=new f.X({}),this._settings=new f.X({}),this._order=new f.X(this.defaultOrder()),this._selectedPaymentType=new f.X(null),this._orderTypeProcessQueue=[{identifier:"handle.delivery-order",promise:function(t){return new Promise((function(e,r){return t&&"delivery"===t.identifier?i.G.show(N,{resolve:e,reject:r}):e({status:"success",message:"Proceed"})}))}}],this.initialQueue.push((function(){return new Promise((function(e,r){var n=t.options.getValue(),i=t.order.getValue();return i.tax_type=n.ns_pos_tax_type,!1!==n.ns_pos_tax_group&&(i.tax_group_id=n.ns_pos_tax_group,t.order.next(i)),e({status:"success",message:"tax group assignated"})}))})),this.initialQueue.push((function(){return new Promise((function(e,r){var n=t.options.getValue();return t.order.getValue(),!1!==n.ns_customers_default&&s.ih.get("/api/nexopos/v4/customers/".concat(n.ns_customers_default)).subscribe({next:function(r){t.selectCustomer(r),e({status:"success",message:(0,o.__)("The customer has been loaded")})},error:function(t){s.kX.error((0,o.__)("Unable to select the default customer. Looks like the customer no longer exists. Consider changing the default customer on the settings."),(0,o.__)("OKAY"),{duration:0}).subscribe(),r(t)}}),e({status:"success",message:"tax group assignated"})}))})),window.addEventListener("resize",(function(){t._responsive.detect(),t.defineCurrentScreen()})),window.onbeforeunload=function(){if(t.products.getValue().length>0)return(0,o.__)("Some products has been added to the cart. Would youl ike to discard this order ?")},s.kq.addAction("ns-after-cart-changed","listen-add-to-cart",(function(){return t.refreshCart()})),this.types.subscribe((function(e){var r=Object.values(e).filter((function(t){return t.selected}));if(r.length>0){var n=t.order.getValue();n.type=r[0],t.order.next(n)}})),window.addEventListener("resize",(function(){t._responsive.detect(),t.defineCurrentScreen()})),window.onbeforeunload=function(){if(t.products.getValue().length>0)return(0,o.__)("Some products has been added to the cart. Would youl ike to discard this order ?")}}},{key:"getSalePrice",value:function(t,e){return"yes"===this.options.getValue().ns_pos_price_with_tax?(0,_.f)(t.sale_price_with_tax):(0,_.f)(t.sale_price_without_tax)}},{key:"getCustomPrice",value:function(t,e){return"yes"===this.options.getValue().ns_pos_price_with_tax?(0,_.f)(t.custom_price_with_tax):(0,_.f)(t.custom_price_without_tax)}},{key:"getWholesalePrice",value:function(t,e){return"yes"===this.options.getValue().ns_pos_price_with_tax?(0,_.f)(t.wholesale_price_with_tax):(0,_.f)(t.wholesale_price_without_tax)}},{key:"setHoldPopupEnabled",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._holdPopupEnabled=t}},{key:"getHoldPopupEnabled",value:function(){return this._holdPopupEnabled}},{key:"processInitialQueue",value:function(){return j(this,void 0,void 0,k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=k().keys(this._initialQueue);case 1:if((t.t1=t.t0()).done){t.next=14;break}return e=t.t1.value,t.prev=3,t.next=6,this._initialQueue[e]();case 6:t.sent,t.next=12;break;case 9:t.prev=9,t.t2=t.catch(3),s.kX.error(t.t2.message).subscribe();case 12:t.next=1;break;case 14:case"end":return t.stop()}}),t,this,[[3,9]])})))}},{key:"removeCoupon",value:function(t){var e=this.order.getValue(),r=e.coupons,n=r.indexOf(t);r.splice(n,1),e.coupons=r,this.order.next(e)}},{key:"pushCoupon",value:function(t){var e=this.order.getValue();e.coupons.forEach((function(e){if(e.code===t.code){var r=(0,o.__)("This coupon is already added to the cart");throw s.kX.error(r).subscribe(),r}})),e.coupons.push(t),this.order.next(e),this.refreshCart()}},{key:"header",get:function(){var t={buttons:{nsPosDashboardButton:S,nsPosPendingOrderButton:O,nsPosOrderTypeButton:E,nsPosCustomersButton:T,nsPosResetButton:L}};return"yes"===this.options.getValue().ns_pos_registers_enabled&&(t.buttons.nsPosCashRegister=$),s.kq.doAction("ns-pos-header",t),t}},{key:"defineOptions",value:function(t){this._options.next(t)}},{key:"defineCurrentScreen",value:function(){this._visibleSection.next(["xs","sm"].includes(this._responsive.is())?"grid":"both"),this._screen.next(this._responsive.is())}},{key:"changeVisibleSection",value:function(t){["both","cart","grid"].includes(t)&&(["cart","both"].includes(t)&&this.refreshCart(),this._visibleSection.next(t))}},{key:"addPayment",value:function(t){if(t.value>0){var e=this._order.getValue();return e.payments.push(t),this._order.next(e),this.computePaid()}return s.kX.error("Invalid amount.").subscribe()}},{key:"removePayment",value:function(t){if(void 0!==t.id)return s.kX.error((0,o.__)("Unable to delete a payment attached to the order.")).subscribe();var e=this._order.getValue(),r=e.payments.indexOf(t);e.payments.splice(r,1),this._order.next(e),s.l.emit({identifier:"ns.pos.remove-payment",value:t}),this.updateCustomerAccount(t),this.computePaid()}},{key:"updateCustomerAccount",value:function(t){if("account-payment"===t.identifier){var e=this.order.getValue().customer;e.account_amount+=t.value,this.selectCustomer(e)}}},{key:"getPriceWithoutTax",value:function(t,e,r){return"inclusive"===r?x.Z.computeInclusive(t,e):"exclusive"===r?t:void 0}},{key:"getPriceWithTax",value:function(t,e,r){return"inclusive"===r?t:"exclusive"===r?x.Z.computeExclusive(t,e):void 0}},{key:"getVatValue",value:function(t,e,r){return"inclusive"===r?t-this.getPriceWithoutTax(t,e,r):"exclusive"===r?this.getPriceWithTax(t,e,r)-t:0}},{key:"computeTaxes",value:function(){var t=this;return new Promise((function(e,r){var n=t.order.getValue();if(void 0===(n=t.computeProductsTaxes(n)).tax_group_id||null===n.tax_group_id)return t.computeOrderTaxes(n),e({data:{order:n},status:"success"});var i=n.tax_groups;return Object.values(i).length>0?(void 0!==i[n.tax_group_id]&&(n=t.computeOrderTaxGroup(n,i[n.tax_group_id])),e({status:"success",data:{tax:i[n.tax_group_id],order:n}})):void 0!==n.tax_group_id&&n.tax_group_id.toString().length>0?void s.ih.get("/api/nexopos/v4/taxes/groups/".concat(n.tax_group_id)).subscribe({next:function(r){return n=t.computeOrderTaxGroup(n,r),e({status:"success",data:{tax:r,order:n}})},error:function(t){return r(t)}}):r({status:"failed",message:(0,o.__)("No tax group assigned to the order")})}))}},{key:"computeOrderTaxGroup",value:function(t,e){this.options.getValue().ns_pos_vat,this.options.getValue().ns_pos_price_with_tax;var r=e.taxes.map((function(t){return parseFloat(t.rate)})).reduce((function(t,e){return t+e})),n=this.getVatValue(t.subtotal-t.discount,r,t.tax_type);return e.taxes=e.taxes.map((function(t){var e=w.tS(w.tS(t.rate).divide(r).done()).multiply(100).done();return{tax_id:t.id,tax_name:t.name,rate:parseFloat(t.rate),tax_value:w.tS(w.tS(n).multiply(e).done()).divide(100).done()}})),0===e.taxes.length?s.kX.error((0,o.__)("The selected tax group doesn't have any assigned sub taxes. This might cause wrong figures."),(0,o.__)("Proceed"),{duration:!1}).subscribe():(t.tax_groups=t.tax_groups||[],t.taxes=e.taxes,t.tax_groups[e.id]=e,this.computeOrderTaxes(t))}},{key:"computeOrderTaxes",value:function(t){var e=this.options.getValue().ns_pos_vat,r="yes"===this.options.getValue().ns_pos_price_with_tax;return["flat_vat","variable_vat","products_variable_vat","products_flat_vat"].includes(e)&&t.taxes&&t.taxes.length>0&&(t.tax_value+=t.taxes.map((function(t){return t.tax_value})).reduce((function(t,e){return t+e}))),t.total_tax_value=t.tax_value,["products_variable_vat","products_flat_vat","products_vat"].includes(e)&&!r&&(t.total_tax_value=t.products_exclusive_tax_value+t.tax_value),t}},{key:"computeProductsTaxes",value:function(t){var e=this.products.getValue(),r=e.filter((function(t){return"inclusive"===t.tax_type})).map((function(t){return t.tax_value})),n=e.filter((function(t){return"exclusive"===t.tax_type})).map((function(t){return t.tax_value}));t.products_exclusive_tax_value=0,t.products_inclusive_tax_value=0;var i=this.options.getValue().ns_pos_vat;return["products_flat_vat","products_variable_vat","products_vat"].includes(i)&&n.length>0&&(t.products_exclusive_tax_value+=n.reduce((function(t,e){return t+e}))),["products_flat_vat","products_variable_vat","products_vat"].includes(i)&&r.length>0&&(t.products_inclusive_tax_value+=r.reduce((function(t,e){return t+e}))),t.products=e,t.total_products=e.length,t}},{key:"canProceedAsLaidAway",value:function(t){var e=this;return new Promise((function(r,n){return j(e,void 0,void 0,k().mark((function e(){var s,a,l,c,u,d,f,h=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.customer.group.minimal_credit_payment,a=(t.total*s/100).toFixed(ns.currency.ns_currency_precision),a=parseFloat(a),e.prev=3,e.next=6,new Promise((function(e,r){i.G.show(V,{order:t,reject:r,resolve:e})}));case 6:if(!(0===(l=e.sent).order.instalments.length&&l.order.tendered<a)){e.next=13;break}return c=(0,o.__)("Before saving this order, a minimum payment of {amount} is required").replace("{amount}",p.default.filter("currency")(a)),i.G.show(F,{title:(0,o.__)("Unable to proceed"),message:c}),e.abrupt("return",n({status:"failed",message:c}));case 13:if(u=this.selectedPaymentType.getValue(),0!==(d=l.order.instalments.filter((function(t){return t.amount>=a&&b()(t.date).isSame(ns.date.moment.startOf("day"),"day")}))).length){e.next=17;break}return e.abrupt("return",r({status:"success",message:(0,o.__)("Layaway defined"),data:{order:l.order}}));case 17:(f=d[0].amount)>0?i.G.show(D,{title:(0,o.__)("Initial Payment"),message:(0,o.__)('In order to proceed, an initial payment of {amount} is required for the selected payment type "{paymentType}". Would you like to proceed ?').replace("{amount}",p.default.filter("currency")(f)).replace("{paymentType}",u.label),onAction:function(t){if(t){var e={identifier:u.identifier,label:u.label,value:f,readonly:!1,selected:!0};h.addPayment(e),d[0].paid=!0,r({status:"success",message:(0,o.__)("Layaway defined"),data:{order:l.order}})}else n({status:"failed",message:(0,o.__)("The request was canceled")})}}):r({status:"success",message:(0,o.__)("Layaway defined"),data:{order:l.order}});case 19:e.next=24;break;case 21:return e.prev=21,e.t0=e.catch(3),e.abrupt("return",n(e.t0));case 24:case"end":return e.stop()}}),e,this,[[3,21]])})))}))}},{key:"submitOrder",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(r,n){return j(t,void 0,void 0,k().mark((function t(){var i,a,l,c,u,d=this;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object.assign(Object.assign({},this.order.getValue()),e),a=i.customer.group.minimal_credit_payment,"hold"===i.payment_status){t.next=20;break}if(!(0===i.payments.length&&i.total>0&&i.total>i.tendered)){t.next=20;break}if("no"!==this.options.getValue().ns_orders_allow_partial){t.next=9;break}return l=(0,o.__)("Partially paid orders are disabled."),t.abrupt("return",n({status:"failed",message:l}));case 9:if(!(a>=0)){t.next=20;break}return t.prev=10,t.next=13,this.canProceedAsLaidAway(i);case 13:c=t.sent,i=c.data.order,t.next=20;break;case 17:return t.prev=17,t.t0=t.catch(10),t.abrupt("return",n(t.t0));case 20:if(this._isSubmitting){t.next=24;break}return u=void 0!==i.id?"put":"post",this._isSubmitting=!0,t.abrupt("return",s.ih[u]("/api/nexopos/v4/orders".concat(void 0!==i.id?"/"+i.id:""),i).subscribe({next:function(t){r(t),d.reset(),s.kq.doAction("ns-order-submit-successful",t),d._isSubmitting=!1;var e=d.options.getValue().ns_pos_complete_sale_audio;e.length>0&&new Audio(e).play()},error:function(t){d._isSubmitting=!1,n(t),s.kq.doAction("ns-order-submit-failed",t)}}));case 24:return t.abrupt("return",n({status:"failed",message:(0,o.__)("An order is currently being processed.")}));case 25:case"end":return t.stop()}}),t,this,[[10,17]])})))}))}},{key:"defineQuantities",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(n,i){var a={unit:r.filter((function(e){return e.id===t.unit_id}))[0]||{},sale_price_with_tax:"normal"===t.mode?parseFloat(t.price_with_tax):0,sale_price_without_tax:"normal"===t.mode?parseFloat(t.price_without_tax):0,sale_price:"normal"===t.mode?parseFloat(t.unit_price):0,sale_price_tax:"normal"===t.mode?t.tax_value:0,sale_price_edit:0,wholesale_price_with_tax:"wholesale"===t.mode?parseFloat(t.price_with_tax):0,wholesale_price_without_tax:"wholesale"===t.mode?parseFloat(t.price_without_tax):0,wholesale_price:"wholesale"===t.mode?parseFloat(t.unit_price):0,wholesale_price_tax:"wholesale"===t.mode?t.tax_value:0,wholesale_price_edit:0,custom_price_with_tax:"custom"===t.mode?parseFloat(t.price_with_tax):0,custom_price_without_tax:"custom"===t.mode?parseFloat(t.price_without_tax):0,custom_price:"custom"===t.mode?parseFloat(t.unit_price):0,custom_price_tax:"custom"===t.mode?t.tax_value:0,custom_price_edit:"custom"===t.mode?parseFloat(t.unit_price):0};if(["inclusive","exclusive"].includes(t.tax_type))try{if(!t.tax_group_id)return a.sale_price_tax=0,a.wholesale_price_tax=0,a.sale_price_without_tax=t.unit_price,n(a);s.ih.get("/api/nexopos/v4/taxes/groups/".concat(t.tax_group_id)).subscribe({next:function(r){return["sale","wholesale","custom"].forEach((function(n){a[n+"_price_tax"]=r.taxes.map((function(r){return e.getVatValue(a[n+"_price"],r.rate,t.tax_type)})).reduce((function(t,e){return t+e})),a["gross_"+n+"_price"]=a[n+"_price"]+a[n+"_price_tax"],a["net_"+n+"_price"]=a[n+"_price"]-a[n+"_price_tax"]})),n(a)},error:function(t){i(!1)}})}catch(t){return s.kX.error((0,o.__)("An error has occurred while computing the product.")).subscribe()}return n(a)}))}},{key:"loadOrder",value:function(t){var e=this;return new Promise((function(r,n){s.ih.get("/api/nexopos/v4/orders/".concat(t,"/pos")).subscribe({next:function(t){return j(e,void 0,void 0,k().mark((function e(){var i,o,a,l=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,s.kq.doAction("ns-before-load-order",{order:t}),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",n(e.t0));case 7:this.options.getValue(),t=Object.assign(Object.assign({},this.defaultOrder()),t),i=[],o=k().mark((function e(){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.products[a]).product){e.next=9;break}return e.t0=r.name,e.t1=r.unit_id,e.next=6,l.defineQuantities(r);case 6:e.t2=e.sent,e.t3=[e.t2],r.product={mode:"custom",name:e.t0,unit_id:e.t1,unit_quantities:e.t3};case 9:r.$original=function(){return r.product},r.$quantities=function(){var t=r.product.unit_quantities.filter((function(t){return+t.id==+r.unit_quantity_id||void 0===t.id}))[0];return"custom"===r.mode&&(t.custom_price_edit=r.unit_price,t.custom_price_with_tax=r.price_with_tax,t.custom_price_without_tax=r.price_without_tax,t.custom_price_tax=r.tax_value),t},i.push(r);case 12:case"end":return e.stop()}}),e)})),a=0;case 12:if(!(a<t.products.length)){e.next=17;break}return e.delegateYield(o(),"t1",14);case 14:a++,e.next=12;break;case 17:return t.type=Object.values(this.types.getValue()).filter((function(e){return e.identifier===t.type}))[0],t.addresses={shipping:t.shipping_address,billing:t.billing_address},delete t.shipping_address,delete t.billing_address,this.buildOrder(t),this.buildProducts(i),e.next=25,this.selectCustomer(t.customer);case 25:r(t);case 26:case"end":return e.stop()}}),e,this,[[0,4]])})))},error:function(t){return n(t)}})}))}},{key:"buildOrder",value:function(t){this.order.next(t)}},{key:"buildProducts",value:function(t){this.recomputeProducts(t),this.products.next(t),s.kq.doAction("ns-after-cart-changed")}},{key:"printOrderReceipt",value:function(t,e){var r=this.options.getValue();if("disabled"===r.ns_pos_printing_enabled_for)return!1;if("all_orders"===r.ns_pos_printing_enabled_for)this.print.process(t.id,"sale",e);else if("partially_paid_orders"===r.ns_pos_printing_enabled_for&&["paid","partially_paid"].includes(t.payment_status))this.print.process(t.id,"sale",e);else{if("only_paid_orders"!==r.ns_pos_printing_enabled_for||!["paid"].includes(t.payment_status))return!1;this.print.process(t.id,"sale",e)}}},{key:"computePaid",value:function(){var t=this._order.getValue();t.tendered=0,t.payments.length>0&&(t.tendered=t.payments.map((function(t){return t.value})).reduce((function(t,e){return e+t}))),t.tendered>=t.total?t.payment_status="paid":t.tendered>0&&t.tendered<t.total&&(t.payment_status="partially_paid"),t.change=t.tendered-t.total,this._order.next(t)}},{key:"setPaymentActive",value:function(t){var e=this._paymentsType.getValue(),r=e.indexOf(t);e.forEach((function(t){return t.selected=!1})),e[r].selected=!0,this._paymentsType.next(e)}},{key:"definedPaymentsType",value:function(t){this._paymentsType.next(t)}},{key:"selectCustomer",value:function(t){var e=this;return new Promise((function(r,n){var i=e.order.getValue(),o=Object.assign(t.billing,{});if(delete o.id,i.customer=t,i.customer_id=t.id,i.addresses.billing=o,e.order.next(i),void 0!==t.group&&null!==t.group)return r(i);s.ih.get("/api/nexopos/v4/customers/".concat(t.id,"/group")).subscribe({next:function(t){i.customer.group=t,e.order.next(i),r(i)},error:function(t){n(t)}})}))}},{key:"updateCart",value:function(t,e){for(var r in e)void 0!==e[r]&&p.default.set(t,r,e[r]);this.order.next(t),this.refreshCart()}},{key:"checkCart",value:function(){var t=this,e=this.order.getValue(),r=[];e.coupons.forEach((function(t){t.products.length>0&&(e.products.filter((function(e){return t.products.map((function(t){return t.product_id})).includes(e.product_id)})).length>0||-1!==r.indexOf(t)||r.push(t)),t.categories.length>0&&(e.products.filter((function(e){return t.categories.map((function(t){return t.category_id})).includes(e.$original().category_id)})).length>0||-1!==r.indexOf(t)||r.push(t))})),r.forEach((function(e){s.kX.error((0,o.__)('The coupons "%s" has been removed from the cart, as it\'s required conditions are no more meet.').replace("%s",e.name),(0,o.__)("Okay"),{duration:6e3}).subscribe(),t.removeCoupon(e)}))}},{key:"refreshCart",value:function(){return j(this,void 0,void 0,k().mark((function t(){var e,r,n,i,a,l,c,u,d,f,p,h,v;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkCart(),e=this.products.getValue(),r=this.order.getValue(),n=this.options.getValue().ns_pos_price_with_tax,(i=e.filter((function(t){return"dynamic"!==t.product_type})).map((function(t){return"yes"===n?t.total_price_with_tax:t.total_price_without_tax}))).length>0?(a=i.reduce((function(t,e){return t+e})),l=0,(c=e.filter((function(t){return"dynamic"===t.product_type})).map((function(t){return t.unit_price=a*t.rate/100,t.total_price=t.unit_price*t.quantity,t.total_price}))).length>0&&(l=c.reduce((function(t,e){return t+e}))),r.subtotal=a+l):r.subtotal=0,u=r.coupons.map((function(t){return"percentage_discount"===t.type?(t.value=r.subtotal*t.discount_value/100,t.value):(t.value=t.discount_value,t.value)})),r.total_coupons=0,u.length>0&&(r.total_coupons=u.reduce((function(t,e){return t+e}))),"percentage"===r.discount_type&&(r.discount=r.discount_percentage*r.subtotal/100),r.discount>r.subtotal&&0===r.total_coupons&&(r.discount=r.subtotal,s.kX.info((0,o.__)("The discount has been set to the cart subtotal.")).subscribe()),r.tax_value=0,r.total_tax_value=0,this.order.next(r),t.prev=14,t.next=17,this.computeTaxes();case 17:d=t.sent,r=d.data.order,t.next=24;break;case 21:t.prev=21,t.t0=t.catch(14),!1!==t.t0&&void 0!==t.t0.message&&s.kX.error(t.t0.message||(0,o.__)("An unexpected error has occurred while fecthing taxes."),(0,o.__)("OKAY"),{duration:0}).subscribe();case 24:(f=e.map((function(t){return"inclusive"===t.tax_type?t.tax_value:0}))).length>0&&f.reduce((function(t,e){return t+e})),p=r.tax_type,h=this.options.getValue().ns_pos_vat,v=0,["flat_vat","variable_vat","products_vat","products_flat_vat","products_variable_vat"].includes(h)&&(v=r.total_tax_value),r.total="exclusive"===p?+(r.subtotal+(r.shipping||0)+v-r.discount-r.total_coupons).toFixed(ns.currency.ns_currency_precision):+(r.subtotal+(r.shipping||0)-r.discount-r.total_coupons).toFixed(ns.currency.ns_currency_precision),this.order.next(r),s.kq.doAction("ns-cart-after-refreshed",r);case 34:case"end":return t.stop()}}),t,this,[[14,21]])})))}},{key:"getStockUsage",value:function(t,e){var r=this._products.getValue().filter((function(r){return r.product_id===t&&r.unit_quantity_id===e})).map((function(t){return t.quantity}));return r.length>0?r.reduce((function(t,e){return t+e})):0}},{key:"addToCart",value:function(t){return j(this,void 0,void 0,k().mark((function e(){var r,n,i,o,a,l,c,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new Object,n={product_id:t.id||0,name:t.name,discount_type:"percentage",discount:0,discount_percentage:0,product_type:t.product_type||"product",rate:t.rate||0,quantity:t.quantity||0,tax_group_id:t.tax_group_id,tax_type:t.tax_type||void 0,tax_value:0,unit_id:t.unit_id||0,unit_price:t.unit_price||0,price_with_tax:t.price_with_tax||0,price_without_tax:t.price_without_tax||0,unit_name:t.unit_name||"",total_price:0,total_price_without_tax:0,total_price_with_tax:0,mode:t.mode||"normal",$original:t.$original||function(){return t},$quantities:t.$quantities||void 0},this._processingAddQueue=!0,0===n.product_id){e.next=22;break}e.t0=k().keys(this.addToCartQueue);case 5:if((e.t1=e.t0()).done){e.next=22;break}return i=e.t1.value,e.prev=7,o=new this.addToCartQueue[i](n),e.next=11,o.run(r);case 11:a=e.sent,r=Object.assign(Object.assign({},r),a),e.next=20;break;case 15:if(e.prev=15,e.t2=e.catch(7),!1!==e.t2){e.next=20;break}return this._processingAddQueue=!1,e.abrupt("return",!1);case 20:e.next=5;break;case 22:this._processingAddQueue=!1,n=Object.assign(Object.assign({},n),r),l=this._products.getValue(),this.settings.getValue().ns_pos_items_merge?(c=l.filter((function(t){return t.product_id===n.product_id&&t.tax_group_id===n.tax_group_id&&t.unit_id===n.unit_id&&t.unit_quantity_id===n.unit_quantity_id})),c.length>0?c[0].quantity+=n.quantity:l.unshift(n)):l.unshift(n),this.recomputeProducts(l),this.products.next(l),(u=this.options.getValue().ns_pos_new_item_audio).length>0&&new Audio(u).play(),s.kq.doAction("ns-after-cart-changed");case 31:case"end":return e.stop()}}),e,this,[[7,15]])})))}},{key:"defineTypes",value:function(t){this._types.next(t)}},{key:"removeProduct",value:function(t){var e=this._products.getValue(),r=e.indexOf(t);e.splice(r,1),this.products.next(e),s.kq.doAction("ns-after-cart-changed")}},{key:"updateProduct",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this._products.getValue();r=null===r?n.indexOf(t):r,p.default.set(n,r,Object.assign(Object.assign({},t),e)),this.recomputeProducts(n),this.products.next(n),s.kq.doAction("ns-after-cart-changed")}},{key:"recomputeProducts",value:function(){var t=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null).forEach((function(e){t.computeProduct(e)}))}},{key:"getProductUnitPrice",value:function(t,e){switch(t){case"custom":return e.custom_price_edit;case"normal":return e.sale_price_edit;case"wholesale":return e.wholesale_price_edit}}},{key:"computeProductTax",value:function(t){switch(t.mode){case"custom":return this.computeCustomProductTax(t);case"normal":return this.computeNormalProductTax(t);case"wholesale":return this.computeWholesaleProductTax(t);default:return t}}},{key:"proceedProductTaxComputation",value:function(t,e){var r=t.$original(),n=r.tax_group,i=this.getProductUnitPrice(t.mode,t.$quantities()),s=0,o=this.getProductUnitPrice(t.mode,t.$quantities());if(null!=n&&void 0!==n.taxes){var a=0;switch(n.taxes.length>0&&(a=n.taxes.map((function(t){return t.rate})).reduce((function(t,e){return t+e}))),r.tax_type){case"inclusive":i=this.getPriceWithoutTax(e,a,r.tax_type),o=e;break;case"exclusive":i=e,o=this.getPriceWithTax(e,a,r.tax_type)}s=this.getVatValue(e,a,r.tax_type)}return{price_without_tax:i,tax_value:s,price_with_tax:o}}},{key:"computeCustomProductTax",value:function(t){t.$original();var e=t.$quantities(),r=this.proceedProductTaxComputation(t,e.custom_price_edit);return e.custom_price_without_tax=r.price_without_tax,e.custom_price_with_tax=r.price_with_tax,e.custom_price_tax=r.tax_value,t.$quantities=function(){return e},t}},{key:"computeNormalProductTax",value:function(t){var e=t.$quantities(),r=this.proceedProductTaxComputation(t,e.sale_price_edit);return e.sale_price_without_tax=r.price_without_tax,e.sale_price_with_tax=r.price_with_tax,e.sale_price_tax=r.tax_value,t.$quantities=function(){return e},t}},{key:"computeWholesaleProductTax",value:function(t){var e=t.$quantities(),r=this.proceedProductTaxComputation(t,e.wholesale_price_edit);return e.wholesale_price_without_tax=r.price_without_tax,e.wholesale_price_with_tax=r.price_with_tax,e.wholesale_price_tax=r.tax_value,t.$quantities=function(){return e},t}},{key:"getPrice",value:function(t,e,r){switch(e){case"normal":return t["sale_price_"+r];case"wholesale":return t["wholesale_price_"+r];case"custom":return t["custom_price_"+r]}}},{key:"computeProduct",value:function(t){"product"===t.product_type&&("normal"===t.mode?(t.unit_price=this.getSalePrice(t.$quantities(),t.$original()),t.tax_value=w.tS(t.$quantities().sale_price_tax).multiply(t.quantity).done()):"wholesale"===t.mode&&(t.unit_price=this.getWholesalePrice(t.$quantities(),t.$original()),t.tax_value=w.tS(t.$quantities().wholesale_price_tax).multiply(t.quantity).done()),"custom"===t.mode&&(t.unit_price=this.getCustomPrice(t.$quantities(),t.$original()),t.tax_value=w.tS(t.$quantities().custom_price_tax).multiply(t.quantity).done()));var e=0,r=0,n=this.getPrice(t.$quantities(),t.mode,"with_tax"),i=this.getPrice(t.$quantities(),t.mode,"without_tax");["flat","percentage"].includes(t.discount_type)&&("percentage"===t.discount_type?(t.discount=w.tS(w.tS(w.tS(t.unit_price).multiply(t.discount_percentage).done()).divide(100).done()).multiply(t.quantity).done(),e=w.tS(w.tS(w.tS(i).multiply(t.discount_percentage).done()).divide(100).done()).multiply(t.quantity).done(),r=w.tS(w.tS(w.tS(n).multiply(t.discount_percentage).done()).divide(100).done()).multiply(t.quantity).done()):(e=t.discount,r=t.discount)),t.price_with_tax=n,t.price_without_tax=i,t.total_price=w.tS(w.tS(t.unit_price).multiply(t.quantity).done()).subtract(t.discount).done(),t.total_price_with_tax=w.tS(w.tS(n).multiply(t.quantity).done()).subtract(r).done(),t.total_price_without_tax=w.tS(w.tS(i).multiply(t.quantity).done()).subtract(e).done(),s.kq.doAction("ns-after-product-computed",t)}},{key:"loadCustomer",value:function(t){return s.ih.get("/api/nexopos/v4/customers/".concat(t))}},{key:"defineSettings",value:function(t){this._settings.next(t)}},{key:"voidOrder",value:function(t){var e=this;void 0!==t.id?["hold"].includes(t.payment_status)?i.G.show(D,{title:(0,o.__)("Order Deletion"),message:(0,o.__)("The current order will be deleted as no payment has been made so far."),onAction:function(r){r&&s.ih.delete("/api/nexopos/v4/orders/".concat(t.id)).subscribe({next:function(t){s.kX.success(t.message).subscribe(),e.reset()},error:function(t){return s.kX.error(t.message).subscribe()}})}}):i.G.show(A,{title:(0,o.__)("Void The Order"),message:(0,o.__)("The current order will be void. This will cancel the transaction, but the order won't be deleted. Further details about the operation will be tracked on the report. Consider providing the reason of this operation."),onAction:function(r){!1!==r&&s.ih.post("/api/nexopos/v4/orders/".concat(t.id,"/void"),{reason:r}).subscribe({next:function(t){s.kX.success(t.message).subscribe(),e.reset()},error:function(t){return s.kX.error(t.message).subscribe()}})}}):s.kX.error((0,o.__)("Unable to void an unpaid order.")).subscribe()}},{key:"triggerOrderTypeSelection",value:function(t){return j(this,void 0,void 0,k().mark((function e(){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<this.orderTypeQueue.length)){e.next=8;break}return e.next=4,this.orderTypeQueue[r].promise(t);case 4:e.sent;case 5:r++,e.next=1;break;case 8:case"end":return e.stop()}}),e,this)})))}},{key:"set",value:function(t,e){var r=this.settings.getValue();r[t]=e,this.settings.next(r)}},{key:"unset",value:function(t){var e=this.settings.getValue();delete e[t],this.settings.next(e)}},{key:"get",value:function(t){return this.settings.getValue()[t]}},{key:"destroy",value:function(){this._products.unsubscribe(),this._customers.unsubscribe(),this._types.unsubscribe(),this._breadcrumbs.unsubscribe(),this._paymentsType.unsubscribe(),this._screen.unsubscribe(),this._order.unsubscribe(),this._settings.unsubscribe()}}],r&&P(e.prototype,r),a&&P(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.POS=new q,window.POSClass=q;window.POS},6700:(t,e,r)=>{var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":4415,"./fy.js":4415,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function i(t){var e=s(t);return r(e)}function s(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=s,t.exports=i,i.id=6700},9607:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(538),i=r(381),s=r.n(i),o=r(7144),a=r.n(o),l=(r(3656),r(8094));const c=n.default.extend({name:"ns-date-range-picker",data:function(){return{dateRange:{startDate:null,endDate:null}}},components:{DateRangePicker:a()},mounted:function(){void 0!==this.field.value&&(this.dateRange=this.field.value)},watch:{dateRange:function(){var t={startDate:s()(this.dateRange.startDate).format("YYYY-MM-DD HH:mm"),endDate:s()(this.dateRange.endDate).format("YYYY-MM-DD HH:mm")};this.field.value=t,this.$emit("change",this)}},methods:{__:l.__,getFormattedDate:function(t){return null!==t?s()(t).format("YYYY-MM-DD HH:mm"):(0,l.__)("N/D")},clearDate:function(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0}},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]});const u=(0,r(1900).Z)(c,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"flex flex-auto flex-col mb-2 ns-date-range-picker"},[e("label",{staticClass:"block leading-5 font-medium",class:t.hasError?"text-error-primary":"text-primary",attrs:{for:t.field.name}},[t._t("default")],2),t._v(" "),e("div",{staticClass:"mt-1 relative flex input-group border rounded-md overflow-hidden focus:shadow-sm",class:t.hasError?"error":""},[t.leading?e("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{staticClass:"text-primary sm:text-sm sm:leading-5"},[t._v("\n            "+t._s(t.leading)+"\n            ")])]):t._e(),t._v(" "),e("button",{staticClass:"px-3 outline-none bg-error-secondary font-semibold text-white",on:{click:function(e){return t.clearDate()}}},[e("i",{staticClass:"las la-times"})]),t._v(" "),e("date-range-picker",{ref:"picker",staticClass:"w-full flex items-center bg-input-background",attrs:{"locale-data":{firstDay:1,format:"yyyy-mm-dd HH:mm:ss"},timePicker:!0,timePicker24Hour:!0,showWeekNumbers:!0,showDropdowns:!0,autoApply:!1,appendToBody:!0,disabled:t.field.disabled,linkedCalendars:!0},scopedSlots:t._u([{key:"input",fn:function(r){return[e("div",{staticClass:"flex justify-between items-center w-full py-2"},[e("span",{staticClass:"text-xs"},[t._v(t._s(t.__("Range Starts"))+" : "+t._s(t.getFormattedDate(r.startDate)))]),t._v(" "),e("span",{staticClass:"text-xs"},[t._v(t._s(t.__("Range Ends"))+" : "+t._s(t.getFormattedDate(r.endDate)))])])]}}]),model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),t.field.errors&&0!==t.field.errors.length?t._e():e("p",{staticClass:"text-xs text-gray-500"},[t._t("description")],2),t._v(" "),t._l(t.field.errors,(function(r,n){return e("p",{key:n,staticClass:"text-xs text-red-400"},["required"===r.identifier?t._t(r.identifier,(function(){return[t._v(t._s(t.__("This field is required.")))]})):t._e(),t._v(" "),"email"===r.identifier?t._t(r.identifier,(function(){return[t._v(t._s(t.__("This field must contain a valid email address.")))]})):t._e(),t._v(" "),"invalid"===r.identifier?t._t(r.identifier,(function(){return[t._v(t._s(r.message))]})):t._e()],2)}))],2)}),[],!1,null,null,null).exports},7359:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(381),i=r.n(n);const s={name:"ns-date-time-picker",props:["field","date"],data:function(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:i(),months:new Array(11).fill("").map((function(t,e){return e})),daysOfWeek:new Array(7).fill("").map((function(t,e){return e})),calendar:[[]]}},computed:{momentCopy:function(){return i()()}},watch:{visible:function(){var t=this;this.visible&&setTimeout((function(){t.$refs.hours.addEventListener("focus",(function(){this.select()})),t.$refs.minutes.addEventListener("focus",(function(){this.select()}))}),100)}},mounted:function(){var t=this;document.addEventListener("mousedown",(function(e){return t.checkClickedItem(e)})),this.field?this.currentDay=[void 0,"",null].includes(this.field.value)?i()():i()(this.field.value):this.currentDay=[void 0,"",null].includes(this.date)?i()():i()(this.date),this.hours=this.currentDay.format("HH"),this.minutes=this.currentDay.format("mm"),this.build()},methods:{__:r(8094).__,erase:function(){this.selectDate()},setYear:function(t){parseInt(t.srcElement.value)>0&&parseInt(t.srcElement.value)<9999&&(this.currentDay.year(t.srcElement.value),this.updateDateTime())},subYear:function(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.updateDateTime())},addYear:function(){this.currentDay.add(1,"year"),this.updateDateTime()},toggleView:function(t){var e=this;this.currentView=t,"years"===this.currentView&&setTimeout((function(){e.$refs.year.select()}),100)},setMonth:function(t){this.currentDay.month(t),this.updateDateTime()},detectHoursChange:function(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.updateDateTime()},detectMinuteChange:function(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.updateDateTime()},updateDateTime:function(){this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.build(),this.selectDate(this.currentDay)},checkClickedItem:function(t){!this.$el.contains(t.srcElement)&&this.visible&&(this.visible=!1)},selectDate:function(t){[void 0].includes(t)?(this.field&&(this.field.value=null),this.$emit("change",null)):(this.currentDay=t,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.field&&(this.field.value=this.currentDay.format("YYYY/MM/DD HH:mm")),console.log(this.hours,this.minutes),this.$emit("change",this.field?this.field:this.currentDay))},subMonth:function(){this.currentDay.subtract(1,"month"),this.build()},addMonth:function(){this.currentDay.add(1,"month"),this.build()},resetCalendar:function(){this.calendar=[[]]},build:function(){this.resetCalendar();this.currentDay.clone().startOf("month");for(var t=this.currentDay.clone().startOf("month"),e=this.currentDay.clone().endOf("month");;){0===t.day()&&this.calendar[0].length>0&&this.calendar.push([]);var r=this.calendar.length-1;if(this.calendar[r].push({date:t.clone(),dayOfWeek:t.day(),isToday:t.isSame(i().now(),"day")}),t.isSame(e,"day"))break;t.add(1,"day")}}}};const o=(0,r(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"picker mb-2"},[t.field?e("label",{staticClass:"block leading-5 font-medium text-primary"},[t._v(t._s(t.field.label))]):t._e(),t._v(" "),e("div",{staticClass:"ns-button"},[e("button",{staticClass:"rounded cursor-pointer w-full px-1 py-1 flex items-center text-primary",class:t.field?"mt-1 border":"shadow",on:{click:function(e){t.visible=!t.visible}}},[e("i",{staticClass:"las la-clock text-2xl"}),t._v(" "),t.currentDay&&t.field?e("span",{staticClass:"mx-1 text-sm"},[null!==t.field.value?e("span",[t._v(t._s(t.currentDay.format("YYYY/MM/DD HH:mm")))]):t._e(),t._v(" "),null===t.field.value?e("span",[t._v("N/A")]):t._e()]):t._e(),t._v(" "),t.currentDay&&t.date?e("span",{staticClass:"mx-1 text-sm"},[null!==t.date?e("span",[t._v(t._s(t.currentDay.format("YYYY/MM/DD HH:mm")))]):t._e(),t._v(" "),null===t.date?e("span",[t._v("N/A")]):t._e()]):t._e()])]),t._v(" "),t.field?e("p",{staticClass:"text-sm text-secondary py-1"},[t._v(t._s(t.field.description))]):t._e(),t._v(" "),t.visible?e("div",{staticClass:"relative z-10 h-0 w-0"},[e("div",{staticClass:"absolute w-72 shadow-xl rounded ns-box anim-duration-300 zoom-in-entrance flex flex-col",class:t.field?"-mt-4":"mt-2"},["years"===t.currentView?e("div",{staticClass:"flex-auto"},[e("div",{staticClass:"p-2 flex items-center"},[e("div",[e("button",{staticClass:"w-8 h-8 border border-numpad-edge outline-none text-numpad-text hover:bg-numpad-hover rounded",on:{click:function(e){return t.subMonth()}}},[e("i",{staticClass:"las la-angle-left"})])]),t._v(" "),e("div",{staticClass:"flex flex-auto font-semibold text-primary justify-center"},[e("span",{staticClass:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(e){return t.toggleView("months")}}},[t._v(t._s(t.currentDay.format("MMM")))]),t._v(" "),e("span",{staticClass:"cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(e){return t.toggleView("years")}}},[t._v(t._s(t.currentDay.format("YYYY")))])]),t._v(" "),e("div",[e("button",{staticClass:"w-8 h-8 border border-numpad-edge outline-none text-numpad-text hover:bg-numpad-hover rounded",on:{click:function(e){return t.addMonth()}}},[e("i",{staticClass:"las la-angle-right"})])])]),t._v(" "),e("div",{staticClass:"h-32 flex items-center justify-center text-primary"},[e("div",{staticClass:"rounded input-group info border flex w-2/3 overflow-hidden"},[e("button",{staticClass:"px-4 py-2",on:{click:function(e){return t.subYear()}}},[e("i",{staticClass:"las la-minus"})]),t._v(" "),e("input",{ref:"year",staticClass:"p-2 w-24 text-center outline-none",attrs:{type:"text"},domProps:{value:t.currentDay.format("YYYY")},on:{change:function(e){return t.setYear(e)}}}),t._v(" "),e("button",{staticClass:"px-4 py-2",on:{click:function(e){return t.addYear()}}},[e("i",{staticClass:"las la-plus"})])])])]):t._e(),t._v(" "),"months"===t.currentView?e("div",{staticClass:"flex-auto"},[e("div",{staticClass:"p-2 flex items-center"},[e("div",[e("button",{staticClass:"w-8 h-8 border ns-inset-button outline-none ns-inset-button rounded",on:{click:function(e){return t.subMonth()}}},[e("i",{staticClass:"las la-angle-left"})])]),t._v(" "),e("div",{staticClass:"flex flex-auto font-semibold text-primary justify-center"},[e("span",{staticClass:"mr-2 border-b border-info-secondary border-dashed"},[t._v(t._s(t.currentDay.format("MMM")))]),t._v(" "),e("span",{staticClass:"cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(e){return t.toggleView("years")}}},[t._v(t._s(t.currentDay.format("YYYY")))])]),t._v(" "),e("div",[e("button",{staticClass:"w-8 h-8 border ns-inset-button outline-none ns-inset-button rounded",on:{click:function(e){return t.addMonth()}}},[e("i",{staticClass:"las la-angle-right"})])])]),t._v(" "),e("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-primary"},t._l(t.months,(function(r,n){return e("div",{key:n,staticClass:"h-8 flex justify-center items-center text-sm"},[[e("div",{staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:t.momentCopy.month(r).format("MM")===t.currentDay.format("MM")?"bg-info-secondary text-white border border-info-secondary":"hover:bg-numpad-hover border border-numpad-edge",on:{click:function(e){return t.setMonth(r)}}},[t._v("\n                                "+t._s(t.momentCopy.format("MMM"))+"\n                            ")])]],2)})),0)]):t._e(),t._v(" "),"days"===t.currentView?e("div",{staticClass:"flex-auto"},[e("div",{staticClass:"p-2 flex items-center"},[e("div",[e("button",{staticClass:"w-8 h-8 border outline-none ns-inset-button rounded",on:{click:function(e){return t.subMonth()}}},[e("i",{staticClass:"las la-angle-left"})])]),t._v(" "),e("div",{staticClass:"flex flex-auto font-semibold text-primary justify-center"},[e("span",{staticClass:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(e){return t.toggleView("months")}}},[t._v(t._s(t.currentDay.format("MMM")))]),t._v(" "),e("span",{staticClass:"cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(e){return t.toggleView("years")}}},[t._v(t._s(t.currentDay.format("YYYY")))])]),t._v(" "),e("div",[e("button",{staticClass:"w-8 h-8 border outline-none ns-inset-button rounded",on:{click:function(e){return t.addMonth()}}},[e("i",{staticClass:"las la-angle-right"})])])]),t._v(" "),e("div",{staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary"},[e("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Sun")))]),t._v(" "),e("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Mon")))]),t._v(" "),e("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Tue")))]),t._v(" "),e("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Wed")))]),t._v(" "),e("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Thu")))]),t._v(" "),e("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Fri")))]),t._v(" "),e("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Sat")))])]),t._v(" "),t._l(t.calendar,(function(r,n){return e("div",{key:n,staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary"},t._l(t.daysOfWeek,(function(n,i){return e("div",{key:i,staticClass:"h-8 flex justify-center items-center text-sm"},[t._l(r,(function(r,i){return[r.dayOfWeek===n?e("div",{key:i,staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:r.date.format("DD")===t.currentDay.format("DD")?"text-white border border-info-secondary bg-info-secondary":"hover:bg-numpad-hover border border-numpad-edge",on:{click:function(e){return t.selectDate(r.date)}}},[t._v("\n                                "+t._s(r.date.format("DD"))+"\n                            ")]):t._e()]}))],2)})),0)}))],2):t._e(),t._v(" "),e("div",{staticClass:"border-t border-numpad-edge w-full p-2"},[e("div",{staticClass:"-mx-1 flex justify-between"},[e("div",{staticClass:"px-1"},[e("div",{staticClass:"-mx-1 flex"},[t.field?e("div",{staticClass:"px-1"},[e("button",{staticClass:"border ns-inset-button error hover:text-white rounded w-8 h-8 flex items-center justify-center",on:{click:function(e){return t.erase()}}},[e("i",{staticClass:"las la-trash"})])]):t._e(),t._v(" "),"days"!==t.currentView?e("div",{staticClass:"px-1"},[e("button",{staticClass:"border ns-inset-button error hover:text-white rounded w-8 h-8 flex items-center justify-center",on:{click:function(e){return t.toggleView("days")}}},[e("i",{staticClass:"las la-sign-out-alt"})])]):t._e()])]),t._v(" "),e("div",{staticClass:"px-2"},[e("div",{staticClass:"rounded flex"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.hours,expression:"hours"}],ref:"hours",staticClass:"w-12 p-1 text-center border border-numpad-edge bg-input-disabled text-primary active:border-numpad-edge",attrs:{placeholder:"HH",type:"number"},domProps:{value:t.hours},on:{change:function(e){return t.detectHoursChange(e)},input:function(e){e.target.composing||(t.hours=e.target.value)}}}),t._v(" "),e("span",{staticClass:"mx-1"},[t._v(":")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.minutes,expression:"minutes"}],ref:"minutes",staticClass:"w-12 p-1 text-center border border-numpad-edge bg-input-disabled text-primary active:border-numpad-edge",attrs:{placeholder:"mm",type:"number"},domProps:{value:t.minutes},on:{change:function(e){return t.detectMinuteChange(e)},input:function(e){e.target.composing||(t.minutes=e.target.value)}}})])])])])])]):t._e()])}),[],!1,null,null,null).exports},9785:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(381),i=r.n(n);const s={name:"ns-datepicker",props:["label","date"],data:function(){return{visible:!1,currentDay:null,daysOfWeek:new Array(7).fill("").map((function(t,e){return e})),calendar:[[]]}},mounted:function(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null].includes(this.date)?i()():i()(this.date),this.build()},methods:{__:r(8094).__,checkClickedItem:function(t){!this.$el.contains(t.srcElement)&&this.visible&&(this.visible=!1)},selectDate:function(t){this.currentDay=t,this.visible=!1,this.$emit("change",t)},subMonth:function(){this.currentDay.subtract(1,"month"),this.build()},addMonth:function(){this.currentDay.add(1,"month"),this.build()},resetCalendar:function(){this.calendar=[[]]},build:function(){this.resetCalendar();this.currentDay.clone().startOf("month");for(var t=this.currentDay.clone().startOf("month"),e=this.currentDay.clone().endOf("month");;){0===t.day()&&this.calendar[0].length>0&&this.calendar.push([]);var r=this.calendar.length-1;if(this.calendar[r].push({date:t.clone(),dayOfWeek:t.day(),isToday:t.isSame(i().now(),"day")}),t.isSame(e,"day"))break;t.add(1,"day")}}}};const o=(0,r(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"picker"},[e("div",{staticClass:"rounded cursor-pointer bg-white shadow px-1 py-1 flex items-center text-gray-700",on:{click:function(e){t.visible=!t.visible}}},[e("i",{staticClass:"las la-clock text-2xl"}),t._v(" "),e("span",{staticClass:"mx-1 text-sm"},[e("span",[t._v(t._s(t.label||t.__("Date"))+" : ")]),t._v(" "),t.currentDay?e("span",[t._v(t._s(t.currentDay.format("YYYY/MM/DD")))]):t._e(),t._v(" "),null===t.currentDay?e("span",[t._v(t._s(t.__("N/A")))]):t._e()])]),t._v(" "),t.visible?e("div",{staticClass:"relative h-0 w-0 -mb-2"},[e("div",{staticClass:"w-72 mt-2 shadow rounded bg-white anim-duration-300 zoom-in-entrance flex flex-col"},[e("div",{staticClass:"flex-auto"},[e("div",{staticClass:"p-2 flex items-center"},[e("div",[e("button",{staticClass:"w-8 h-8 bg-gray-400 rounded",on:{click:function(e){return t.subMonth()}}},[e("i",{staticClass:"las la-angle-left"})])]),t._v(" "),e("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[t._v(t._s(t.currentDay.format("MMM"))+" "+t._s(t.currentDay.format("YYYY")))]),t._v(" "),e("div",[e("button",{staticClass:"w-8 h-8 bg-gray-400 rounded",on:{click:function(e){return t.addMonth()}}},[e("i",{staticClass:"las la-angle-right"})])])]),t._v(" "),e("div",{staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},[e("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Sun")))]),t._v(" "),e("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Mon")))]),t._v(" "),e("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Tue")))]),t._v(" "),e("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Wed")))]),t._v(" "),e("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Thu")))]),t._v(" "),e("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Fri")))]),t._v(" "),e("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[t._v(t._s(t.__("Sat")))])]),t._v(" "),t._l(t.calendar,(function(r,n){return e("div",{key:n,staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},t._l(t.daysOfWeek,(function(n,i){return e("div",{key:i,staticClass:"h-8 flex justify-center items-center text-sm"},[t._l(r,(function(r,i){return[r.dayOfWeek===n?e("div",{key:i,staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:r.date.format("DD")===t.currentDay.format("DD")?"bg-blue-400 text-white border border-blue-500":"hover:bg-gray-100 border border-gray-200",on:{click:function(e){return t.selectDate(r.date)}}},[t._v("\n                                "+t._s(r.date.format("DD"))+"\n                            ")]):t._e()]}))],2)})),0)}))],2),t._v(" "),e("div")])]):t._e()])}),[],!1,null,null,null).exports},1128:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const n={name:"ns-notice",props:["color"],computed:{actualColor:function(){return this.color||"blue"}}};const i=(0,r(1900).Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-4 border-l-4 text-primary ns-notice",class:t.actualColor,attrs:{role:"alert"}},[e("h2",{staticClass:"font-bold"},[t._t("title")],2),t._v(" "),e("p",[t._t("description"),t._t("default")],2)])}),[],!1,null,null,null).exports},9693:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(8094);const i={name:"ns-numpad-plus",props:["value","currency","limit"],data:function(){return{screenValue:0,order:null,cursor:parseInt(ns.currency.ns_currency_precision),orderSubscription:null,allSelected:!0,keyRows:[[7,8,9].map((function(t){return{identifier:t,value:t}})),[4,5,6].map((function(t){return{identifier:t,value:t}})),[1,2,3].map((function(t){return{identifier:t,value:t}})),[{identifier:".",value:"."},{identifier:0,value:0},{identifier:"backspace",icon:"la-backspace"}],[{identifier:"next",value:(0,n.__)("Enter")}]]}},mounted:function(){var t=this;this.screenValue=this.value||0;var e=new Array(10).fill("").map((function(t,e){return e}));nsHotPress.create("numpad-keys").whenVisible([".is-popup"]).whenPressed(e,(function(e,r){t.inputValue({value:r})})),nsHotPress.create("numpad-backspace").whenVisible([".is-popup"]).whenPressed("backspace",(function(){return t.inputValue({identifier:"backspace"})})),nsHotPress.create("numpad-increase").whenVisible([".is-popup"]).whenPressed("+",(function(){return t.increaseBy({value:1})})),nsHotPress.create("numpad-dot").whenVisible([".is-popup"]).whenPressed(".",(function(){return t.inputValue({identifier:"."})})),nsHotPress.create("numpad-reduce").whenVisible([".is-popup"]).whenPressed("-",(function(){return t.increaseBy({value:-1})})),nsHotPress.create("numpad-save").whenVisible([".is-popup"]).whenPressed("enter",(function(){return t.inputValue({identifier:"next"})}))},watch:{value:function(){this.value.toString().length>0?this.screenValue=this.value:this.screenValue=""}},beforeDestroy:function(){nsHotPress.destroy("numpad-backspace"),nsHotPress.destroy("numpad-increase"),nsHotPress.destroy("numpad-reduce"),nsHotPress.destroy("numpad-save"),nsHotPress.destroy("numpad-dot")},methods:{increaseBy:function(t){this.screenValue=(parseFloat(t.value)+(parseFloat(this.screenValue)||0)).toString(),this.allSelected=!1},inputValue:function(t){if("next"!==t.identifier){if("backspace"===t.identifier)this.allSelected?(this.screenValue="0",this.allSelected=!1):this.screenValue=this.screenValue.toString().substr(0,this.screenValue.length-1);else if("."===t.identifier)this.allSelected?(this.screenValue="0.",this.allSelected=!1):null===this.screenValue.toString().match(/^[0-9][1-9]*\.[0-9]*$/)&&(this.screenValue=this.screenValue+=".");else if(t.value.toString().match(/^\d+$/)){if(this.limit>0&&this.screenValue.length>=this.limit)return;this.allSelected?(this.screenValue=t.value.toString(),this.allSelected=!1):(this.screenValue+=""+t.value.toString(),"percentage"===this.mode&&(this.screenValue=this.screenValue>100?100:this.screenValue))}this.$emit("changed",this.screenValue)}else this.$emit("next",this.screenValue)}}};const s=(0,r(1900).Z)(i,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"numpad-holder"}},t._l(t.keyRows,(function(r,n){return e("div",{key:n},[e("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-1 text-lg",attrs:{id:"numpad"}},[t._l(r,(function(n,i){return e("div",{key:i,staticClass:"select-none ns-numpad-key border-l border-b h-24 font-bold flex items-center justify-center cursor-pointer",class:1===r.length?"col-span-3":"",on:{click:function(e){return t.inputValue(n)}}},[void 0!==n.value?e("span",[t._v(t._s(n.value))]):t._e(),t._v(" "),n.icon?e("i",{staticClass:"las",class:n.icon}):t._e()])})),t._v(" "),t._t("numpad-footer")],2)])})),0)}),[],!1,null,null,null).exports},8321:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var n=r(8094);function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const o={name:"ns-numpad",props:["value","currency","floating","limit"],data:function(){return{number:parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(t){return 0})).join("")),screenValue:0,order:null,cursor:parseInt(ns.currency.ns_currency_precision),orderSubscription:null,allSelected:!0,keys:[].concat(i([7,8,9].map((function(t){return{identifier:t,value:t}}))),i([4,5,6].map((function(t){return{identifier:t,value:t}}))),i([1,2,3].map((function(t){return{identifier:t,value:t}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",value:(0,n.__)("Enter")}])}},mounted:function(){var t=this;this.floating&&this.value>0?this.screenValue=parseFloat(this.value/this.number):this.screenValue=this.value||0;var e=new Array(10).fill("").map((function(t,e){return e}));nsHotPress.create("numpad-keys").whenVisible([".is-popup"]).whenPressed(e,(function(e,r){t.inputValue({value:r})})),nsHotPress.create("numpad-backspace").whenVisible([".is-popup"]).whenPressed("backspace",(function(){return t.inputValue({identifier:"backspace"})})),nsHotPress.create("numpad-increase").whenVisible([".is-popup"]).whenPressed("+",(function(){return t.increaseBy({value:1})})),nsHotPress.create("numpad-reduce").whenVisible([".is-popup"]).whenPressed("-",(function(){return t.increaseBy({value:-1})})),nsHotPress.create("numpad-save").whenVisible([".is-popup"]).whenPressed("enter",(function(){return t.inputValue({identifier:"next"})}))},watch:{value:function(){this.value.toString().length>0?this.floating?this.screenValue=Math.round(this.value*this.number).toString():this.screenValue=this.value:this.screenValue=""}},beforeDestroy:function(){nsHotPress.destroy("numpad-backspace"),nsHotPress.destroy("numpad-increase"),nsHotPress.destroy("numpad-reduce"),nsHotPress.destroy("numpad-save")},methods:{increaseBy:function(t){var e=parseInt(1+new Array(this.cursor).fill("").map((function(t){return 0})).join(""));this.screenValue=(parseFloat(t.value)*e+(parseFloat(this.screenValue)||0)).toString(),this.allSelected=!1},inputValue:function(t){var e=parseInt(1+new Array(this.cursor).fill("").map((function(t){return 0})).join(""));if("next"!==t.identifier){if("backspace"===t.identifier)this.allSelected?(this.screenValue="0",this.allSelected=!1):this.screenValue=this.screenValue.toString().substr(0,this.screenValue.length-1);else if(t.value.toString().match(/^\d+$/)){if(this.limit>0&&this.screenValue.length>=this.limit)return;this.allSelected?(this.screenValue=t.value.toString(),this.allSelected=!1):(this.screenValue+=""+t.value.toString(),"percentage"===this.mode&&(this.screenValue=this.screenValue>100?100:this.screenValue))}var r=this.floating&&this.screenValue.length>0&&"0"!==this.screenValue?parseFloat(this.screenValue/this.number):this.screenValue;this.$emit("changed",r)}else this.$emit("next",this.floating&&this.screenValue.length>0?parseFloat(this.screenValue/e):this.screenValue)}}};const a=(0,r(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-3",attrs:{id:"numpad"}},[t._l(t.keys,(function(r,n){return e("div",{key:n,staticClass:"select-none ns-numpad-key border-l border-b h-24 font-bold flex items-center justify-center cursor-pointer",on:{click:function(e){return t.inputValue(r)}}},[void 0!==r.value?e("span",[t._v(t._s(r.value))]):t._e(),t._v(" "),r.icon?e("i",{staticClass:"las",class:r.icon}):t._e()])})),t._v(" "),t._t("numpad-footer")],2)}),[],!1,null,null,null).exports},5507:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const n={name:"ns-paginate",props:["pagination"],data:function(){return{page:1,path:""}},mounted:function(){this.path=this.pagination.path},computed:{getPagination:function(){return this.pagination?this.pageNumbers(this.pagination.last_page,this.pagination.current_page):[]}},methods:{gotoPage:function(t){this.page=t,this.$emit("load","".concat(this.path,"?page=").concat(this.page))},pageNumbers:function(t,e){var r=[];e-3>1&&r.push(1,"...");for(var n=1;n<=t;n++)e+3>n&&e-3<n&&r.push(n);return e+3<t&&r.push("...",t),console.log(r),r.filter((function(t){return t>0||"string"==typeof t}))}}};const i=(0,r(1900).Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex -mx-1",attrs:{id:"pagination"}},[t.pagination.current_page?[e("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-inset-button info shadow",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.gotoPage(t.pagination.first_page)}}},[e("i",{staticClass:"las la-angle-double-left"})]),t._v(" "),t._l(t.getPagination,(function(r,n){return["..."!==t.page?e("a",{key:n,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-inset-button info",class:t.page==r?"active":"",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.gotoPage(r)}}},[t._v(t._s(r))]):t._e(),t._v(" "),"..."===t.page?e("a",{key:n,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-inset-button",attrs:{href:"javascript:void(0)"}},[t._v("...")]):t._e()]})),t._v(" "),e("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-inset-button info shadow",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.gotoPage(t.pagination.last_page)}}},[e("i",{staticClass:"las la-angle-double-right"})])]:t._e()],2)}),[],!1,null,null,null).exports},3720:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const n={data:function(){return{}},name:"ns-switch",mounted:function(){},computed:{_options:function(){var t=this;return this.field.options.map((function(e){return e.selected=e.value===t.field.value,e}))},hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},sizeClass:function(){return" w-1/".concat(this._options.length<=4?this._options.length:4)},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__,setSelected:function(t){this.field.value=t.value,this._options.forEach((function(t){return t.selected=!1})),t.selected=!0,this.$forceUpdate(),this.$emit("change",t.value)}},props:["placeholder","leading","type","field"]};const i=(0,r(1900).Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2 ns-switch"},[e("label",{staticClass:"block leading-5 font-medium",class:t.hasError?"has-error":"is-pristine",attrs:{for:t.field.name}},[t._t("default")],2),t._v(" "),e("div",{staticClass:"rounded-lg flex w-52 overflow-hidden shadow my-1",class:t.hasError?"has-error":""},t._l(t._options,(function(r,n){return e("button",{key:n,staticClass:"p-2 text-sm flex-no-wrap outline-none rounded-none",class:r.selected?"selected "+t.sizeClass:"unselected "+t.inputClass+" "+t.sizeClass,attrs:{disabled:r.disabled},on:{click:function(e){return t.setSelected(r)}}},[t._v(t._s(r.label))])})),0),t._v(" "),t.field.errors&&0!==t.field.errors.length?t._e():e("p",{staticClass:"text-xs ns-description"},[t._t("description")],2),t._v(" "),t._l(t.field.errors,(function(r,n){return e("p",{key:n,staticClass:"text-xs ns-error"},["required"===r.identifier?t._t(r.identifier,(function(){return[t._v(t._s(t.__("This field is required.")))]})):t._e()],2)}))],2)}),[],!1,null,null,null).exports},2478:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});var n=r(1487),i=r(2867),s=r(8094),o=r(2381);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(){l=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var s=e&&e.prototype instanceof b?e:b,o=Object.create(s.prototype),a=new $(n||[]);return i(o,"_invoke",{value:O(t,r,a)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",v="suspendedYield",m="executing",_="completed",y={};function b(){}function g(){}function x(){}var w={};d(w,o,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(F([])));k&&k!==r&&n.call(k,o)&&(w=k);var P=x.prototype=b.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,s,o,l){var c=p(t[i],t,s);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==a(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,l)}),(function(t){r("throw",t,o,l)})):e.resolve(d).then((function(t){u.value=t,o(u)}),(function(t){return r("throw",t,o,l)}))}l(c.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function O(e,r,n){var i=h;return function(s,o){if(i===m)throw new Error("Generator is already running");if(i===_){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=p(e,r,n);if("normal"===c.type){if(i=n.done?_:v,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var s=p(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,y;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(a(e)+" is not iterable")}return g.prototype=x,i(P,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:g,configurable:!0}),g.displayName=d(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,u,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},j(S.prototype),d(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new S(f(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(P),d(P,u,"Generator"),d(P,o,(function(){return this})),d(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function c(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}const u={name:"ns-media",props:["popup"],components:{VueUpload:r(2948)},data:function(){return{pages:[{label:(0,s.__)("Upload"),name:"upload",selected:!1},{label:(0,s.__)("Gallery"),name:"gallery",selected:!0}],resources:[],isDragging:!1,response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},queryPage:1,bulkSelect:!1,files:[]}},mounted:function(){this.popupCloser();var t=this.pages.filter((function(t){return"gallery"===t.name}))[0];this.select(t)},watch:{files:function(){this.uploadFiles()}},computed:{postMedia:function(){return n.kq.applyFilters("http-client-url","/api/nexopos/v4/medias")},currentPage:function(){return this.pages.filter((function(t){return t.selected}))[0]},hasOneSelected:function(){return this.response.data.filter((function(t){return t.selected})).length>0},selectedResource:function(){return this.response.data.filter((function(t){return t.selected}))[0]},csrf:function(){return ns.authentication.csrf},isPopup:function(){return void 0!==this.$popup},user_id:function(){return this.isPopup&&this.$popupParams.user_id||0},panelOpened:function(){return!this.bulkSelect&&this.hasOneSelected}},methods:{popupCloser:i.Z,__:s.__,cancelBulkSelect:function(){this.bulkSelect=!1,this.response.data.forEach((function(t){return t.selected=!1}))},deleteSelected:function(){var t=this;Popup.show(o.default,{title:(0,s.__)("Confirm Your Action"),message:(0,s.__)("You're about to delete selected resources. Would you like to proceed?"),onAction:function(e){e&&n.ih.post("/api/nexopos/v4/medias/bulk-delete",{ids:t.response.data.filter((function(t){return t.selected})).map((function(t){return t.id}))}).subscribe({next:function(e){n.kX.success(e.message).subscribe(),t.loadGallery()},error:function(t){n.kX.error(t.message).subscribe()}})}})},loadUploadScreen:function(){var t=this;setTimeout((function(){t.setDropZone()}),1e3)},setDropZone:function(){var t=this,e=document.getElementById("dropping-zone");e.addEventListener("dragenter",(function(e){return t.preventDefaults(e)}),!1),e.addEventListener("dragleave",(function(e){return t.preventDefaults(e)}),!1),e.addEventListener("dragover",(function(e){return t.preventDefaults(e)}),!1),e.addEventListener("drop",(function(e){return t.preventDefaults(e)}),!1);["dragenter","dragover"].forEach((function(r){e.addEventListener(r,(function(){t.isDragging=!0}))})),["dragleave","drop"].forEach((function(r){e.addEventListener(r,(function(){t.isDragging=!1}))})),e.addEventListener("drop",(function(e){return t.handleDrop(e)}),!1),this.$refs.files.addEventListener("change",(function(e){return t.processFiles(e.currentTarget.files)}))},uploadFiles:function(){var t,e=this;return(t=l().mark((function t(){var r,i,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.files.filter((function(t){return!1===t.uploaded&&0===t.progress&&!1===t.failed})),i=l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r[s],t.prev=1,e.progress=1,t.next=5,new Promise((function(t,r){var i=new FormData;i.append("file",e.file),n.ih.post("/api/nexopos/v4/medias",i,{headers:{"Content-Type":"multipart/form-data"}}).subscribe({next:function(r){e.uploaded=!0,e.progress=100,t(r)},error:function(t){r(t)}})}));case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.failed=!0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})),s=0;case 3:if(!(s<r.length)){t.next=8;break}return t.delegateYield(i(),"t0",5);case 5:s++,t.next=3;break;case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var s=t.apply(e,r);function o(t){c(s,n,i,o,a,"next",t)}function a(t){c(s,n,i,o,a,"throw",t)}o(void 0)}))})()},handleDrop:function(t){this.processFiles(t.dataTransfer.files),t.preventDefault(),t.stopPropagation()},preventDefaults:function(t){t.preventDefault(),t.stopPropagation()},triggerManualUpload:function(){this.$refs.files.click()},processFiles:function(t){var e=this;Array.from(t).filter((function(t){return["image/png","image/gif","image/jpg","image/jpeg"].includes(t.type)})).forEach((function(t){e.files.unshift({file:t,uploaded:!1,failed:!1,progress:0})}))},select:function(t){this.pages.forEach((function(t){return t.selected=!1})),t.selected=!0,"gallery"===t.name?this.loadGallery():"upload"===t.name&&this.loadUploadScreen()},loadGallery:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=null===e?this.queryPage:e,this.queryPage=e,n.ih.get("/api/nexopos/v4/medias?page=".concat(e,"&user_id=").concat(this.user_id)).subscribe((function(e){e.data.forEach((function(t){return t.selected=!1})),t.response=e}))},useSelectedEntries:function(){this.$popupParams.resolve({event:"use-selected",value:this.response.data.filter((function(t){return t.selected}))}),this.$popup.close()},selectResource:function(t){var e=this;this.bulkSelect||this.response.data.forEach((function(r,n){n!==e.response.data.indexOf(t)&&(r.selected=!1)})),t.selected=!t.selected}}};const d=(0,r(1900).Z)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex md:flex-row flex-col ns-box shadow-xl overflow-hidden",class:t.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full",attrs:{id:"ns-media"}},[e("div",{staticClass:"sidebar w-48 md:h-full flex-shrink-0"},[e("h3",{staticClass:"text-xl font-bold my-4 text-center"},[t._v(t._s(t.__("Medias Manager")))]),t._v(" "),e("ul",{staticClass:"sidebar-menus flex md:block"},t._l(t.pages,(function(r,n){return e("li",{key:n,staticClass:"py-2 px-3 cursor-pointer border-l-8",class:r.selected?"active":"",on:{click:function(e){return t.select(r)}}},[t._v(t._s(r.label))])})),0)]),t._v(" "),"upload"===t.currentPage.name?e("div",{staticClass:"content w-full overflow-hidden flex"},[e("div",{staticClass:"flex flex-auto m-2 p-2 flex-col border-info-primary items-center justify-center",class:t.isDragging?"border-dashed border":"",attrs:{id:"dropping-zone"},on:{click:function(e){return t.triggerManualUpload()}}},[e("h3",{staticClass:"text-lg md:text-xl font-bold text-center text-primary mb-4"},[t._v(t._s(t.__("Click Here Or Drop Your File To Upload")))]),t._v(" "),e("input",{ref:"files",staticStyle:{display:"none"},attrs:{type:"file",name:"",multiple:"",id:""}}),t._v(" "),e("div",{staticClass:"rounded w-full md:w-2/3 text-primary h-56 overflow-y-auto ns-scrollbar p-2"},[e("ul",t._l(t.files,(function(r,n){return e("li",{key:n,staticClass:"p-2 mb-2 shadow ns-media-upload-item flex items-center justify-between rounded"},[e("span",[t._v(t._s(r.file.name))]),t._v(" "),e("span",{staticClass:"rounded bg-info-primary flex items-center justify-center text-xs p-2"},[t._v(t._s(r.progress)+"%")])])})),0)])])]):t._e(),t._v(" "),"gallery"===t.currentPage.name?e("div",{staticClass:"content flex-col w-full overflow-hidden flex"},[t.popup?e("div",{staticClass:"p-2 flex flex-shrink-0 justify-between"},[e("div"),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.popup.close()}}})],1)]):t._e(),t._v(" "),e("div",{staticClass:"flex flex-auto overflow-hidden"},[e("div",{staticClass:"shadow ns-grid flex flex-auto flex-col overflow-y-auto ns-scrollbar"},[e("div",{staticClass:"flex flex-auto"},[e("div",{staticClass:"p-2 overflow-x-auto"},[e("div",{staticClass:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4"},t._l(t.response.data,(function(r,n){return e("div",{key:n},[e("div",{staticClass:"p-2"},[e("div",{staticClass:"rounded-lg aspect-square bg-gray-500 m-2 overflow-hidden flex items-center justify-center",class:r.selected?"ns-media-image-selected ring-4":"",on:{click:function(e){return t.selectResource(r)}}},[e("img",{staticClass:"object-cover h-full",attrs:{src:r.sizes.thumb,alt:r.name}})])])])})),0)]),t._v(" "),0===t.response.data.length?e("div",{staticClass:"flex flex-auto items-center justify-center"},[e("h3",{staticClass:"text-2xl font-bold"},[t._v(t._s(t.__("Nothing has already been uploaded")))])]):t._e()])]),t._v(" "),e("div",{staticClass:"ns-media-preview-panel hidden lg:block w-64 flex-shrink-0",attrs:{id:"preview"}},[e("div",{staticClass:"h-64 bg-gray-800 flex items-center justify-center"},[t.panelOpened?e("img",{attrs:{src:t.selectedResource.sizes.thumb,alt:t.selectedResource.name}}):t._e()]),t._v(" "),t.panelOpened?e("div",{staticClass:"p-4 text-gray-700 text-sm",attrs:{id:"details"}},[e("p",{staticClass:"flex flex-col mb-2"},[e("strong",{staticClass:"font-bold block"},[t._v(t._s(t.__("File Name"))+": ")]),e("span",[t._v(t._s(t.selectedResource.name))])]),t._v(" "),e("p",{staticClass:"flex flex-col mb-2"},[e("strong",{staticClass:"font-bold block"},[t._v(t._s(t.__("Uploaded At"))+":")]),e("span",[t._v(t._s(t.selectedResource.created_at))])]),t._v(" "),e("p",{staticClass:"flex flex-col mb-2"},[e("strong",{staticClass:"font-bold block"},[t._v(t._s(t.__("By"))+" :")]),e("span",[t._v(t._s(t.selectedResource.user.username))])])]):t._e()])]),t._v(" "),e("div",{staticClass:"p-2 flex ns-media-footer flex-shrink-0 justify-between"},[e("div",{staticClass:"flex -mx-2 flex-shrink-0"},[e("div",{staticClass:"px-2 flex-shrink-0 flex"},[e("div",{staticClass:"rounded shadow overflow-hidden flex text-sm"},[t.bulkSelect?e("div",{staticClass:"ns-button info"},[e("button",{staticClass:"py-2 px-3",on:{click:function(e){return t.cancelBulkSelect()}}},[e("i",{staticClass:"las la-times"})])]):t._e(),t._v(" "),t.hasOneSelected&&!t.bulkSelect?e("div",{staticClass:"ns-button info"},[e("button",{staticClass:"py-2 px-3",on:{click:function(e){t.bulkSelect=!0}}},[e("i",{staticClass:"las la-check-circle"})])]):t._e(),t._v(" "),t.hasOneSelected?e("div",{staticClass:"ns-button error"},[e("button",{staticClass:"py-2 px-3",on:{click:function(e){return t.deleteSelected()}}},[e("i",{staticClass:"las la-trash"})])]):t._e()])])]),t._v(" "),e("div",{staticClass:"flex-shrink-0 -mx-2 flex"},[e("div",{staticClass:"px-2"},[e("div",{staticClass:"rounded shadow overflow-hidden flex text-sm"},[e("div",{staticClass:"ns-button",class:1===t.response.current_page?"disabled cursor-not-allowed":"info"},[e("button",{staticClass:"p-2",attrs:{disabled:1===t.response.current_page},on:{click:function(e){return t.loadGallery(t.response.current_page-1)}}},[t._v(t._s(t.__("Previous")))])]),t._v(" "),e("hr",{staticClass:"border-r border-gray-700"}),t._v(" "),e("div",{staticClass:"ns-button",class:t.response.current_page===t.response.last_page?"disabled cursor-not-allowed":"info"},[e("button",{staticClass:"p-2",attrs:{disabled:t.response.current_page===t.response.last_page},on:{click:function(e){return t.loadGallery(t.response.current_page+1)}}},[t._v(t._s(t.__("Next")))])])])]),t._v(" "),t.popup&&t.hasOneSelected?e("div",{staticClass:"px-2"},[e("div",{staticClass:"ns-button info"},[e("button",{staticClass:"rounded shadow p-2 text-sm",on:{click:function(e){return t.useSelectedEntries()}}},[t._v(t._s(t.__("Use Selected")))])])]):t._e()])])]):t._e()])}),[],!1,null,null,null).exports},5927:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(1419),i=r(6121);const s={name:"ns-pos-customers-button",methods:{__:r(8094).__,openCustomerPopup:function(){(new n.G).open(i.Z)}},beforeDestroy:function(){nsHotPress.destroy("ns_pos_keyboard_create_customer")},mounted:function(){var t=this;for(var e in nsShortcuts)["ns_pos_keyboard_create_customer"].includes(e)&&nsHotPress.create("ns_pos_keyboard_create_customer").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e],(function(e){e.preventDefault(),t.openCustomerPopup()}))}};const o=(0,r(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-button default"},[e("button",{staticClass:"rounded shadow flex-shrink-0 h-12 flex items-center px-2 py-1 text-sm",on:{click:function(e){return t.openCustomerPopup()}}},[e("i",{staticClass:"mr-1 text-xl lar la-user-circle"}),t._v(" "),e("span",[t._v(t._s(t.__("Customers")))])])])}),[],!1,null,null,null).exports},6662:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const n={name:"ns-pos-dashboard-button",methods:{__:r(8094).__,goToDashboard:function(){return document.location=POS.settings.getValue().urls.dashboard_url}}};const i=(0,r(1900).Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-button success"},[e("button",{staticClass:"rounded shadow flex-shrink-0 h-12 flex items-center px-2 py-1 text-sm",on:{click:function(e){return t.goToDashboard()}}},[e("i",{staticClass:"mr-1 text-xl las la-tachometer-alt"}),t._v(" "),e("span",[t._v(t._s(t.__("Dashboard")))])])])}),[],!1,null,null,null).exports},5250:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(1419),i=r(1951);const s={name:"ns-pos-delivery-button",methods:{__:r(8094).__,openOrderTypeSelection:function(){new n.G({primarySelector:"#pos-app",popupClass:"shadow-lg bg-white w-3/5 md:w-2/3 lg:w-2/5 xl:w-2/4"}).open(i.Z)}},beforeDestroy:function(){nsHotPress.destroy("ns_pos_keyboard_order_type")},mounted:function(){var t=this;for(var e in nsShortcuts)["ns_pos_keyboard_order_type"].includes(e)&&nsHotPress.create("ns_pos_keyboard_order_type").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e],(function(e){e.preventDefault(),t.openOrderTypeSelection()}))}};const o=(0,r(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-button default"},[e("button",{staticClass:"rounded shadow flex-shrink-0 h-12 flex items-center px-2 py-1 text-sm",on:{click:function(e){return t.openOrderTypeSelection()}}},[e("i",{staticClass:"mr-1 text-xl las la-truck"}),t._v(" "),e("span",[t._v(t._s(t.__("Order Type")))])])])}),[],!1,null,null,null).exports},746:(t,e,r)=>{"use strict";r.d(e,{Z:()=>_});var n=r(1419),i=r(1487),s=r(2381),o=r(8094);const a={data:function(){return{products:[],isLoading:!1}},computed:{order:function(){return this.$popupParams.order}},mounted:function(){this.loadProducts()},methods:{__:o.__,close:function(){this.$popupParams.reject(!1),this.$popup.close()},loadProducts:function(){var t=this;this.isLoading=!0;var e=this.$popupParams.order.id;i.ih.get("/api/nexopos/v4/orders/".concat(e,"/products")).subscribe((function(e){t.isLoading=!1,t.products=e}))},openOrder:function(){this.$popup.close(),this.$popupParams.resolve(this.order)}}};var l=r(1900);const c=(0,l.Z)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-lg ns-box w-6/7-screen md:w-3/5-screen lg:w-2/5-screen h-6/7-screen flex flex-col overflow-hidden"},[e("div",{staticClass:"p-2 flex justify-between text-primary items-center border-b ns-box-header"},[e("h3",{staticClass:"font-semibold"},[t._v(t._s(t.__("Products"))+"  "+t._s(t.order.code)+" "),t.order.title?e("span",[t._v("("+t._s(t.order.title)+")")]):t._e()]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),e("div",{staticClass:"flex-auto p-2 overflow-y-auto ns-box-body"},[t.isLoading?e("div",{staticClass:"flex-auto relative"},[e("div",{staticClass:"h-full w-full flex items-center justify-center"},[e("ns-spinner")],1)]):t._e(),t._v(" "),t.isLoading?t._e():t._l(t.products,(function(r){return e("div",{key:r.id,staticClass:"item"},[e("div",{staticClass:"flex-col border-b border-info-primary py-2"},[e("div",{staticClass:"title font-semibold text-primary flex justify-between"},[e("span",[t._v(t._s(r.name)+" (x"+t._s(r.quantity)+")")]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(r.total_price)))])]),t._v(" "),e("div",{staticClass:"text-sm text-primary"},[e("ul",[e("li",[t._v(t._s(t.__("Unit"))+" : "+t._s(r.unit.name))])])])])])}))],2),t._v(" "),e("div",{staticClass:"flex justify-end p-2 border-t ns-box-footer"},[e("div",{staticClass:"px-1"},[e("div",{staticClass:"-mx-2 flex"},[e("div",{staticClass:"px-1"},[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.openOrder()}}},[t._v(t._s(t.__("Open")))])],1),t._v(" "),e("div",{staticClass:"px-1"},[e("ns-button",{attrs:{type:"error"},on:{click:function(e){return t.close()}}},[t._v(t._s(t.__("Close")))])],1)])])])])}),[],!1,null,null,null).exports;const u={props:["orders"],data:function(){return{searchField:"",columns:{rightColumn:[],leftColumn:[]}}},watch:{orders:function(){i.kq.doAction("ns-pos-pending-orders-refreshed",this.orders)}},mounted:function(){this.columns.leftColumn=i.kq.applyFilters("ns-pending-orders-left-column",[{label:(0,o.__)("Code"),value:function(t){return t.code}},{label:(0,o.__)("Cashier"),value:function(t){return t.nexopos_users_username}},{label:(0,o.__)("Total"),value:function(t){return t.total}},{label:(0,o.__)("Tendered"),value:function(t){return t.tendered}}]),this.columns.rightColumn=i.kq.applyFilters("ns-pending-orders-right-column",[{label:(0,o.__)("Customer"),value:function(t){return t.nexopos_customers_name}},{label:(0,o.__)("Date"),value:function(t){return t.created_at}},{label:(0,o.__)("Type"),value:function(t){return t.type}}])},name:"ns-pos-pending-order",methods:{__:o.__,previewOrder:function(t){this.$emit("previewOrder",t)},proceedOpenOrder:function(t){this.$emit("proceedOpenOrder",t)},searchOrder:function(){this.$emit("searchOrder",this.searchField)},printOrder:function(t){this.$emit("printOrder",t)}}};const d=(0,l.Z)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-auto flex-col overflow-hidden"},[e("div",{staticClass:"p-1"},[e("div",{staticClass:"flex rounded border input-group info"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchField,expression:"searchField"}],staticClass:"p-2 outline-none flex-auto",attrs:{type:"text"},domProps:{value:t.searchField},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchOrder()},input:function(e){e.target.composing||(t.searchField=e.target.value)}}}),t._v(" "),e("button",{staticClass:"w-16 md:w-24",on:{click:function(e){return t.searchOrder()}}},[e("i",{staticClass:"las la-search"}),t._v(" "),e("span",{staticClass:"mr-1 hidden md:visible"},[t._v(t._s(t.__("Search")))])])])]),t._v(" "),e("div",{staticClass:"overflow-y-auto flex flex-auto"},[e("div",{staticClass:"flex p-2 flex-auto flex-col overflow-y-auto"},[t._l(t.orders,(function(r){return e("div",{key:r.id,staticClass:"border-b ns-box-body w-full py-2",attrs:{"data-order-id":r.id}},[e("h3",{staticClass:"text-primary"},[t._v(t._s(r.title||"Untitled Order"))]),t._v(" "),e("div",{staticClass:"px-2"},[e("div",{staticClass:"flex flex-wrap -mx-4"},[e("div",{staticClass:"w-full md:w-1/2 px-2"},t._l(t.columns.leftColumn,(function(n,i){return e("p",{key:i,staticClass:"text-sm text-primary"},[e("strong",[t._v(t._s(n.label))]),t._v(" : "+t._s(n.value(r)))])})),0),t._v(" "),e("div",{staticClass:"w-full md:w-1/2 px-2"},t._l(t.columns.rightColumn,(function(n,i){return e("p",{key:i,staticClass:"text-sm text-primary"},[e("strong",[t._v(t._s(n.label))]),t._v(" : "+t._s(n.value(r)))])})),0)])]),t._v(" "),e("div",{staticClass:"flex justify-end w-full mt-2"},[e("div",{staticClass:"flex rounded-lg overflow-hidden ns-buttons"},[e("button",{staticClass:"info outline-none px-2 py-1",on:{click:function(e){return t.proceedOpenOrder(r)}}},[e("i",{staticClass:"las la-lock-open"}),t._v(" "+t._s(t.__("Open")))]),t._v(" "),e("button",{staticClass:"success outline-none px-2 py-1",on:{click:function(e){return t.previewOrder(r)}}},[e("i",{staticClass:"las la-eye"}),t._v(" "+t._s(t.__("Products")))]),t._v(" "),e("button",{staticClass:"warning outline-none px-2 py-1",on:{click:function(e){return t.printOrder(r)}}},[e("i",{staticClass:"las la-print"}),t._v(" "+t._s(t.__("Print")))])])])])})),t._v(" "),0===t.orders.length?e("div",{staticClass:"h-full v-full items-center justify-center flex"},[e("h3",{staticClass:"text-semibold text-primary"},[t._v(t._s(t.__("Nothing to display...")))])]):t._e()],2)])])}),[],!1,null,null,null).exports;var f=r(3216),p=r(2867);const h={components:{nsPosPendingOrders:d},methods:{__:o.__,popupResolver:f.Z,popupCloser:p.Z,searchOrder:function(t){var e=this;i.ih.get("/api/nexopos/v4/crud/".concat(this.active,"?search=").concat(t)).subscribe((function(t){e.orders=t.data}))},setActiveTab:function(t){this.active=t,this.loadOrderFromType(t)},openOrder:function(t){POS.loadOrder(t.id),this.$popup.close()},loadOrderFromType:function(t){var e=this;i.ih.get("/api/nexopos/v4/crud/".concat(t)).subscribe((function(t){e.orders=t.data}))},previewOrder:function(t){var e=this;new Promise((function(e,r){Popup.show(c,{order:t,resolve:e,reject:r})})).then((function(r){e.proceedOpenOrder(t)}),(function(t){return t}))},printOrder:function(t){POS.print.process(t.id,"sale")},proceedOpenOrder:function(t){var e=this;if(POS.products.getValue().length>0)return Popup.show(s.default,{title:"Confirm Your Action",message:"The cart is not empty. Opening an order will clear your cart would you proceed ?",onAction:function(r){r&&e.openOrder(t)}});this.openOrder(t)}},data:function(){return{active:"ns.hold-orders",searchField:"",orders:[]}},mounted:function(){var t=this;this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&t.$popup.close()})),this.loadOrderFromType(this.active),this.popupCloser()}};const v=(0,l.Z)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-lg ns-box w-6/7-screen md:w-3/5-screen lg:w-2/5-screen h-6/7-screen flex flex-col overflow-hidden"},[e("div",{staticClass:"p-2 flex justify-between text-primary items-center ns-box-header border-b"},[e("h3",{staticClass:"font-semibold"},[t._v(t._s(t.__("Orders")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.$popup.close()}}})],1)]),t._v(" "),e("div",{staticClass:"p-2 flex overflow-hidden flex-auto ns-box-body"},[e("ns-tabs",{attrs:{active:t.active},on:{changeTab:function(e){return t.setActiveTab(e)}}},[e("ns-tabs-item",{staticClass:"flex flex-col overflow-hidden",attrs:{identifier:"ns.hold-orders",label:t.__("On Hold"),padding:"p-0"}},[e("ns-pos-pending-orders",{attrs:{orders:t.orders},on:{searchOrder:function(e){return t.searchOrder(e)},previewOrder:function(e){return t.previewOrder(e)},printOrder:function(e){return t.printOrder(e)},proceedOpenOrder:function(e){return t.proceedOpenOrder(e)}}})],1),t._v(" "),e("ns-tabs-item",{staticClass:"flex flex-col overflow-hidden",attrs:{identifier:"ns.unpaid-orders",label:t.__("Unpaid"),padding:"p-0"}},[e("ns-pos-pending-orders",{attrs:{orders:t.orders},on:{searchOrder:function(e){return t.searchOrder(e)},previewOrder:function(e){return t.previewOrder(e)},printOrder:function(e){return t.printOrder(e)},proceedOpenOrder:function(e){return t.proceedOpenOrder(e)}}})],1),t._v(" "),e("ns-tabs-item",{staticClass:"flex flex-col overflow-hidden",attrs:{identifier:"ns.partially-paid-orders",label:t.__("Partially Paid"),padding:"p-0"}},[e("ns-pos-pending-orders",{attrs:{orders:t.orders},on:{searchOrder:function(e){return t.searchOrder(e)},previewOrder:function(e){return t.previewOrder(e)},printOrder:function(e){return t.printOrder(e)},proceedOpenOrder:function(e){return t.proceedOpenOrder(e)}}})],1)],1)],1),t._v(" "),e("div",{staticClass:"p-2 flex justify-between ns-box-footer border-t"},[e("div"),t._v(" "),e("div",[e("ns-button",{attrs:{type:"info"}},[t._v(t._s(t.__("Close")))])],1)])])}),[],!1,null,null,null).exports,m={name:"ns-pos-pending-orders-button",methods:{__:o.__,openPendingOrdersPopup:function(){(new n.G).open(v)}}};const _=(0,l.Z)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-button default"},[e("button",{staticClass:"rounded shadow flex-shrink-0 h-12 flex items-center px-2 py-1 text-sm",on:{click:function(e){return t.openPendingOrdersPopup()}}},[e("i",{staticClass:"mr-1 text-xl lar la-hand-pointer"}),t._v(" "),e("span",[t._v(t._s(t.__("Orders")))])])])}),[],!1,null,null,null).exports},2881:(t,e,r)=>{"use strict";r.d(e,{Z:()=>D});var n=r(1487),i=r(8321),s=r(3658),o=r(2867),a=r(2381),l=r(8094);const c={components:{nsNumpad:i.Z},data:function(){return{amount:0,title:null,identifier:null,settingsSubscription:null,settings:null,action:null,register:null,loaded:!1,register_id:null,validation:new s.Z,fields:[]}},mounted:function(){var t=this;this.title=this.$popupParams.title,this.identifier=this.$popupParams.identifier,this.register=this.$popupParams.register,this.action=this.$popupParams.action,this.register_id=this.$popupParams.register_id,this.settingsSubscription=POS.settings.subscribe((function(e){t.settings=e})),this.loadFields()},destroyed:function(){this.settingsSubscription.unsubscribe()},methods:{popupCloser:o.Z,__:l.__,definedValue:function(t){this.amount=t},close:function(){this.$popup.close()},loadFields:function(){var t=this;this.loaded=!1,nsHttpClient.get("/api/nexopos/v4/fields/".concat(this.identifier)).subscribe((function(e){t.loaded=!0,t.fields=e}),(function(e){return t.loaded=!0,nsSnackBar.error(e.message,"OKAY",{duration:!1}).subscribe()}))},submit:function(t){var e=this;Popup.show(a.default,{title:"Confirm Your Action",message:this.$popupParams.confirmMessage||"Would you like to confirm your action.",onAction:function(t){t&&e.triggerSubmit()}})},triggerSubmit:function(){var t=this,e=this.validation.extractFields(this.fields);e.amount=""===this.amount?0:this.amount,nsHttpClient.post("/api/nexopos/v4/cash-registers/".concat(this.action,"/").concat(this.register_id||this.settings.register.id),e).subscribe({next:function(e){t.$popupParams.resolve(e),t.$popup.close(),nsSnackBar.success(e.message).subscribe()},error:function(t){nsSnackBar.error(t.message).subscribe()}})}}};var u=r(1900);const d=(0,u.Z)(c,(function(){var t=this,e=t._self._c;return e("div",[t.loaded?e("div",{staticClass:"shadow-lg w-95vw md:w-2/5-screen ns-box"},[e("div",{staticClass:"border-b ns-box-header p-2 text-primary flex justify-between items-center"},[e("h3",{staticClass:"font-semibold"},[t._v(t._s(t.title))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),e("div",{staticClass:"p-2"},[null!==t.register?e("div",{staticClass:"mb-2 p-3 elevation-surface font-bold border text-right flex justify-between"},[e("span",[t._v(t._s(t.__("Balance"))+" ")]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.register.balance)))])]):t._e(),t._v(" "),e("div",{staticClass:"mb-2 p-3 elevation-surface success border font-bold text-right flex justify-between"},[e("span",[t._v(t._s(t.__("Input")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.amount)))])]),t._v(" "),e("div",{staticClass:"mb-2"},[e("ns-numpad",{attrs:{floating:!0,value:t.amount},on:{next:function(e){return t.submit(e)},changed:function(e){return t.definedValue(e)}}})],1),t._v(" "),t._l(t.fields,(function(t,r){return e("ns-field",{key:r,attrs:{field:t}})}))],2)]):t._e(),t._v(" "),t.loaded?t._e():e("div",{staticClass:"h-full w-full flex items-center justify-center"},[e("ns-spinner")],1)])}),[],!1,null,null,null).exports;var f=r(3216);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(){h=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var s=e&&e.prototype instanceof b?e:b,o=Object.create(s.prototype),a=new $(n||[]);return i(o,"_invoke",{value:O(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",v="suspendedYield",m="executing",_="completed",y={};function b(){}function g(){}function x(){}var w={};c(w,o,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(F([])));k&&k!==r&&n.call(k,o)&&(w=k);var P=x.prototype=b.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,s,o,a){var l=d(t[i],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==p(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function O(e,r,n){var i=f;return function(s,o){if(i===m)throw new Error("Generator is already running");if(i===_){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?_:v,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var s=d(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,y;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(p(e)+" is not iterable")}return g.prototype=x,i(P,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:g,configurable:!0}),g.displayName=c(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,c(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},j(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new S(u(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(P),c(P,l,"Generator"),c(P,o,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function v(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}const m={components:{nsNumpad:i.Z},data:function(){return{registers:[],priorVerification:!1,hasLoadedRegisters:!1,validation:new s.Z,amount:0,settings:null,settingsSubscription:null}},mounted:function(){var t=this;this.checkUsedRegister(),this.settingsSubscription=POS.settings.subscribe((function(e){t.settings=e}))},beforeDestroy:function(){this.settingsSubscription.unsubscribe()},computed:{},methods:{__:l.__,popupResolver:f.Z,selectRegister:function(t){var e,r=this;return(e=h().mark((function e(){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("closed"===t.status){e.next=2;break}return e.abrupt("return",n.kX.error((0,l.__)("Unable to open this register. Only closed register can be opened.")).subscribe());case 2:return e.prev=2,e.next=5,new Promise((function(e,r){var n=(0,l.__)("Open Register : %s").replace("%s",t.name),i=t.id;Popup.show(d,{resolve:e,reject:r,title:n,identifier:"ns.cash-registers-opening",register:t,action:"open",register_id:i})}));case 5:i=e.sent,r.popupResolver(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(t){v(s,n,i,o,a,"next",t)}function a(t){v(s,n,i,o,a,"throw",t)}o(void 0)}))})()},checkUsedRegister:function(){var t=this;this.priorVerification=!1,n.ih.get("/api/nexopos/v4/cash-registers/used").subscribe({next:function(e){t.$popupParams.resolve(e),t.$popup.close()},error:function(e){t.priorVerification=!0,n.kX.error(e.message).subscribe(),t.loadRegisters()}})},loadRegisters:function(){var t=this;this.hasLoadedRegisters=!1,n.ih.get("/api/nexopos/v4/cash-registers").subscribe((function(e){t.registers=e,t.hasLoadedRegisters=!0}))},getClass:function(t){switch(t.status){case"in-use":return"elevation-surface warning cursor-not-allowed";case"disabled":return"elevation-surface cursor-not-allowed";case"available":return"elevation-surface success"}return"elevation-surface hoverable cursor-pointer"}}};const _=(0,u.Z)(m,(function(){var t=this,e=t._self._c;return e("div",[!1===t.priorVerification?e("div",{staticClass:"h-full w-full py-10 flex justify-center items-center"},[e("ns-spinner",{attrs:{size:"24",border:"8"}})],1):t._e(),t._v(" "),t.priorVerification?e("div",{staticClass:"w-95vw md:w-3/5-screen lg:w-3/5-screen xl:w-2/5-screen flex flex-col overflow-hidden",class:t.priorVerification?"shadow-lg ns-box":"",attrs:{id:"ns-pos-cash-registers-popup"}},[[e("div",{staticClass:"title p-2 border-b ns-box-header flex justify-between items-center"},[e("h3",{staticClass:"font-semibold"},[t._v(t._s(t.__("Open The Register")))]),t._v(" "),t.settings?e("div",[e("a",{staticClass:"rounded-full border ns-close-button px-3 text-sm py-1",attrs:{href:t.settings.urls.orders_url}},[t._v(t._s(t.__("Exit To Orders")))])]):t._e()]),t._v(" "),t.hasLoadedRegisters?t._e():e("div",{staticClass:"py-10 flex-auto overflow-y-auto flex items-center justify-center"},[e("ns-spinner",{attrs:{size:"16",border:"4"}})],1),t._v(" "),t.hasLoadedRegisters?e("div",{staticClass:"flex-auto overflow-y-auto"},[e("div",{staticClass:"grid grid-cols-3"},t._l(t.registers,(function(r,n){return e("div",{key:n,staticClass:"border flex items-center justify-center flex-col p-3",class:t.getClass(r),on:{click:function(e){return t.selectRegister(r)}}},[e("i",{staticClass:"las la-cash-register text-6xl"}),t._v(" "),e("h3",{staticClass:"text-semibold text-center"},[t._v(t._s(r.name))]),t._v(" "),e("span",{staticClass:"text-sm"},[t._v("("+t._s(r.status_label)+")")])])})),0),t._v(" "),0===t.registers.length?e("div",{staticClass:"p-2 alert text-white"},[t._v("\n                    "+t._s(t.__("Looks like there is no registers. At least one register is required to proceed."))+"  "),e("a",{staticClass:"font-bold hover:underline",attrs:{href:t.settings.urls.registers_url}},[t._v(t._s(t.__("Create Cash Register")))])]):t._e()]):t._e()]],2):t._e()])}),[],!1,null,null,null).exports;const y={data:function(){return{totalIn:0,totalOut:0,settings:null,settingsSubscription:null,histories:[]}},mounted:function(){var t=this;this.settingsSubscription=POS.settings.subscribe((function(e){t.settings=e})),this.getHistory()},destroyed:function(){this.settingsSubscription.unsubscribe()},methods:{__:l.__,popupResolver:f.Z,closePopup:function(){this.popupResolver({status:"success"})},getHistory:function(){var t=this;n.ih.get("/api/nexopos/v4/cash-registers/session-history/".concat(this.settings.register.id)).subscribe((function(e){t.histories=e,t.totalIn=t.histories.filter((function(t){return["register-opening","register-sale","register-cash-in"].includes(t.action)})).map((function(t){return parseFloat(t.value)})).reduce((function(t,e){return t+e}),0),t.totalOut=t.histories.filter((function(t){return["register-closing","register-refund","register-cash-out"].includes(t.action)})).map((function(t){return parseFloat(t.value)})).reduce((function(t,e){return t+e}),0),console.log(t.totalOut)}))}}};const b=(0,u.Z)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-box shadow-lg w-95vw md:w-4/6-screen lg:w-half overflow-hidden"},[e("div",{staticClass:"p-2 flex justify-between items-center ns-box-header",attrs:{id:"header"}},[e("h3",{staticClass:"font-bold"},[t._v(t._s(t.__("Register History")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:t.closePopup}})],1)]),t._v(" "),e("div",{staticClass:"flex w-full ns-box-body"},[e("div",{staticClass:"flex flex-auto"},[e("div",{staticClass:"w-full md:w-1/2 text-right bg-success-primary text-white font-bold text-3xl p-3"},[t._v(t._s(t._f("currency")(t.totalIn)))]),t._v(" "),e("div",{staticClass:"w-full md:w-1/2 text-right bg-error-primary text-white font-bold text-3xl p-3"},[t._v(t._s(t._f("currency")(t.totalOut)))])])]),t._v(" "),e("div",{staticClass:"flex flex-col overflow-y-auto h-120"},[t._l(t.histories,(function(r){return[["register-sale","register-cash-in"].includes(r.action)?e("div",{key:r.id,staticClass:"flex border-b elevation-surface success"},[e("div",{staticClass:"p-2 flex-auto"},[t._v(t._s(r.label))]),t._v(" "),e("div",{staticClass:"flex-auto text-right p-2"},[t._v(t._s(t._f("currency")(r.value)))])]):t._e(),t._v(" "),["register-opening"].includes(r.action)?e("div",{key:r.id,staticClass:"flex border-b elevation-surface"},[e("div",{staticClass:"p-2 flex-auto"},[t._v(t._s(r.label))]),t._v(" "),e("div",{staticClass:"flex-auto text-right p-2"},[t._v(t._s(t._f("currency")(r.value)))])]):t._e(),t._v(" "),["register-close"].includes(r.action)?e("div",{key:r.id,staticClass:"flex border-b elevation-surface info"},[e("div",{staticClass:"p-2 flex-auto"},[t._v(t._s(r.label))]),t._v(" "),e("div",{staticClass:"flex-auto text-right p-2"},[t._v(t._s(t._f("currency")(r.value)))])]):t._e(),t._v(" "),["register-refund","register-cash-out"].includes(r.action)?e("div",{key:r.id,staticClass:"flex border-b elevation-surface error"},[e("div",{staticClass:"p-2 flex-auto"},[t._v(t._s(r.label))]),t._v(" "),e("div",{staticClass:"flex-auto text-right p-2"},[t._v(t._s(t._f("currency")(r.value)))])]):t._e()]}))],2)])}),[],!1,null,null,null).exports;function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function x(){x=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var s=e&&e.prototype instanceof _?e:_,o=Object.create(s.prototype),a=new $(n||[]);return i(o,"_invoke",{value:O(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function _(){}function y(){}function b(){}var w={};c(w,o,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(F([])));k&&k!==r&&n.call(k,o)&&(w=k);var P=b.prototype=_.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,s,o,a){var l=d(t[i],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==g(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function O(e,r,n){var i=f;return function(s,o){if(i===h)throw new Error("Generator is already running");if(i===v){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?v:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=v,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=d(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(g(e)+" is not iterable")}return y.prototype=b,i(P,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},j(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new S(u(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(P),c(P,l,"Generator"),c(P,o,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){k(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var s=t.apply(e,r);function o(t){P(s,n,i,o,a,"next",t)}function a(t){P(s,n,i,o,a,"throw",t)}o(void 0)}))}}const S={mounted:function(){var t=this;this.settingsSubscriber=POS.settings.subscribe((function(e){t.settings=e})),this.popupCloser(),this.loadRegisterSummary()},beforeDestroy:function(){this.settingsSubscriber.unsubscribe()},data:function(){return{settings:null,settingsSubscriber:null,register:{}}},methods:{__:l.__,popupResolver:f.Z,popupCloser:o.Z,loadRegisterSummary:function(){var t=this;nsHttpClient.get("/api/nexopos/v4/cash-registers/".concat(this.settings.register.id)).subscribe((function(e){t.register=e}))},closePopup:function(){this.popupResolver({status:"failed",button:"close_popup"})},closeCashRegister:function(t){var e=this;return j(x().mark((function r(){var n;return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,new Promise((function(e,r){Popup.show(d,{title:(0,l.__)("Close Register"),action:"close",identifier:"ns.cash-registers-closing",register:t,resolve:e,reject:r})}));case 3:n=r.sent,POS.unset("register"),e.popupResolver(C({button:"close_register"},n)),r.next=11;break;case 8:throw r.prev=8,r.t0=r.catch(0),r.t0;case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},cashIn:function(t){var e=this;return j(x().mark((function r(){var n;return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,new Promise((function(e,r){Popup.show(d,{title:(0,l.__)("Cash In"),action:"register-cash-in",register:t,identifier:"ns.cash-registers-cashing",resolve:e,reject:r})}));case 3:n=r.sent,e.popupResolver(C({button:"close_register"},n)),r.next=10;break;case 7:throw r.prev=7,r.t0=r.catch(0),r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},cashOut:function(t){var e=this;return j(x().mark((function r(){var n;return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,new Promise((function(e,r){Popup.show(d,{title:(0,l.__)("Cash Out"),action:"register-cash-out",register:t,identifier:"ns.cash-registers-cashout",resolve:e,reject:r})}));case 3:n=r.sent,e.popupResolver(C({button:"close_register"},n)),r.next=10;break;case 7:throw r.prev=7,r.t0=r.catch(0),r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},historyPopup:function(t){return j(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,r){Popup.show(b,{resolve:e,reject:r,register:t})}));case 3:e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}};const O=(0,u.Z)(S,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-lg w-95vw md:w-3/5-screen lg:w-2/4-screen ns-box"},[e("div",{staticClass:"p-2 border-b ns-box-header flex items-center justify-between"},[e("h3",[t._v(t._s(t.__("Register Options")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.closePopup()}}})],1)]),t._v(" "),void 0!==t.register.total_sale_amount&&void 0!==t.register.balance?e("div",[e("div",{staticClass:"h-16 text-3xl elevation-surface info flex items-center justify-between px-3"},[e("span",{},[t._v(t._s(t.__("Sales")))]),t._v(" "),e("span",{staticClass:"font-bold"},[t._v(t._s(t._f("currency")(t.register.total_sale_amount)))])]),t._v(" "),e("div",{staticClass:"h-16 text-3xl elevation-surface success flex items-center justify-between px-3"},[e("span",{},[t._v(t._s(t.__("Balance")))]),t._v(" "),e("span",{staticClass:"font-bold"},[t._v(t._s(t._f("currency")(t.register.balance)))])])]):t._e(),t._v(" "),void 0===t.register.total_sale_amount&&void 0===t.register.balance?e("div",{staticClass:"h-32 ns-box-body border-b py-1 flex items-center justify-center"},[e("div",[e("ns-spinner",{attrs:{border:"4",size:"16"}})],1)]):t._e(),t._v(" "),e("div",{staticClass:"grid grid-cols-2 text-primary"},[e("div",{staticClass:"border-r border-b py-4 ns-numpad-key info cursor-pointer px-2 flex items-center justify-center flex-col",on:{click:function(e){return t.closeCashRegister(t.register)}}},[e("i",{staticClass:"las la-sign-out-alt text-6xl"}),t._v(" "),e("h3",{staticClass:"text-xl font-bold"},[t._v(t._s(t.__("Close")))])]),t._v(" "),e("div",{staticClass:"ns-numpad-key success border-r border-b py-4 cursor-pointer px-2 flex items-center justify-center flex-col",on:{click:function(e){return t.cashIn(t.register)}}},[e("i",{staticClass:"las la-plus-circle text-6xl"}),t._v(" "),e("h3",{staticClass:"text-xl font-bold"},[t._v(t._s(t.__("Cash In")))])]),t._v(" "),e("div",{staticClass:"ns-numpad-key error border-r border-b py-4 cursor-pointer px-2 flex items-center justify-center flex-col",on:{click:function(e){return t.cashOut(t.register)}}},[e("i",{staticClass:"las la-minus-circle text-6xl"}),t._v(" "),e("h3",{staticClass:"text-xl font-bold"},[t._v(t._s(t.__("Cash Out")))])]),t._v(" "),e("div",{staticClass:"ns-numpad-key info border-r border-b py-4 cursor-pointer px-2 flex items-center justify-center flex-col",on:{click:function(e){return t.historyPopup(t.register)}}},[e("i",{staticClass:"las la-history text-6xl"}),t._v(" "),e("h3",{staticClass:"text-xl font-bold"},[t._v(t._s(t.__("History")))])])])])}),[],!1,null,null,null).exports;function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function T(){T=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var s=e&&e.prototype instanceof _?e:_,o=Object.create(s.prototype),a=new $(n||[]);return i(o,"_invoke",{value:j(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function _(){}function y(){}function b(){}var g={};c(g,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(F([])));w&&w!==r&&n.call(w,o)&&(g=w);var C=b.prototype=_.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(i,s,o,a){var l=d(t[i],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==E(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function j(e,r,n){var i=f;return function(s,o){if(i===h)throw new Error("Generator is already running");if(i===v){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?v:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=v,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=d(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(E(e)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,a,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new P(u(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function L(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var s=t.apply(e,r);function o(t){L(s,n,i,o,a,"next",t)}function a(t){L(s,n,i,o,a,"throw",t)}o(void 0)}))}}const F={data:function(){return{order:null,name:"",selectedRegister:null,orderSubscriber:null,settingsSubscriber:null}},watch:{},methods:{__:l.__,openRegisterOptions:function(){var t=this;return $(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(t,e){Popup.show(O,{resolve:t,reject:e})}));case 3:"close_register"===e.sent.button&&(delete t.settings.register,POS.settings.next(t.settings),POS.reset()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object.keys(e.t0).length>0&&n.kX.error(e.t0.message).subscribe();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},registerInitialQueue:function(){var t=this;POS.initialQueue.push($(T().mark((function e(){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,r){void 0===t.settings.register&&Popup.show(_,{resolve:e,reject:r})}));case 3:return r=e.sent,POS.set("register",r.data.register),t.setRegister(r.data.register),e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))))},setButtonName:function(){if(void 0===this.settings.register)return this.name=(0,l.__)("Cash Register");this.name=(0,l.__)("Cash Register : {register}").replace("{register}",this.settings.register.name)},setRegister:function(t){if(void 0!==t){var e=POS.order.getValue();e.register_id=t.id,POS.order.next(e)}}},destroyed:function(){this.orderSubscriber.unsubscribe(),this.settingsSubscriber.unsubscribe()},mounted:function(){var t=this;this.registerInitialQueue(),this.orderSubscriber=POS.order.subscribe((function(e){t.order=e})),this.settingsSubscriber=POS.settings.subscribe((function(e){t.settings=e,t.setRegister(t.settings.register),t.setButtonName()}))}};const D=(0,u.Z)(F,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-button default"},[e("button",{staticClass:"rounded shadow flex-shrink-0 h-12 flex items-center px-2 py-1 text-sm",on:{click:function(e){return t.openRegisterOptions()}}},[e("i",{staticClass:"mr-1 text-xl las la-cash-register"}),t._v(" "),e("span",[t._v(t._s(t.name))])])])}),[],!1,null,null,null).exports},9323:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var n=r(1419),i=(r(6121),r(2381)),s=r(2867);const o={name:"ns-pos-customers-button",mounted:function(){this.popupCloser()},methods:{__,popupCloser:s.Z,reset:function(){n.G.show(i.default,{title:__("Confirm Your Action"),message:__("The current order will be cleared. But not deleted if it's persistent. Would you like to proceed ?"),onAction:function(t){t&&POS.reset()}})}}};const a=(0,r(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-button error"},[e("button",{staticClass:"rounded shadow flex-shrink-0 h-12 flex items-center px-2 py-1 text-sm",on:{click:function(e){return t.reset()}}},[e("i",{staticClass:"mr-1 text-xl las la-eraser"}),t._v(" "),e("span",[t._v(t._s(t.__("Reset")))])])])}),[],!1,null,null,null).exports},9326:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});const n={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var t=this;this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&(void 0!==t.$popupParams.onAction&&t.$popupParams.onAction(!1),t.$popup.close())}))},methods:{__:r(8094).__,emitAction:function(t){void 0!==this.$popupParams.onAction&&this.$popupParams.onAction(t),this.$popup.close()}}};const i=(0,r(1900).Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-6/7-screen md:w-4/7-screen lg:w-3/7-screen flex flex-col shadow-lg",class:t.size,attrs:{id:"alert-popup"}},[e("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[t.title?e("h2",{staticClass:"text-3xl font-body"},[t._v(t._s(t.title))]):t._e(),t._v(" "),e("p",{staticClass:"py-4 text-center"},[t._v(t._s(t.message))])]),t._v(" "),e("div",{staticClass:"action-buttons flex border-t justify-end items-center p-2"},[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.emitAction(!0)}}},[t._v(t._s(t.__("Ok")))])],1)])}),[],!1,null,null,null).exports},1588:(t,e,r)=>{"use strict";r.d(e,{Z:()=>et});var n=r(1487),i=r(3515),s=r(2277),o=r(3658),a=r(2867),l=r(8094);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const p={mounted:function(){this.popuCloser(),this.loadFields(),this.product=this.$popupParams.product},data:function(){return{formValidation:new o.Z,fields:[],product:null}},methods:{__:l.__,popuCloser:a.Z,close:function(){this.$popupParams.reject(!1),this.$popup.close()},addProduct:function(){if(this.formValidation.validateFields(this.fields),this.formValidation.fieldsValid(this.fields)){var t=this.formValidation.extractFields(this.fields),e=d(d({},this.product),t);return this.$popupParams.resolve(e),console.log(t,e),this.close()}n.kX.error((0,l.__)("The form is not valid.")).subscribe()},loadFields:function(){var t=this;n.ih.get("/api/nexopos/v4/fields/ns.refund-product").subscribe((function(e){t.fields=t.formValidation.createFields(e),t.fields.forEach((function(e){e.value=t.product[e.name]||""}))}))}}};var h=r(1900);const v=(0,h.Z)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-xl ns-box w-95vw md:w-3/5-screen lg:w-3/7-screen h-95vh md:h-3/5-screen lg:h-3/7-screen overflow-hidden flex flex-col"},[e("div",{staticClass:"p-2 flex justify-between border-b ns-box-header items-center"},[e("h3",{staticClass:"text-semibold"},[t._v(t._s(t.__("Products")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),e("div",{staticClass:"flex-auto overflow-y-auto relative ns-scrollbar"},[e("div",{staticClass:"p-2"},t._l(t.fields,(function(t,r){return e("ns-field",{key:r,attrs:{field:t}})})),1),t._v(" "),0===t.fields.length?e("div",{staticClass:"h-full w-full flex items-center justify-center"},[e("ns-spinner")],1):t._e()]),t._v(" "),e("div",{staticClass:"p-2 flex justify-between items-center border-t ns-box-body"},[e("div"),t._v(" "),e("div",[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.addProduct()}}},[t._v(t._s(t.__("Add Product")))])],1)])])}),[],!1,null,null,null).exports;var m=r(3216),_=r(8321);const y={components:{nsNumpad:_.Z},data:function(){return{product:null,seeValue:0,availableQuantity:0}},mounted:function(){this.product=this.$popupParams.product,this.availableQuantity=this.$popupParams.availableQuantity,this.seeValue=this.product.quantity},methods:{__:l.__,popupResolver:m.Z,close:function(){this.$popupParams.reject(!1),this.$popup.close()},setChangedValue:function(t){this.seeValue=t},updateQuantity:function(t){if(t>this.availableQuantity)return n.kX.error("Unable to proceed as the quantity provided is exceed the available quantity.").subscribe();this.product.quantity=parseFloat(t),this.$popupParams.resolve(this.product),this.$popup.close()}}};const b=(0,h.Z)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-xl ns-box overflow-hidden w-95vw md:w-4/6-screen lg:w-3/7-screen"},[e("div",{staticClass:"p-2 flex justify-between ns-box-header"},[e("h3",{staticClass:"font-semibold"},[t._v(t._s(t.__("Quantity")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),t.product?e("div",{staticClass:"border-t border-b ns-box-body py-2 flex items-center justify-center text-2xl font-semibold"},[e("span",[t._v(t._s(t.seeValue))]),t._v(" "),e("span",{staticClass:"text-primary text-sm"},[t._v("("+t._s(t.availableQuantity)+" "+t._s(t.__("available"))+")")])]):t._e(),t._v(" "),t.product?e("div",{staticClass:"flex-auto overflow-y-auto p-2"},[e("ns-numpad",{attrs:{value:t.product.quantity},on:{next:function(e){return t.updateQuantity(e)},changed:function(e){return t.setChangedValue(e)}}})],1):t._e()])}),[],!1,null,null,null).exports;var g=r(2909),x=r(2381),w=r(1419),C=r(5494);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===k(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const O={components:{nsNumpad:_.Z},props:["order"],computed:{screenValue:function(){var t=parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(t){return 0})).join(""));return this.screen/t},total:function(){return this.refundables.length>0?this.refundables.map((function(t){return parseFloat(t.unit_price)*parseFloat(t.quantity)})).reduce((function(t,e){return t+e}))+this.shippingFees:0+this.shippingFees},shippingFees:function(){return this.refundShipping?this.order.shipping:0}},data:function(){return{isSubmitting:!1,formValidation:new o.Z,refundables:[],paymentOptions:[],paymentField:[],print:new C.Z({urls:systemUrls,options:systemOptions}),refundShipping:!1,selectedPaymentGateway:!1,screen:0,selectFields:[{type:"select",options:this.order.products.map((function(t){return{label:"".concat(t.name," - ").concat(t.unit.name," (x").concat(t.quantity,")"),value:t.id}})),validation:"required",name:"product_id",label:(0,l.__)("Product"),description:(0,l.__)("Select the product to perform a refund.")}]}},methods:{__:l.__,updateScreen:function(t){this.screen=t},toggleRefundShipping:function(t){this.refundShipping=t,this.refundShipping},proceedPayment:function(){var t=this;return!1===this.selectedPaymentGateway?n.kX.error((0,l.__)("Please select a payment gateway before proceeding.")).subscribe():0===this.total?n.kX.error((0,l.__)("There is nothing to refund.")).subscribe():0===this.screenValue?n.kX.error((0,l.__)("Please provide a valid payment amount.")).subscribe():void w.G.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("The refund will be made on the current order."),onAction:function(e){e&&t.doProceed()}})},doProceed:function(){var t=this,e={products:this.refundables,total:this.screenValue,payment:this.selectedPaymentGateway,refund_shipping:this.refundShipping};this.isSubmitting=!0,n.ih.post("/api/nexopos/v4/orders/".concat(this.order.id,"/refund"),e).subscribe({next:function(e){t.isSubmitting=!1,t.$emit("changed",!0),"refunded"===e.data.order.payment_status&&t.$emit("loadTab","details"),t.print.process(e.data.orderRefund.id,"refund"),n.kX.success(e.message).subscribe()},error:function(e){t.isSubmitting=!1,n.kX.error(e.message).subscribe()}})},addProduct:function(){var t=this;if(this.formValidation.validateFields(this.selectFields),!this.formValidation.fieldsValid(this.selectFields))return n.kX.error((0,l.__)("Please select a product before proceeding.")).subscribe();var e=this.formValidation.extractFields(this.selectFields),r=this.order.products.filter((function(t){return t.id===e.product_id})),i=this.refundables.filter((function(t){return t.id===e.product_id}));if(i.length>0){var s=i.map((function(t){return parseInt(t.quantity)})).reduce((function(t,e){return t+e}));if(s===r[0].quantity)return n.kX.error((0,l.__)("Not enough quantity to proceed.")).subscribe()}if(0===r[0].quantity)return n.kX.error((0,l.__)("Not enough quantity to proceed.")).subscribe();var o=j(j({},r[0]),{condition:"",description:""});new Promise((function(t,e){w.G.show(v,{resolve:t,reject:e,product:o})})).then((function(e){e.quantity=t.getProductOriginalQuantity(e.id)-t.getProductUsedQuantity(e.id),t.refundables.push(e)}),(function(t){return t}))},getProductOriginalQuantity:function(t){var e=this.order.products.filter((function(e){return e.id===t}));return e.length>0?e.map((function(t){return parseFloat(t.quantity)})).reduce((function(t,e){return t+e})):0},getProductUsedQuantity:function(t){var e=this.refundables.filter((function(e){return e.id===t}));return e.length>0?e.map((function(t){return parseFloat(t.quantity)})).reduce((function(t,e){return t+e})):0},openSettings:function(t){var e=this;new Promise((function(e,r){w.G.show(v,{resolve:e,reject:r,product:t})})).then((function(r){var n=e.refundables.indexOf(t);e.$set(e.refundables,n,r)}),(function(t){return t}))},selectPaymentGateway:function(){var t=this;new Promise((function(e,r){w.G.show(g.Z,j({resolve:e,reject:r,value:[t.selectedPaymentOption]},t.paymentField[0]))})).then((function(e){t.selectedPaymentGateway=e[0]}),(function(t){return t}))},changeQuantity:function(t){var e=this;new Promise((function(r,n){var i=e.getProductOriginalQuantity(t.id)-e.getProductUsedQuantity(t.id)+parseFloat(t.quantity);w.G.show(b,{resolve:r,reject:n,product:t,availableQuantity:i})})).then((function(r){if(r.quantity>e.getProductUsedQuantity(t.id)-t.quantity){var n=e.refundables.indexOf(t);e.$set(e.refundables,n,r)}}))},deleteProduct:function(t){var e=this;new Promise((function(r,n){w.G.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this product ?"),onAction:function(r){if(r){var n=e.refundables.indexOf(t);e.refundables.splice(n,1)}}})}))}},mounted:function(){var t=this;this.selectFields=this.formValidation.createFields(this.selectFields),n.ih.get("/api/nexopos/v4/orders/payments").subscribe((function(e){t.paymentField=e}))}};const E=(0,h.Z)(O,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"-m-4 flex-auto flex flex-wrap relative"},[t.isSubmitting?e("div",{staticClass:"bg-overlay h-full w-full flex items-center justify-center absolute z-30"},[e("ns-spinner")],1):t._e(),t._v(" "),e("div",{staticClass:"px-4 w-full lg:w-1/2"},[e("h3",{staticClass:"py-2 border-b-2 text-primary border-info-primary"},[t._v(t._s(t.__("Refund With Products")))]),t._v(" "),e("div",{staticClass:"my-2"},[e("ul",[e("li",{staticClass:"border-b border-info-primary flex justify-between items-center mb-2"},[e("div",{staticClass:"flex-auto flex-col flex"},[e("div",{staticClass:"p-2 flex"},t._l(t.selectFields,(function(t,r){return e("ns-field",{key:r,attrs:{field:t}})})),1),t._v(" "),e("div",{staticClass:"flex justify-between p-2"},[e("div",{staticClass:"flex items-center text-primary"},[t.order.shipping>0?e("span",{staticClass:"mr-2"},[t._v(t._s(t.__("Refund Shipping")))]):t._e(),t._v(" "),t.order.shipping>0?e("ns-checkbox",{attrs:{checked:t.refundShipping},on:{change:function(e){return t.toggleRefundShipping(e)}}}):t._e()],1),t._v(" "),e("div",[e("button",{staticClass:"border rounded-full px-2 py-1 ns-inset-button info",on:{click:function(e){return t.addProduct()}}},[t._v(t._s(t.__("Add Product")))])])])])]),t._v(" "),e("li",[e("h4",{staticClass:"py-1 border-b-2 text-primary border-info-primary"},[t._v(t._s(t.__("Products")))])]),t._v(" "),t._l(t.refundables,(function(r){return e("li",{key:r.id,staticClass:"elevation-surface border flex justify-between items-center mb-2"},[e("div",{staticClass:"px-2 text-primary flex justify-between flex-auto"},[e("div",{staticClass:"flex flex-col"},[e("p",{staticClass:"py-2"},[e("span",[t._v(t._s(r.name))]),t._v(" "),"damaged"===r.condition?e("span",{staticClass:"rounded-full px-2 py-1 text-xs bg-error-tertiary mx-2 text-white"},[t._v(t._s(t.__("Damaged")))]):t._e(),t._v(" "),"unspoiled"===r.condition?e("span",{staticClass:"rounded-full px-2 py-1 text-xs bg-success-tertiary mx-2 text-white"},[t._v(t._s(t.__("Unspoiled")))]):t._e()]),t._v(" "),e("small",[t._v(t._s(r.unit.name))])]),t._v(" "),e("div",{staticClass:"flex items-center justify-center"},[e("span",{staticClass:"py-1 flex items-center cursor-pointer border-b border-dashed border-info-primary"},[t._v(t._s(t._f("currency")(r.unit_price*r.quantity)))])])]),t._v(" "),e("div",{staticClass:"flex"},[e("p",{staticClass:"p-2 border-l border-info-primary cursor-pointer text-primary ns-numpad-key w-16 h-16 flex items-center justify-center",on:{click:function(e){return t.openSettings(r)}}},[e("i",{staticClass:"las la-cog text-xl"})]),t._v(" "),e("p",{staticClass:"p-2 border-l border-info-primary cursor-pointer text-primary ns-numpad-key w-16 h-16 flex items-center justify-center",on:{click:function(e){return t.deleteProduct(r)}}},[e("i",{staticClass:"las la-trash"})]),t._v(" "),e("p",{staticClass:"p-2 border-l border-info-primary cursor-pointer text-primary ns-numpad-key w-16 h-16 flex items-center justify-center",on:{click:function(e){return t.changeQuantity(r)}}},[t._v(t._s(r.quantity))])])])}))],2)])]),t._v(" "),e("div",{staticClass:"px-4 w-full lg:w-1/2"},[e("h3",{staticClass:"py-2 border-b-2 text-primary border-info-primary"},[t._v(t._s(t.__("Summary")))]),t._v(" "),e("div",{staticClass:"py-2"},[e("div",{staticClass:"elevation-surface border font-semibold flex mb-2 p-2 justify-between"},[e("span",[t._v(t._s(t.__("Total")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.total)))])]),t._v(" "),e("div",{staticClass:"elevation-surface border success font-semibold flex mb-2 p-2 justify-between"},[e("span",[t._v(t._s(t.__("Paid")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.order.tendered)))])]),t._v(" "),e("div",{staticClass:"elevation-surface border info font-semibold flex mb-2 p-2 justify-between cursor-pointer",on:{click:function(e){return t.selectPaymentGateway()}}},[e("span",[t._v(t._s(t.__("Payment Gateway")))]),t._v(" "),e("span",[t._v(t._s(t.selectedPaymentGateway?t.selectedPaymentGateway.label:"N/A"))])]),t._v(" "),e("div",{staticClass:"elevation-surface border font-semibold flex mb-2 p-2 justify-between"},[e("span",[t._v(t._s(t.__("Screen")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.screenValue)))])]),t._v(" "),e("div",[e("ns-numpad",{attrs:{currency:!0,value:t.screen},on:{changed:function(e){return t.updateScreen(e)},next:function(e){return t.proceedPayment(e)}}})],1)])])])}),[],!1,null,null,null).exports;var T=r(8093);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function $(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,s=void 0,s=function(t,e){if("object"!==L(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===L(s)?s:String(s)),n)}var i,s}var F=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"getTypeLabel",value:function(t){var e=typeLabels.filter((function(e){return e.value===t}));return e.length>0?e[0].label:(0,l.__)("Unknown Status")}},{key:"getDeliveryStatus",value:function(t){var e=deliveryStatuses.filter((function(e){return e.value===t}));return e.length>0?e[0].label:(0,l.__)("Unknown Status")}},{key:"getProcessingStatus",value:function(t){var e=processingStatuses.filter((function(e){return e.value===t}));return e.length>0?e[0].label:(0,l.__)("Unknown Status")}},{key:"getPaymentStatus",value:function(t){var e=paymentLabels.filter((function(e){return e.value===t}));return e.length>0?e[0].label:(0,l.__)("Unknown Status")}}])&&$(e.prototype,r),n&&$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){N(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==D(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===D(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const q={props:["order"],data:function(){return{labels:new F,validation:new o.Z,inputValue:0,fields:[],paymentTypes}},computed:{paymentsLabels:function(){var t=new Object;return this.paymentTypes.forEach((function(e){t[e.value]=e.label})),t}},methods:{__:l.__,updateValue:function(t){this.inputValue=t},loadPaymentFields:function(){var t=this;n.ih.get("/api/nexopos/v4/orders/payments").subscribe((function(e){t.fields=t.validation.createFields(e)}))},submitPayment:function(t){var e=this;if(this.validation.validateFields(this.fields),!this.validation.fieldsValid(this.fields))return n.kX.error((0,l.__)("Unable to proceed the form is not valid")).subscribe();if(0==parseFloat(t))return n.kX.error((0,l.__)("Please provide a valid value")).subscribe();t=parseFloat(t);var r=V(V({},this.validation.extractFields(this.fields)),{},{value:t});Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("You make a payment for {amount}. A payment can't be canceled. Would you like to proceed ?").replace("{amount}",this.$options.filters.currency(t)),onAction:function(t){t&&n.ih.post("/api/nexopos/v4/orders/".concat(e.order.id,"/payments"),r).subscribe((function(t){n.kX.success(t.message).subscribe(),e.$emit("changed")}),(function(t){n.kX.error(t.message).subscribe()}))}})}},components:{nsNumpad:_.Z},mounted:function(){this.loadPaymentFields()}};const Z=(0,h.Z)(q,(function(){var t=this,e=t._self._c;return e("div",{},[e("div",{staticClass:"flex -mx-4 flex-wrap"},[e("div",{staticClass:"px-2 w-full md:w-1/2"},[e("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center elevation-surface info border text-xl font-bold"},[e("span",[t._v(t._s(t.__("Total")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.order.total)))])])]),t._v(" "),e("div",{staticClass:"px-2 w-full md:w-1/2"},[e("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center elevation-surface success border text-xl font-bold"},[e("span",[t._v(t._s(t.__("Paid")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.order.tendered)))])])]),t._v(" "),e("div",{staticClass:"px-2 w-full md:w-1/2"},[e("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center elevation-surface error border text-xl font-bold"},[e("span",[t._v(t._s(t.__("Unpaid")))]),t._v(" "),t.order.total-t.order.tendered>0?e("span",[t._v(t._s(t._f("currency")(t.order.total-t.order.tendered)))]):t._e(),t._v(" "),t.order.total-t.order.tendered<=0?e("span",[t._v(t._s(t._f("currency")(0)))]):t._e()])]),t._v(" "),e("div",{staticClass:"px-2 w-full md:w-1/2"},[e("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center elevation-surface warning border text-xl font-bold"},[e("span",[t._v(t._s(t.__("Customer Account")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.order.customer.account_amount)))])])])]),t._v(" "),e("div",{staticClass:"flex -mx-4 flex-wrap"},[e("div",{staticClass:"px-2 w-full mb-4 md:w-1/2"},["paid"!==t.order.payment_status?e("div",[e("h3",{staticClass:"font-semibold border-b-2 border-info-primary py-2"},[t._v("\n                    "+t._s(t.__("Payment"))+"\n                ")]),t._v(" "),e("div",{staticClass:"py-2"},[t._l(t.fields,(function(t,r){return e("ns-field",{key:r,attrs:{field:t}})})),t._v(" "),e("div",{staticClass:"my-2 px-2 h-12 flex justify-end items-center border elevation-surface"},[t._v("\n                        "+t._s(t._f("currency")(t.inputValue))+"\n                    ")]),t._v(" "),e("ns-numpad",{attrs:{floating:!0,value:t.inputValue},on:{next:function(e){return t.submitPayment(e)},changed:function(e){return t.updateValue(e)}}})],2)]):t._e(),t._v(" "),"paid"===t.order.payment_status?e("div",{staticClass:"flex items-center justify-center h-full"},[e("h3",{staticClass:"text-primary font-semibold"},[t._v(t._s(t.__("No payment possible for paid order.")))])]):t._e()]),t._v(" "),e("div",{staticClass:"px-2 w-full mb-4 md:w-1/2"},[e("h3",{staticClass:"font-semibold border-b-2 border-info-primary py-2 mb-2"},[t._v("\n                "+t._s(t.__("Payment History"))+"\n            ")]),t._v(" "),e("ul",t._l(t.order.payments,(function(r){return e("li",{key:r.id,staticClass:"p-2 flex items-center justify-between text-shite border elevation-surface mb-2"},[e("span",[t._v(t._s(t.paymentsLabels[r.identifier]||t.__("Unknown")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(r.value)))])])})),0)])])])}),[],!1,null,null,null).exports;var R=r(9527);const I={props:["order"],data:function(){return{processingStatuses,deliveryStatuses,labels:new F,showProcessingSelect:!1,showDeliverySelect:!1}},mounted:function(){},methods:{__:l.__,submitProcessingChange:function(){var t=this;w.G.show(x.default,{title:(0,l.__)("Would you proceed ?"),message:(0,l.__)("The processing status of the order will be changed. Please confirm your action."),onAction:function(e){e&&n.ih.post("/api/nexopos/v4/orders/".concat(t.order.id,"/processing"),{process_status:t.order.process_status}).subscribe({next:function(e){t.showProcessingSelect=!1,n.kX.success(e.message).subscribe()},error:function(t){n.kX.error(t.message||(0,l.__)("Unexpected error occurred.")).subscribe()}})}})},openRefunds:function(){var t=this;try{new Promise((function(e,r){var n=t.order;w.G.show(R.Z,{order:n,resolve:e,reject:r})}))}catch(t){}},submitDeliveryStatus:function(){var t=this;w.G.show(x.default,{title:(0,l.__)("Would you proceed ?"),message:(0,l.__)("The delivery status of the order will be changed. Please confirm your action."),onAction:function(e){e&&n.ih.post("/api/nexopos/v4/orders/".concat(t.order.id,"/delivery"),{delivery_status:t.order.delivery_status}).subscribe({next:function(e){t.showDeliverySelect=!1,n.kX.success(e.message).subscribe()},error:function(t){n.kX.error(t.message||(0,l.__)("Unexpected error occurred.")).subscribe()}})}})}}};const G=(0,h.Z)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"-mx-4 flex flex-wrap"},[e("div",{staticClass:"flex-auto"},[e("div",{staticClass:"w-full mb-2 flex-wrap flex"},[e("div",{staticClass:"w-full mb-2 px-4"},[e("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary"},[t._v(t._s(t.__("Payment Summary")))])]),t._v(" "),e("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[e("div",{staticClass:"elevation-surface border p-2 flex justify-between items-start"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[t._v(t._s(t.__("Sub Total")))])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary"},[t._v(t._s(t._f("currency")(t.order.subtotal)))])])]),t._v(" "),e("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[e("div",{staticClass:"p-2 flex justify-between items-start ns-notice error"},[e("div",[e("h4",{staticClass:"text-semibold"},[e("span",{staticClass:"text-white"},[t._v(t._s(t.__("Discount")))]),t._v(" "),"percentage"===t.order.discount_type?e("span",{staticClass:"text-white ml-1"},[t._v("("+t._s(t.order.discount_percentage)+"%)")]):t._e(),t._v(" "),"flat"===t.order.discount_type?e("span",{staticClass:"text-white ml-1"},[t._v("(Flat)")]):t._e()])]),t._v(" "),e("div",{staticClass:"font-semibold"},[e("span",[t._v(t._s(t._f("currency")(t.order.discount)))])])])]),t._v(" "),e("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[e("div",{staticClass:"p-2 flex justify-between items-start elevation-surface border"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[t._v(t._s(t.__("Shipping")))])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary"},[t._v(t._s(t._f("currency")(t.order.shipping)))])])]),t._v(" "),e("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[e("div",{staticClass:"p-2 flex justify-between items-start ns-notice error"},[e("div",[e("h4",{staticClass:"text-semibold"},[t._v("\n                            "+t._s(t.__("Coupons"))+"\n                        ")])]),t._v(" "),e("div",{staticClass:"font-semibold"},[e("span",[t._v(t._s(t._f("currency")(t.order.total_coupons)))])])])]),t._v(" "),e("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[e("div",{staticClass:"p-2 flex justify-between items-start ns-notice info"},[e("div",[e("h4",{staticClass:"text-semibold"},[t._v(t._s(t.__("Total")))])]),t._v(" "),e("div",{staticClass:"font-semibold"},[t._v(t._s(t._f("currency")(t.order.total)))])])]),t._v(" "),e("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[e("div",{staticClass:"p-2 flex justify-between items-start ns-notice warning"},[e("div",[e("h4",{staticClass:"text-semibold"},[t._v(t._s(t.__("Taxes")))])]),t._v(" "),e("div",{staticClass:"font-semibold"},[t._v(t._s(t._f("currency")(t.order.tax_value)))])])]),t._v(" "),e("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[e("div",{staticClass:"p-2 flex justify-between items-start text-primary elevation-surface error border"},[e("div",[e("h4",{staticClass:"text-semibold"},[t._v(t._s(t.__("Change")))])]),t._v(" "),e("div",{staticClass:"font-semibold"},[t._v(t._s(t._f("currency")(t.order.change)))])])]),t._v(" "),e("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[e("div",{staticClass:"p-2 flex justify-between items-start elevation-surface border"},[e("div",[e("h4",{staticClass:"text-semibold"},[t._v(t._s(t.__("Paid")))])]),t._v(" "),e("div",{staticClass:"font-semibold"},[t._v(t._s(t._f("currency")(t.order.tendered)))])])])])]),t._v(" "),e("div",{staticClass:"px-4 w-full md:w-1/2 lg:w-2/4 mb-2"},[e("div",{staticClass:"mb-2"},[e("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary"},[t._v(t._s(t.__("Order Status")))])]),t._v(" "),e("div",{staticClass:"mb-2 p-2 flex justify-between items-start elevation-surface border"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[e("span",[t._v(t._s(t.__("Customer")))])])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary"},[t._v(t._s(t.order.nexopos_customers_name))])]),t._v(" "),e("div",{staticClass:"mb-2 p-2 flex justify-between items-start elevation-surface border"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[e("span",[t._v(t._s(t.__("Type")))])])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary"},[t._v(t._s(t.labels.getTypeLabel(t.order.type)))])]),t._v(" "),e("div",{staticClass:"mb-2 p-2 flex justify-between items-start elevation-surface border"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[e("span",[t._v(t._s(t.__("Delivery Status")))])])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary mt-2 md:mt-0 w-full md:w-auto"},[e("div",{staticClass:"w-full text-center"},[t.showDeliverySelect?t._e():e("span",{staticClass:"font-semibold text-secondary border-b border-info-primary cursor-pointer border-dashed",on:{click:function(e){t.showDeliverySelect=!0}}},[t._v(t._s(t.labels.getDeliveryStatus(t.order.delivery_status)))])]),t._v(" "),t.showDeliverySelect?e("div",{staticClass:"flex-auto flex"},[e("div",{staticClass:"ns-select flex items-center justify-center"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.order.delivery_status,expression:"order.delivery_status"}],ref:"process_status",staticClass:"flex-auto border-info-primary rounded-lg",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.order,"delivery_status",e.target.multiple?r:r[0])}}},t._l(t.deliveryStatuses,(function(r,n){return e("option",{key:n,domProps:{value:r.value}},[t._v(t._s(r.label))])})),0)]),t._v(" "),e("div",{staticClass:"pl-2 flex"},[e("ns-close-button",{on:{click:function(e){t.showDeliverySelect=!1}}}),t._v(" "),e("button",{staticClass:"bg-success-primary text-white rounded-full px-2 py-1",on:{click:function(e){return t.submitDeliveryStatus(t.order)}}},[t._v(t._s(t.__("Save")))])],1)]):t._e()])]),t._v(" "),e("div",{staticClass:"mb-2 p-2 flex flex-col md:flex-row justify-between items-center elevation-surface border"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[e("span",[t._v(t._s(t.__("Processing Status")))])])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary mt-2 md:mt-0 w-full md:w-auto"},[e("div",{staticClass:"w-full text-center"},[t.showProcessingSelect?t._e():e("span",{staticClass:"border-b border-info-primary cursor-pointer border-dashed",on:{click:function(e){t.showProcessingSelect=!0}}},[t._v(t._s(t.labels.getProcessingStatus(t.order.process_status)))])]),t._v(" "),t.showProcessingSelect?e("div",{staticClass:"flex-auto flex"},[e("div",{staticClass:"ns-select flex items-center justify-center"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.order.process_status,expression:"order.process_status"}],ref:"process_status",staticClass:"flex-auto border-info-primary rounded-lg",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.order,"process_status",e.target.multiple?r:r[0])}}},t._l(t.processingStatuses,(function(r,n){return e("option",{key:n,domProps:{value:r.value}},[t._v(t._s(r.label))])})),0)]),t._v(" "),e("div",{staticClass:"pl-2 flex"},[e("ns-close-button",{on:{click:function(e){t.showProcessingSelect=!1}}}),t._v(" "),e("button",{staticClass:"bg-success-primary text-white rounded-full px-2 py-1",on:{click:function(e){return t.submitProcessingChange(t.order)}}},[t._v(t._s(t.__("Save")))])],1)]):t._e()])]),t._v(" "),e("div",{staticClass:"mb-2 p-2 flex justify-between items-start elevation-surface border"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[e("span",[t._v(t._s(t.__("Payment Status")))])])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary"},[t._v(t._s(t.labels.getPaymentStatus(t.order.payment_status)))])])]),t._v(" "),e("div",{staticClass:"px-4 w-full md:w-1/2 lg:w-2/4 mb-2"},[e("div",{staticClass:"mb-2"},[e("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary"},[t._v(t._s(t.__("Products")))])]),t._v(" "),t._l(t.order.products,(function(r){return e("div",{key:r.id,staticClass:"p-2 flex justify-between items-start elevation-surface border mb-6"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[t._v(t._s(r.name)+" (x"+t._s(r.quantity)+")")]),t._v(" "),e("p",{staticClass:"text-secondary text-sm"},[t._v(t._s(r.unit.name||"N/A"))])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary"},[t._v(t._s(t._f("currency")(r.total_price)))])])})),t._v(" "),e("div",{staticClass:"mb-2"},[e("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary flex justify-between"},[e("span",[t._v(t._s(t.__("Refunded Products")))]),t._v(" "),e("a",{staticClass:"border-b border-info-primary border-dashed",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.openRefunds()}}},[t._v(t._s(t.__("All Refunds")))])])]),t._v(" "),t._l(t.order.refunded_products,(function(r,n){return e("div",{key:n,staticClass:"p-2 flex justify-between items-start elevation-surface border mb-6"},[e("div",[e("h4",{staticClass:"text-semibold text-primary"},[t._v(t._s(r.order_product.name)+" (x"+t._s(r.quantity)+")")]),t._v(" "),e("p",{staticClass:"text-secondary text-sm"},[t._v(t._s(r.unit.name||"N/A")+" | "),e("span",{staticClass:"rounded-full px-2",class:"damaged"===r.condition?"bg-error-tertiary text-white":"bg-info-tertiary text-white"},[t._v(t._s(r.condition))])])]),t._v(" "),e("div",{staticClass:"font-semibold text-secondary"},[t._v(t._s(t._f("currency")(r.total_price)))])])}))],2)])}),[],!1,null,null,null).exports;function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function M(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Y(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const X={name:"ns-order-instalments-payment",components:{nsNotice:r(3577).nsNotice},data:function(){return{paymentTypes,fields:[{type:"select",name:"payment_type",description:(0,l.__)("Select the payment type that must apply to the current order."),label:(0,l.__)("Payment Type"),validation:"required",options:paymentTypes}],print:new C.Z({urls:systemUrls,options:systemOptions}),validation:new o.Z,order:null,instalment:null}},methods:{__:l.__,popupResolver:m.Z,popupCloser:a.Z,close:function(){this.popupResolver(!1)},updateInstalmentAsDue:function(t){var e=this;nsHttpClient.put("/api/nexopos/v4/orders/".concat(this.order.id,"/instalments/").concat(this.instalment.id,"/"),{instalment:{date:ns.date.moment.format("YYYY-MM-DD HH:mm:ss")}}).subscribe({next:function(t){e.submitPayment()},error:function(t){n.kX.error(t.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})},submitPayment:function(){var t=this;if(!this.validation.validateFields(this.fields))return n.kX.error(__m("The form is not valid.")).subcribe();nsHttpClient.post("/api/nexopos/v4/orders/".concat(this.order.id,"/instalments/").concat(this.instalment.id,"/pay"),function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){M(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.validation.extractFields(this.fields))).subscribe({next:function(e){t.popupResolver(!0),t.print.exec(e.data.payment.id,"payment"),n.kX.success(e.message).subscribe()},error:function(e){"failed"===e.status&&Popup.show(x.default,{title:(0,l.__)("Update Instalment Date"),message:(0,l.__)("Would you like to mark that instalment as due today ? If you confirm the instalment will be marked as paid."),onAction:function(e){e&&t.updateInstalmentAsDue(t.instalment)}}),n.kX.error(e.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})}},mounted:function(){this.popupCloser(),this.order=this.$popupParams.order,this.instalment=this.$popupParams.instalment,this.fields=this.validation.createFields(this.fields)}};const U=(0,h.Z)(X,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-lg ns-box w-95vw md:w-2/3-screen lg:w-1/3-screen"},[e("div",{staticClass:"p-2 flex justify-between border-b items-center"},[e("h3",[t._v(t._s(t.__("Payment Method")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),e("div",{staticClass:"p-2 ns-box-body"},[e("ns-notice",{staticClass:"py-2 p-4 text-center border text-primary rounded-lg",attrs:{color:"info"}},[t._v(t._s(t.__("Before submitting the payment, choose the payment type used for that order.")))]),t._v(" "),e("br"),t._v(" "),t._l(t.fields,(function(t,r){return e("ns-field",{key:r,attrs:{field:t}})}))],2),t._v(" "),e("div",{staticClass:"border-t ns-box-footer p-2 flex justify-end"},[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.submitPayment()}}},[t._v(t._s(t.__("Submit Payment")))])],1)])}),[],!1,null,null,null).exports;function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function Q(){Q=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var s=e&&e.prototype instanceof _?e:_,o=Object.create(s.prototype),a=new T(n||[]);return i(o,"_invoke",{value:j(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function _(){}function y(){}function b(){}var g={};c(g,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,o)&&(g=w);var C=b.prototype=_.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(i,s,o,a){var l=d(t[i],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==z(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function j(e,r,n){var i=f;return function(s,o){if(i===h)throw new Error("Generator is already running");if(i===v){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?v:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=v,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=d(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(z(e)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},k(P.prototype),c(P.prototype,a,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new P(u(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function W(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}const B={props:["order"],name:"ns-order-instalments",data:function(){return{labels:new F,original:[],instalments:[],print:new C.Z({urls:systemUrls,options:systemOptions,type:"payment"})}},mounted:function(){this.loadInstalments()},computed:{totalInstalments:function(){return this.instalments.length>0?this.instalments.map((function(t){return t.amount})).reduce((function(t,e){return parseFloat(t)+parseFloat(e)})):0}},methods:{__:l.__,loadInstalments:function(){var t=this;n.ih.get("/api/nexopos/v4/orders/".concat(this.order.id,"/instalments")).subscribe((function(e){t.original=e,t.instalments=e.map((function(t){return t.price_clicked=!1,t.date_clicked=!1,t.date=moment(t.date).format("YYYY-MM-DD"),t}))}))},showReceipt:function(t){if(null===t.payment_id)return n.kX.error((0,l.__)("This instalment doesn't have any payment attached.")).subscribe();this.print.process(t.payment_id,"payment")},addInstalment:function(){this.instalments.push({date:ns.date.moment.format("YYYY-MM-DD"),amount:this.order.total-this.totalInstalments,paid:!1})},createInstalment:function(t){var e=this;Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to create this instalment ?"),onAction:function(r){r&&n.ih.post("/api/nexopos/v4/orders/".concat(e.order.id,"/instalments"),{instalment:t}).subscribe({next:function(t){e.loadInstalments(),n.kX.success(t.message).subscribe()},error:function(t){n.kX.error(t.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})}})},deleteInstalment:function(t){var e=this;Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this instalment ?"),onAction:function(r){r&&n.ih.delete("/api/nexopos/v4/orders/".concat(e.order.id,"/instalments/").concat(t.id)).subscribe({next:function(r){var i=e.instalments.indexOf(t);e.instalments.splice(i,1),n.kX.success(r.message).subscribe()},error:function(t){n.kX.error(t.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})}})},markAsPaid:function(t){var e,r=this;return(e=Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,n){Popup.show(U,{order:r.order,instalment:t,resolve:e,reject:n})}));case 3:e.sent,r.loadInstalments(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(t){W(s,n,i,o,a,"next",t)}function a(t){W(s,n,i,o,a,"throw",t)}o(void 0)}))})()},togglePriceEdition:function(t){var e=this;t.paid||(t.price_clicked=!t.price_clicked,this.$forceUpdate(),t.price_clicked&&setTimeout((function(){e.$refs.amount[0].select()}),100))},updateInstalment:function(t){var e=this;Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to update that instalment ?"),onAction:function(r){r&&n.ih.put("/api/nexopos/v4/orders/".concat(e.order.id,"/instalments/").concat(t.id),{instalment:t}).subscribe({next:function(t){n.kX.success(t.message).subscribe()},error:function(t){n.kX.error(t.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})}})},toggleDateEdition:function(t){var e=this;t.paid||(t.date_clicked=!t.date_clicked,this.$forceUpdate(),t.date_clicked&&setTimeout((function(){e.$refs.date[0].select()}),200))}}};const K=(0,h.Z)(B,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"-mx-4 flex-auto flex flex-wrap"},[e("div",{staticClass:"flex flex-auto"},[e("div",{staticClass:"w-full mb-2 flex-wrap"},[e("div",{staticClass:"w-full mb-2 px-4"},[e("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary"},[t._v(t._s(t.__("Instalments")))])]),t._v(" "),e("div",{staticClass:"px-4"},[e("ul",{staticClass:"border-table-th-edge border-t text-primary"},[t._l(t.instalments,(function(r){return e("li",{key:r.id,staticClass:"border-b border-l flex justify-between elevation-surface",class:r.paid?"success":"info"},[e("span",{staticClass:"p-2"},[r.date_clicked?t._e():e("span",{on:{click:function(e){return t.toggleDateEdition(r)}}},[t._v(t._s(r.date))]),t._v(" "),r.date_clicked?e("span",[e("input",{directives:[{name:"model",rawName:"v-model",value:r.date,expression:"instalment.date"}],ref:"date",refInFor:!0,staticClass:"border border-info-primary rounded",attrs:{type:"date"},domProps:{value:r.date},on:{blur:function(e){return t.toggleDateEdition(r)},input:function(e){e.target.composing||t.$set(r,"date",e.target.value)}}})]):t._e()]),t._v(" "),e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"flex items-center px-2 h-full border-r"},[r.price_clicked?t._e():e("span",{on:{click:function(e){return t.togglePriceEdition(r)}}},[t._v(t._s(t._f("currency")(r.amount)))]),t._v(" "),r.price_clicked?e("span",[e("input",{directives:[{name:"model",rawName:"v-model",value:r.amount,expression:"instalment.amount"}],ref:"amount",refInFor:!0,staticClass:"border border-info-primary p-1",attrs:{type:"text"},domProps:{value:r.amount},on:{blur:function(e){return t.togglePriceEdition(r)},input:function(e){e.target.composing||t.$set(r,"amount",e.target.value)}}})]):t._e()]),t._v(" "),!r.paid&&r.id?e("div",{staticClass:"w-36 justify-center flex items-center px-2 h-full border-r"},[e("div",{staticClass:"px-2"},[e("ns-icon-button",{attrs:{type:"success",className:"la-money-bill-wave-alt"},on:{click:function(e){return t.markAsPaid(r)}}})],1),t._v(" "),e("div",{staticClass:"px-2"},[e("ns-icon-button",{attrs:{type:"info",className:"la-save"},on:{click:function(e){return t.updateInstalment(r)}}})],1),t._v(" "),e("div",{staticClass:"px-2"},[e("ns-icon-button",{attrs:{type:"error",className:"la-trash-alt"},on:{click:function(e){return t.deleteInstalment(r)}}})],1)]):t._e(),t._v(" "),r.paid||r.id?t._e():e("div",{staticClass:"w-36 justify-center flex items-center px-2 h-full border-r"},[e("div",{staticClass:"px-2"},[e("div",{staticClass:"ns-button info"},[e("button",{staticClass:"px-3 py-1 rounded-full",on:{click:function(e){return t.createInstalment(r)}}},[e("i",{staticClass:"las la-plus"}),t._v("\n                                            "+t._s(t.__("Create"))+"\n                                        ")])])])]),t._v(" "),r.paid?e("div",{staticClass:"w-36 justify-center flex items-center px-2 h-full"},[e("div",{staticClass:"ns-button info"},[e("button",{staticClass:"px-3 text-xs py-1 rounded-full",on:{click:function(e){return t.showReceipt(r)}}},[e("i",{staticClass:"las la-print"}),t._v("\n                                        "+t._s(t.__("Receipt"))+"\n                                    ")])])]):t._e()])])})),t._v(" "),e("li",{staticClass:"flex justify-between p-2 border-r border-b border-l elevation-surface"},[e("div",{staticClass:"flex items-center justify-center"},[e("span",[t._v("\n                                "+t._s(t.__("Total :"))+" "+t._s(t._f("currency")(t.order.total))+"\n                            ")]),t._v(" "),e("span",{staticClass:"ml-1 text-sm"},[t._v("\n                                ("+t._s(t.__("Remaining :"))+" "+t._s(t._f("currency")(t.order.total-t.totalInstalments))+")\n                            ")])]),t._v(" "),e("div",{staticClass:"-mx-2 flex flex-wrap items-center"},[e("span",{staticClass:"px-2"},[t._v("\n                                "+t._s(t.__("Instalments:"))+" "+t._s(t._f("currency")(t.totalInstalments))+"\n                            ")]),t._v(" "),e("span",{staticClass:"px-2"},[e("div",{staticClass:"ns-button info"},[e("button",{staticClass:"rounded-full px-3 py-1",on:{click:function(e){return t.addInstalment()}}},[t._v(t._s(t.__("Add Instalment")))])])])])])],2)])])])])}),[],!1,null,null,null).exports;var J={filters:{nsCurrency:i.W},name:"ns-preview-popup",data:function(){return{active:"details",order:new Object,products:[],payments:[],options:null,print:new C.Z({urls:systemUrls,options:systemOptions}),settings:null}},components:{nsOrderRefund:E,nsOrderPayment:Z,nsOrderDetails:G,nsOrderInstalments:K},computed:{isVoidable:function(){return["paid","partially_paid","unpaid"].includes(this.order.payment_status)},isDeleteAble:function(){return["hold"].includes(this.order.payment_status)}},methods:{__:l.__,popupResolver:m.Z,popupCloser:a.Z,closePopup:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.popupResolver(t)},setActive:function(t){this.active=t},printOrder:function(){this.print.process(this.order.id,"sale")},refresh:function(){this.$popupParams.component.$emit("updated"),this.loadOrderDetails(this.order.id)},loadOrderDetails:function(t){var e=this;(0,s.D)([n.ih.get("/api/nexopos/v4/orders/".concat(t)),n.ih.get("/api/nexopos/v4/orders/".concat(t,"/products")),n.ih.get("/api/nexopos/v4/orders/".concat(t,"/payments"))]).subscribe((function(t){e.order=t[0],e.products=t[1],e.payments=t[2]}))},deleteOrder:function(){var t=this;Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this order"),onAction:function(e){e&&n.ih.delete("/api/nexopos/v4/orders/".concat(t.order.id)).subscribe({next:function(e){n.kX.success(e.message).subscribe(),t.refreshCrudTable(),t.closePopup(!0)},error:function(t){n.kX.error(t.message).subscribe()}})}})},voidOrder:function(){var t=this;try{new Promise((function(e,r){Popup.show(T.default,{resolve:e,reject:r,title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("The current order will be void. This action will be recorded. Consider providing a reason for this operation"),onAction:function(e){!1!==e&&n.ih.post("/api/nexopos/v4/orders/".concat(t.order.id,"/void"),{reason:e}).subscribe({next:function(e){n.kX.success(e.message).subscribe(),t.refreshCrudTable(),t.closePopup(!0)},error:function(t){n.kX.error(t.message).subscribe()}})}})}))}catch(t){console.log(t)}},refreshCrudTable:function(){this.$popupParams.component.$emit("updated",!0)}},watch:{active:function(){"details"===this.active&&this.loadOrderDetails(this.order.id)}},mounted:function(){this.order=this.$popupParams.order,this.options=systemOptions,this.urls=systemUrls,this.loadOrderDetails(this.order.id),this.popupCloser()}};window.nsOrderPreviewPopup=J;const tt=J;const et=(0,h.Z)(tt,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"h-95vh w-95vw md:h-6/7-screen md:w-6/7-screen overflow-hidden shadow-xl ns-box flex flex-col"},[e("div",{staticClass:"border-b ns-box-header p-3 flex items-center justify-between"},[e("div",[e("h3",[t._v(t._s(t.__("Order Options")))])]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.closePopup(!0)}}})],1)]),t._v(" "),e("div",{staticClass:"p-2 overflow-scroll ns-box-body flex flex-auto"},[t.order.id?e("ns-tabs",{attrs:{active:t.active},on:{active:function(e){return t.setActive(e)}}},[e("ns-tabs-item",{staticClass:"overflow-y-auto",attrs:{label:t.__("Details"),identifier:"details"}},[e("ns-order-details",{attrs:{order:t.order}})],1),t._v(" "),["order_void","hold","refunded","partially_refunded"].includes(t.order.payment_status)?t._e():e("ns-tabs-item",{staticClass:"overflow-y-auto",attrs:{label:t.__("Payments"),identifier:"payments"}},[e("ns-order-payment",{attrs:{order:t.order},on:{changed:function(e){return t.refresh()}}})],1),t._v(" "),["order_void","hold","refunded"].includes(t.order.payment_status)?t._e():e("ns-tabs-item",{staticClass:"flex overflow-y-auto",attrs:{label:t.__("Refund & Return"),identifier:"refund"}},[e("ns-order-refund",{attrs:{order:t.order},on:{loadTab:function(e){return t.setActive(e)},changed:function(e){return t.refresh()}}})],1),t._v(" "),["partially_paid","unpaid"].includes(t.order.payment_status)&&t.order.support_instalments?e("ns-tabs-item",{staticClass:"flex overflow-y-auto",attrs:{label:t.__("Installments"),identifier:"instalments"}},[e("ns-order-instalments",{attrs:{order:t.order},on:{changed:function(e){return t.refresh()}}})],1):t._e()],1):t._e(),t._v(" "),t.order.id?t._e():e("div",{staticClass:"h-full w-full flex items-center justify-center"},[e("ns-spinner")],1)],1),t._v(" "),e("div",{staticClass:"p-2 flex justify-between border-t ns-box-footer"},[e("div",[t.isVoidable?e("ns-button",{attrs:{type:"error"},on:{click:function(e){return t.voidOrder()}}},[e("i",{staticClass:"las la-ban"}),t._v("\n                "+t._s(t.__("Void"))+"\n            ")]):t._e(),t._v(" "),t.isDeleteAble?e("ns-button",{attrs:{type:"error"},on:{click:function(e){return t.deleteOrder()}}},[e("i",{staticClass:"las la-trash"}),t._v("\n                "+t._s(t.__("Delete"))+"\n            ")]):t._e()],1),t._v(" "),e("div",[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.printOrder()}}},[e("i",{staticClass:"las la-print"}),t._v("\n                "+t._s(t.__("Print"))+"\n            ")])],1)])])}),[],!1,null,null,null).exports},9527:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r(8094),i=r(2867),s=r(3216),o=r(1487),a=r(5494);const l={name:"ns-orders-refund-popup",data:function(){return{order:null,refunds:[],view:"summary",previewed:null,loaded:!1,options:systemOptions,systemUrls,print:new a.Z({urls:systemUrls,options:systemOptions})}},methods:{__:n.__,popupCloser:i.Z,popupResolver:s.Z,toggleProductView:function(t){this.view="details",this.previewed=t},loadOrderRefunds:function(){var t=this;nsHttpClient.get("/api/nexopos/v4/orders/".concat(this.order.id,"/refunds")).subscribe((function(e){t.loaded=!0,t.refunds=e.refunds}),(function(t){o.kX.error(t.message).subscribe()}))},close:function(){this.$popup.close()},printRefundReceipt:function(t){this.print.process(t.id,"refund")}},mounted:function(){this.order=this.$popupParams.order,this.popupCloser(),this.loadOrderRefunds()}};const c=(0,r(1900).Z)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-lg w-95vw h-95vh md:w-3/5-screen md:h-3/5-screen ns-box flex flex-col overflow-hidden"},[e("div",{staticClass:"border-b p-2 flex items-center justify-between ns-box-header"},[e("h3",[t._v(t._s(t.__("Order Refunds")))]),t._v(" "),e("div",{staticClass:"flex"},["details"===t.view?e("div",{staticClass:"flex items-center justify-center cursor-pointer rounded-full px-3 border hover:bg-info-primary hover:text-white mr-1",on:{click:function(e){t.view="summary"}}},[t._v(t._s(t.__("Go Back")))]):t._e(),t._v(" "),e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),e("div",{staticClass:"overflow-auto flex-auto ns-box-body"},["summary"===t.view?[t.loaded?t._e():e("div",{staticClass:"flex h-full w-full items-center justify-center"},[e("ns-spinner",{attrs:{size:"24"}})],1),t._v(" "),t.loaded&&0===t.refunds.length?e("div",{staticClass:"flex h-full w-full items-center justify-center"},[e("i",{staticClass:"lar la-frown-open"})]):t._e(),t._v(" "),t.loaded&&t.refunds.length>0?t._l(t.refunds,(function(r){return e("div",{key:r.id,staticClass:"border-b flex flex-col md:flex-row"},[e("div",{staticClass:"w-full md:flex-auto p-2"},[e("h3",{staticClass:"font-semibold mb-1"},[t._v(t._s(t.order.code))]),t._v(" "),e("div",[e("ul",{staticClass:"flex -mx-1 text-sm text-primary"},[e("li",{staticClass:"px-1"},[t._v(t._s(t.__("Total"))+" : "+t._s(t._f("currency")(r.total)))]),t._v(" "),e("li",{staticClass:"px-1"},[t._v(t._s(t.__("By"))+" : "+t._s(r.author.username))])])])]),t._v(" "),e("div",{staticClass:"w-full md:w-16 cursor-pointer hover:bg-info-primary hover:border-info-primary hover:text-white text-lg flex items-center justify-center md:border-l",on:{click:function(e){return t.toggleProductView(r)}}},[e("i",{staticClass:"las la-eye"})]),t._v(" "),e("div",{staticClass:"w-full md:w-16 cursor-pointer hover:bg-info-primary hover:border-info-primary hover:text-white text-lg flex items-center justify-center md:border-l",on:{click:function(e){return t.printRefundReceipt(r)}}},[e("i",{staticClass:"las la-print"})])])})):t._e()]:t._e(),t._v(" "),"details"===t.view?t._l(t.previewed.refunded_products,(function(r){return e("div",{key:r.id,staticClass:"border-b flex flex-col md:flex-row"},[e("div",{staticClass:"w-full md:flex-auto p-2"},[e("h3",{staticClass:"font-semibold mb-1"},[t._v(t._s(r.product.name))]),t._v(" "),e("div",[e("ul",{staticClass:"flex -mx-1 text-sm text-primary"},[e("li",{staticClass:"px-1"},[t._v(t._s(t.__("Condition"))+" : "+t._s(r.condition))]),t._v(" "),e("li",{staticClass:"px-1"},[t._v(t._s(t.__("Quantity"))+" : "+t._s(r.quantity))]),t._v(" "),e("li",{staticClass:"px-1"},[t._v(t._s(t.__("Total"))+" : "+t._s(t._f("currency")(r.total_price)))])])])])])})):t._e()],2)])}),[],!1,null,null,null).exports},2381:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var n=r(8094),i=r(3216),s=r(2867);const o={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.popupCloser()},methods:{__:n.__,popupResolver:i.Z,popupCloser:s.Z,emitAction:function(t){this.$popupParams.onAction(t),this.$popup.close()}}};const a=(0,r(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col shadow-lg w-5/7-screen md:w-4/7-screen lg:w-2/7-screen",class:t.size,attrs:{id:"confirm-popup"}},[e("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[e("h2",{staticClass:"text-xl md:text-3xl font-body text-center"},[t._v(t._s(t.title))]),t._v(" "),e("p",{staticClass:"py-4 text-sm md:text-base text-center"},[t._v(t._s(t.message))])]),t._v(" "),e("div",{staticClass:"action-buttons flex border-t"},[e("button",{staticClass:"flex-auto rounded-none w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(e){return t.emitAction(!0)}}},[t._v(t._s(t.__("Yes")))]),t._v(" "),e("hr",{staticClass:"border-r h-16"}),t._v(" "),e("button",{staticClass:"flex-auto rounded-none w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(e){return t.emitAction(!1)}}},[t._v(t._s(t.__("No")))])])])}),[],!1,null,null,null).exports},7492:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r(2867),i=r(3216),s=r(1487),o=r(8094),a=r(9251);r(2357);const l={name:"ns-pos-coupons-load-popup",components:{nsNotice:r(1128).Z},data:function(){return{placeHolder:(0,o.__)("Coupon Code"),couponCode:null,order:null,activeTab:"apply-coupon",orderSubscriber:null,customerCoupon:null}},mounted:function(){var t=this;this.popupCloser(),this.$refs.coupon.select(),this.orderSubscriber=POS.order.subscribe((function(e){t.order=e,t.order.coupons.length>0&&(t.activeTab="active-coupons")})),this.$popupParams&&this.$popupParams.apply_coupon&&(this.couponCode=this.$popupParams.apply_coupon,this.getCoupon(this.couponCode).subscribe({next:function(e){t.customerCoupon=e,t.apply()}}))},destroyed:function(){this.orderSubscriber.unsubscribe()},methods:{__:o.__,popupCloser:n.Z,popupResolver:i.Z,selectCustomer:function(){Popup.show(a.Z)},cancel:function(){this.customerCoupon=null,this.couponCode=null},removeCoupon:function(t){this.order.coupons.splice(t,1),POS.refreshCart()},apply:function(){var t=this;try{var e=this.customerCoupon;if(null!==this.customerCoupon.coupon.valid_hours_start&&!ns.date.moment.isAfter(this.customerCoupon.coupon.valid_hours_start)&&this.customerCoupon.coupon.valid_hours_start.length>0)return s.kX.error((0,o.__)("The coupon is out from validity date range.")).subscribe();if(null!==this.customerCoupon.coupon.valid_hours_end&&!ns.date.moment.isBefore(this.customerCoupon.coupon.valid_hours_end)&&this.customerCoupon.coupon.valid_hours_end.length>0)return s.kX.error((0,o.__)("The coupon is out from validity date range.")).subscribe();var r=this.customerCoupon.coupon.products;if(r.length>0){var n=r.map((function(t){return t.product_id}));if(0===this.order.products.filter((function(t){return n.includes(t.product_id)})).length)return s.kX.error((0,o.__)("This coupon requires products that aren't available on the cart at the moment.")).subscribe()}var i=this.customerCoupon.coupon.categories;if(i.length>0){var a=i.map((function(t){return t.category_id}));if(0===this.order.products.filter((function(t){return a.includes(t.$original().category_id)})).length)return s.kX.error((0,o.__)("This coupon requires products that belongs to specific categories that aren't included at the moment.").replace("%s")).subscribe()}this.cancel();var l={active:e.coupon.active,customer_coupon_id:e.id,minimum_cart_value:e.coupon.minimum_cart_value,maximum_cart_value:e.coupon.maximum_cart_value,name:e.coupon.name,type:e.coupon.type,value:0,limit_usage:e.coupon.limit_usage,code:e.coupon.code,discount_value:e.coupon.discount_value,categories:e.coupon.categories,products:e.coupon.products};POS.pushCoupon(l),this.activeTab="active-coupons",setTimeout((function(){t.popupResolver(l)}),500),s.kX.success((0,o.__)("The coupon has applied to the cart.")).subscribe()}catch(t){console.log(t)}},getCouponType:function(t){switch(t){case"percentage_discount":return(0,o.__)("Percentage");case"flat_discount":return(0,o.__)("Flat");default:return(0,o.__)("Unknown Type")}},getDiscountValue:function(t){switch(t.type){case"percentage_discount":return t.discount_value+"%";case"flat_discount":return this.$options.filters.currency(t.discount_value)}},closePopup:function(){this.popupResolver(!1)},setActiveTab:function(t){this.activeTab=t},getCoupon:function(t){return!this.order.customer_id>0?s.kX.error((0,o.__)("You must select a customer before applying a coupon.")).subscribe():s.ih.post("/api/nexopos/v4/customers/coupons/".concat(t),{customer_id:this.order.customer_id})},loadCoupon:function(){var t=this,e=this.couponCode;this.getCoupon(e).subscribe({next:function(e){t.customerCoupon=e,s.kX.success((0,o.__)("The coupon has been loaded.")).subscribe()},error:function(t){s.kX.error(t.message||(0,o.__)("An unexpected error occurred.")).subscribe()}})}}};const c=(0,r(1900).Z)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-lg ns-box w-95vw md:w-3/6-screen lg:w-2/6-screen"},[e("div",{staticClass:"border-b ns-box-header p-2 flex justify-between items-center"},[e("h3",{staticClass:"font-bold"},[t._v(t._s(t.__("Load Coupon")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.closePopup()}}})],1)]),t._v(" "),e("div",{staticClass:"p-1 ns-box-body"},[e("ns-tabs",{attrs:{active:t.activeTab},on:{changeTab:function(e){return t.setActiveTab(e)}}},[e("ns-tabs-item",{attrs:{label:t.__("Apply A Coupon"),padding:"p-2",identifier:"apply-coupon"}},[e("div",{staticClass:"border input-group info rounded flex"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],ref:"coupon",staticClass:"w-full text-primary p-2 outline-none",attrs:{type:"text",placeholder:t.placeHolder},domProps:{value:t.couponCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loadCoupon()},input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),t._v(" "),e("button",{staticClass:"px-3 py-2",on:{click:function(e){return t.loadCoupon()}}},[t._v(t._s(t.__("Load")))])]),t._v(" "),e("div",{staticClass:"pt-2"},[e("ns-notice",{attrs:{color:"info"},scopedSlots:t._u([{key:"description",fn:function(){return[t._v(t._s(t.__("Input the coupon code that should apply to the POS. If a coupon is issued for a customer, that customer must be selected priorly.")))]},proxy:!0}])})],1),t._v(" "),t.order&&void 0===t.order.customer_id?e("div",{staticClass:"pt-2 flex"},[e("button",{staticClass:"w-full border p-2 outline-none ns-numpad-key info cursor-pointer text-center",on:{click:function(e){return t.selectCustomer()}}},[t._v(t._s(t.__("Click here to choose a customer.")))])]):t._e(),t._v(" "),t.order&&void 0!==t.order.customer_id?e("div",{staticClass:"pt-2"},[e("ns-notice",{attrs:{color:"success"},scopedSlots:t._u([{key:"description",fn:function(){return[t._v(t._s(t.__("Loading Coupon For : ")+"".concat(t.order.customer.name," ").concat(t.order.customer.surname)))]},proxy:!0}],null,!1,2531213351)})],1):t._e(),t._v(" "),e("div",{staticClass:"overflow-hidden"},[t.customerCoupon?e("div",{staticClass:"pt-2 fade-in-entrance anim-duration-500 overflow-y-auto ns-scrollbar h-64"},[e("table",{staticClass:"w-full ns-table"},[e("tbody",[e("tr",[e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.__("Coupon Name")))]),t._v(" "),e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.customerCoupon.name))])]),t._v(" "),e("tr",[e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.__("Discount"))+" ("+t._s(t.getCouponType(t.customerCoupon.coupon.type))+")")]),t._v(" "),e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.getDiscountValue(t.customerCoupon.coupon)))])]),t._v(" "),e("tr",[e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.__("Usage")))]),t._v(" "),e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.customerCoupon.usage+"/"+(t.customerCoupon.limit_usage||t.__("Unlimited"))))])]),t._v(" "),e("tr",[e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.__("Valid From")))]),t._v(" "),e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.customerCoupon.coupon.valid_hours_start||t.__("N/A")))])]),t._v(" "),e("tr",[e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.__("Valid Till")))]),t._v(" "),e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.customerCoupon.coupon.valid_hours_end||t.__("N/A")))])]),t._v(" "),e("tr",[e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.__("Categories")))]),t._v(" "),e("td",{staticClass:"p-2 w-1/2 border"},[e("ul",[t._l(t.customerCoupon.coupon.categories,(function(r){return e("li",{key:r.id,staticClass:"rounded-full px-3 py-1 border"},[t._v(t._s(r.category.name))])})),t._v(" "),0===t.customerCoupon.coupon.categories.length?e("li",[t._v(t._s(t.__("Not applicable")))]):t._e()],2)])]),t._v(" "),e("tr",[e("td",{staticClass:"p-2 w-1/2 border"},[t._v(t._s(t.__("Products")))]),t._v(" "),e("td",{staticClass:"p-2 w-1/2 border"},[e("ul",[t._l(t.customerCoupon.coupon.products,(function(r){return e("li",{key:r.id,staticClass:"rounded-full px-3 py-1 border"},[t._v(t._s(r.product.name))])})),t._v(" "),0===t.customerCoupon.coupon.products.length?e("li",[t._v(t._s(t.__("Not applicable")))]):t._e()],2)])])])])]):t._e()])]),t._v(" "),e("ns-tabs-item",{attrs:{label:t.__("Active Coupons"),padding:"p-1",identifier:"active-coupons"}},[t.order?e("ul",[t._l(t.order.coupons,(function(r,n){return e("li",{key:n,staticClass:"flex justify-between elevation-surface border items-center px-2 py-1"},[e("div",{staticClass:"flex-auto"},[e("h3",{staticClass:"font-semibold text-primary p-2 flex justify-between"},[e("span",[t._v(t._s(r.name))]),t._v(" "),e("span",[t._v(t._s(t.getDiscountValue(r)))])])]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.removeCoupon(n)}}})],1)])})),t._v(" "),0===t.order.coupons.length?e("li",{staticClass:"flex justify-between elevation-surface border items-center p-2"},[t._v("\n                        "+t._s(t.__("No coupons applies to the cart."))+"\n                    ")]):t._e()],2):t._e()])],1)],1),t._v(" "),t.customerCoupon?e("div",{staticClass:"flex"},[e("button",{staticClass:"w-1/2 px-3 py-2 bg-success-tertiary text-white font-bold",on:{click:function(e){return t.apply()}}},[t._v("\n            "+t._s(t.__("Apply"))+"\n        ")]),t._v(" "),e("button",{staticClass:"w-1/2 px-3 py-2 bg-error-tertiary text-white font-bold",on:{click:function(e){return t.cancel()}}},[t._v("\n            "+t._s(t.__("Cancel"))+"\n        ")])]):t._e()])}),[],!1,null,null,null).exports},9251:(t,e,r)=>{"use strict";r.d(e,{Z:()=>l});var n=r(1487),i=r(3216),s=r(1419),o=r(6121);const a={data:function(){return{searchCustomerValue:"",orderSubscription:null,order:{},debounceSearch:null,customers:[],isLoading:!1}},computed:{customerSelected:function(){return!1}},watch:{searchCustomerValue:function(t){var e=this;clearTimeout(this.debounceSearch),this.debounceSearch=setTimeout((function(){e.searchCustomer(t)}),500)}},mounted:function(){var t=this;this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&t.resolveIfQueued(!1)})),this.orderSubscription=POS.order.subscribe((function(e){t.order=e})),this.getRecentCustomers(),this.$refs.searchField.focus()},destroyed:function(){this.orderSubscription.unsubscribe()},methods:{__:r(8094).__,resolveIfQueued:i.Z,attemptToChoose:function(){if(1===this.customers.length)return this.selectCustomer(this.customers[0]);n.kX.info("Too many result.").subscribe()},openCustomerHistory:function(t,e){e.stopImmediatePropagation(),this.$popup.close(),s.G.show(o.Z,{customer:t,activeTab:"account-payment"})},selectCustomer:function(t){var e=this;this.customers.forEach((function(t){return t.selected=!1})),t.selected=!0,this.isLoading=!0,POS.selectCustomer(t).then((function(r){e.isLoading=!1,e.resolveIfQueued(t)})).catch((function(t){e.isLoading=!1}))},searchCustomer:function(t){var e=this;n.ih.post("/api/nexopos/v4/customers/search",{search:t}).subscribe((function(t){t.forEach((function(t){return t.selected=!1})),e.customers=t}))},createCustomerWithMatch:function(t){this.resolveIfQueued(!1),s.G.show(o.Z,{name:t})},getRecentCustomers:function(){var t=this;this.isLoading=!0,n.ih.get("/api/nexopos/v4/customers/recently-active").subscribe({next:function(e){t.isLoading=!1,e.forEach((function(t){return t.selected=!1})),t.customers=e},error:function(e){t.isLoading=!1}})}}};const l=(0,r(1900).Z)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-box shadow-xl w-4/5-screen md:w-2/5-screen xl:w-108",attrs:{id:"ns-pos-customer-select-popup"}},[e("div",{staticClass:"border-b ns-box-header text-center font-semibold text-2xl py-2",attrs:{id:"header"}},[e("h2",[t._v(t._s(t.__("Select Customer")))])]),t._v(" "),e("div",{staticClass:"relative"},[e("div",{staticClass:"p-2 border-b ns-box-body items-center flex justify-between"},[e("span",[t._v(t._s(t.__("Selected"))+" : ")]),t._v(" "),e("div",{staticClass:"flex items-center justify-between"},[e("span",[t._v(t._s(t.order.customer?t.order.customer.name:"N/A"))]),t._v(" "),t.order.customer?e("button",{staticClass:"mx-2 rounded-full h-8 w-8 flex items-center justify-center border ns-inset-button hover:border-transparent",on:{click:function(e){return t.openCustomerHistory(t.order.customer,e)}}},[e("i",{staticClass:"las la-eye"})]):t._e()])]),t._v(" "),e("div",{staticClass:"p-2 border-b ns-box-body flex justify-between text-primary"},[e("div",{staticClass:"input-group flex-auto border rounded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchCustomerValue,expression:"searchCustomerValue"}],ref:"searchField",staticClass:"outline-none w-full p-2",attrs:{placeholder:"Search Customer",type:"text"},domProps:{value:t.searchCustomerValue},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.attemptToChoose()},input:function(e){e.target.composing||(t.searchCustomerValue=e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"h-3/5-screen xl:h-2/5-screen overflow-y-auto ns-scrollbar"},[e("ul",{staticClass:"ns-vertical-menu"},[t.customers&&0===t.customers.length?e("li",{staticClass:"p-2 text-center text-primary"},[t._v("\n                    "+t._s(t.__("No customer match your query..."))+"\n                ")]):t._e(),t._v(" "),t.customers&&0===t.customers.length?e("li",{staticClass:"p-2 cursor-pointer text-center text-primary",on:{click:function(e){return t.createCustomerWithMatch(t.searchCustomerValue)}}},[e("span",{staticClass:"border-b border-dashed border-info-primary"},[t._v(t._s(t.__("Create a customer")))])]):t._e(),t._v(" "),t._l(t.customers,(function(r){return e("li",{key:r.id,staticClass:"cursor-pointer p-2 border-b text-primary flex justify-between items-center",on:{click:function(e){return t.selectCustomer(r)}}},[e("span",[t._v(t._s(r.name))]),t._v(" "),e("p",{staticClass:"flex items-center"},[r.owe_amount>0?e("span",{staticClass:"text-error-primary"},[t._v("-"+t._s(t._f("currency")(r.owe_amount)))]):t._e(),t._v(" "),r.owe_amount>0?e("span",[t._v("/")]):t._e(),t._v(" "),e("span",{staticClass:"purchase-amount"},[t._v(t._s(t._f("currency")(r.purchases_amount)))]),t._v(" "),e("button",{staticClass:"mx-2 rounded-full h-8 w-8 flex items-center justify-center border ns-inset-button info",on:{click:function(e){return t.openCustomerHistory(r,e)}}},[e("i",{staticClass:"las la-eye"})])])])}))],2)]),t._v(" "),t.isLoading?e("div",{staticClass:"z-10 top-0 absolute w-full h-full flex items-center justify-center"},[e("ns-spinner",{attrs:{size:"24",border:"8"}})],1):t._e()])])}),[],!1,null,null,null).exports},6121:(t,e,r)=>{"use strict";r.d(e,{Z:()=>x});var n=r(2867),i=r(1487),s=r(1419),o=r(9251),a=r(3658),l=r(8094);const c={mounted:function(){this.closeWithOverlayClicked(),this.loadTransactionFields()},data:function(){return{fields:[],isSubmiting:!1,formValidation:new a.Z}},methods:{__:l.__,closeWithOverlayClicked:n.Z,proceed:function(){var t=this,e=this.$popupParams.customer,r=this.formValidation.extractFields(this.fields);this.isSubmiting=!0,i.ih.post("/api/nexopos/v4/customers/".concat(e.id,"/account-history"),r).subscribe({next:function(e){t.isSubmiting=!1,i.kX.success(e.message).subscribe(),t.$popupParams.resolve(e),t.$popup.close()},error:function(e){t.isSubmiting=!1,i.kX.error(e.message).subscribe(),t.$popupParams.reject(e)}})},close:function(){this.$popup.close(),this.$popupParams.reject(!1)},loadTransactionFields:function(){var t=this;i.ih.get("/api/nexopos/v4/fields/ns.customers-account").subscribe({next:function(e){t.fields=t.formValidation.createFields(e)}})}}};var u=r(1900);const d=(0,u.Z)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-6/7-screen md:w-5/7-screen lg:w-4/7-screen h-6/7-screen md:h-5/7-screen lg:h-5/7-screen overflow-hidden shadow-lg ns-box flex flex-col relative"},[e("div",{staticClass:"p-2 border-b ns-box-header flex justify-between items-center"},[e("h2",{staticClass:"font-semibold"},[t._v(t._s(t.__("New Transaction")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),e("div",{staticClass:"flex-auto overflow-y-auto"},[0===t.fields.length?e("div",{staticClass:"h-full w-full flex items-center justify-center"},[e("ns-spinner")],1):t._e(),t._v(" "),t.fields.length>0?e("div",{staticClass:"p-2"},t._l(t.fields,(function(t,r){return e("ns-field",{key:r,attrs:{field:t}})})),1):t._e()]),t._v(" "),e("div",{staticClass:"p-2 ns-box-footer justify-between border-t flex"},[e("div"),t._v(" "),e("div",{staticClass:"px-1"},[e("div",{staticClass:"-mx-2 flex flex-wrap"},[e("div",{staticClass:"px-1"},[e("ns-button",{attrs:{type:"error"},on:{click:function(e){return t.close()}}},[t._v(t._s(t.__("Close")))])],1),t._v(" "),e("div",{staticClass:"px-1"},[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.proceed()}}},[t._v(t._s(t.__("Proceed")))])],1)])])]),t._v(" "),0===t.isSubmiting?e("div",{staticClass:"h-full w-full absolute flex items-center justify-center",staticStyle:{background:"rgb(0 98 171 / 45%)"}},[e("ns-spinner")],1):t._e()])}),[],!1,null,null,null).exports;var f=r(7492),p=r(2381),h=r(3216),v=r(5507),m=r(1588);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function y(){y=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var s=e&&e.prototype instanceof b?e:b,o=Object.create(s.prototype),a=new $(n||[]);return i(o,"_invoke",{value:O(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",m={};function b(){}function g(){}function x(){}var w={};c(w,o,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(F([])));k&&k!==r&&n.call(k,o)&&(w=k);var P=x.prototype=b.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,s,o,a){var l=d(t[i],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==_(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function O(e,r,n){var i=f;return function(s,o){if(i===h)throw new Error("Generator is already running");if(i===v){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=d(e,r,n);if("normal"===c.type){if(i=n.done?v:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=v,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=d(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(_(e)+" is not iterable")}return g.prototype=x,i(P,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:g,configurable:!0}),g.displayName=c(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,c(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},j(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new S(u(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(P),c(P,l,"Generator"),c(P,o,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function b(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}const g={name:"ns-pos-customers",data:function(){return{activeTab:"create-customers",customer:null,subscription:null,orders:[],options:{},optionsSubscriber:null,selectedTab:"orders",isLoadingCoupons:!1,isLoadingRewards:!1,isLoadingHistory:!1,isLoadingOrders:!1,coupons:[],rewardsResponse:[],order:null,walletHistories:[]}},components:{nsPaginate:v.Z},destroyed:function(){this.subscription.unsubscribe(),this.optionsSubscriber.unsubscribe()},mounted:function(){var t=this;this.closeWithOverlayClicked(),this.optionsSubscriber=POS.options.subscribe((function(e){t.options=e})),this.subscription=POS.order.subscribe((function(e){t.order=e,void 0!==t.$popupParams.customer?(t.activeTab="account-payment",t.customer=t.$popupParams.customer,t.loadCustomerOrders()):void 0!==e.customer&&(t.activeTab="account-payment",t.customer=e.customer,t.loadCustomerOrders())})),this.popupCloser()},methods:{__:l.__,reload:function(){this.loadCustomerOrders()},popupResolver:h.Z,popupCloser:n.Z,getWalletHistoryLabel:function(t){switch(t){case"add":return(0,l.__)("Crediting");case"deduct":return(0,l.__)("Removing");case"refund":return(0,l.__)("Refunding");case"payment":return(0,l.__)("Payment");default:return(0,l.__)("Unknow")}},getType:function(t){switch(t){case"percentage_discount":return(0,l.__)("Percentage Discount");case"flat_discount":return(0,l.__)("Flat Discount")}},closeWithOverlayClicked:n.Z,openOrderOptions:function(t){var e,r=this;return(e=y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,r){s.G.show(m.Z,{order:t,resolve:e,reject:r})}));case 3:e.sent,r.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i.kX.error((0,l.__)("An error occurred while opening the order options")).subscribe();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(t){b(s,n,i,o,a,"next",t)}function a(t){b(s,n,i,o,a,"throw",t)}o(void 0)}))})()},doChangeTab:function(t){this.selectedTab=t,"coupons"===t&&this.loadCoupons(),"rewards"===t&&this.loadRewards(),"wallet-history"===t&&this.loadAccounHistory(),"orders"===t&&this.loadCustomerOrders()},loadAccounHistory:function(){var t=this;this.isLoadingHistory=!0,i.ih.get("/api/nexopos/v4/customers/".concat(this.customer.id,"/account-history")).subscribe({next:function(e){t.walletHistories=e.data,t.isLoadingHistory=!1},error:function(e){t.isLoadingHistory=!1}})},loadCoupons:function(){var t=this;this.isLoadingCoupons=!0,i.ih.get("/api/nexopos/v4/customers/".concat(this.customer.id,"/coupons")).subscribe({next:function(e){t.coupons=e,t.isLoadingCoupons=!1},error:function(e){t.isLoadingCoupons=!1}})},loadRewards:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/nexopos/v4/customers/".concat(this.customer.id,"/rewards");this.isLoadingRewards=!0,i.ih.get(e).subscribe({next:function(e){t.rewardsResponse=e,t.isLoadingRewards=!1},error:function(e){t.isLoadingRewards=!1}})},prefillForm:function(t){void 0!==this.$popupParams.name&&(t.main.value=this.$popupParams.name)},openCustomerSelection:function(){this.$popup.close(),s.G.show(o.Z)},loadCustomerOrders:function(){var t=this;this.isLoadingOrders=!0,i.ih.get("/api/nexopos/v4/customers/".concat(this.customer.id,"/orders")).subscribe({next:function(e){t.orders=e,t.isLoadingOrders=!1},error:function(e){t.isLoadingOrders=!1}})},newTransaction:function(t){new Promise((function(e,r){s.G.show(d,{customer:t,resolve:e,reject:r})})).then((function(e){POS.loadCustomer(t.id).subscribe((function(t){POS.selectCustomer(t)}))}))},applyCoupon:function(t){var e=this;void 0===this.order.customer?s.G.show(p.default,{title:(0,l.__)("Use Customer ?"),message:(0,l.__)("No customer is selected. Would you like to proceed with this customer ?"),onAction:function(r){r&&POS.selectCustomer(e.customer).then((function(r){e.proceedApplyingCoupon(t)}))}}):this.order.customer.id===this.customer.id?this.proceedApplyingCoupon(t):this.order.customer.id!==this.customer.id&&s.G.show(p.default,{title:(0,l.__)("Change Customer ?"),message:(0,l.__)("Would you like to assign this customer to the ongoing order ?"),onAction:function(r){r&&POS.selectCustomer(e.customer).then((function(r){e.proceedApplyingCoupon(t)}))}})},proceedApplyingCoupon:function(t){var e=this;new Promise((function(e,r){s.G.show(f.Z,{apply_coupon:t.code,resolve:e,reject:r})})).then((function(t){e.popupResolver(!1)})).catch((function(t){}))},handleSavedCustomer:function(t){i.kX.success(t.message).subscribe(),POS.selectCustomer(t.entry),this.$popup.close()}}};const x=(0,u.Z)(g,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-lg rounded w-95vw h-95vh lg:w-3/5-screen flex flex-col overflow-hidden",attrs:{id:"ns-pos-customers"}},[e("div",{staticClass:"ns-header p-2 flex justify-between items-center border-b"},[e("h3",{staticClass:"font-semibold"},[t._v(t._s(t.__("Customers")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.$popup.close()}}})],1)]),t._v(" "),e("div",{staticClass:"ns-body flex-auto flex p-2 overflow-y-auto"},[e("ns-tabs",{attrs:{active:t.activeTab},on:{active:function(e){t.activeTab=e}}},[e("ns-tabs-item",{attrs:{identifier:"create-customers",label:"New Customer"}},["yes"===t.options.ns_pos_customers_creation_enabled?e("ns-crud-form",{attrs:{"submit-url":"/api/nexopos/v4/crud/ns.customers",src:"/api/nexopos/v4/crud/ns.customers/form-config"},on:{updated:function(e){return t.prefillForm(e)},save:function(e){return t.handleSavedCustomer(e)}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.__("Customer Name")))]},proxy:!0},{key:"save",fn:function(){return[t._v(t._s(t.__("Save Customer")))]},proxy:!0}],null,!1,2432171054)}):t._e(),t._v(" "),"yes"!==t.options.ns_pos_customers_creation_enabled?e("div",{staticClass:"h-full flex-col w-full flex items-center justify-center text-primary"},[e("i",{staticClass:"lar la-hand-paper ns-icon text-6xl"}),t._v(" "),e("h3",{staticClass:"font-medium text-2xl"},[t._v(t._s(t.__("Not Authorized")))]),t._v(" "),e("p",[t._v(t._s(t.__("Creating customers has been explicitly disabled from the settings.")))])]):t._e()],1),t._v(" "),e("ns-tabs-item",{staticClass:"flex",staticStyle:{padding:"0!important"},attrs:{identifier:"account-payment",label:t.__("Customer Account")}},[null===t.customer?e("div",{staticClass:"flex-auto w-full flex items-center justify-center flex-col p-4"},[e("i",{staticClass:"lar la-frown text-6xl"}),t._v(" "),e("h3",{staticClass:"font-medium text-2xl"},[t._v(t._s(t.__("No Customer Selected")))]),t._v(" "),e("p",[t._v(t._s(t.__("In order to see a customer account, you need to select one customer.")))]),t._v(" "),e("div",{staticClass:"my-2"},[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.openCustomerSelection()}}},[t._v(t._s(t.__("Select Customer")))])],1)]):t._e(),t._v(" "),t.customer?e("div",{staticClass:"flex flex-col flex-auto"},[e("div",{staticClass:"flex-auto p-2 flex flex-col"},[e("div",{staticClass:"-mx-4 flex flex-wrap ns-tab-cards"},[e("div",{staticClass:"px-4 mb-4 w-full"},[e("h2",{staticClass:"font-semibold"},[t._v(t._s(t.__("Summary For"))+" : "+t._s(t.customer.name))])]),t._v(" "),e("div",{staticClass:"px-4 mb-4 w-full md:w-1/4"},[e("div",{staticClass:"rounded-lg shadow bg-transparent bg-gradient-to-br from-success-secondary to-green-700 p-2 flex flex-col text-white"},[e("h3",{staticClass:"font-medium text-lg"},[t._v(t._s(t.__("Total Purchases")))]),t._v(" "),e("div",{staticClass:"w-full flex justify-end"},[e("h2",{staticClass:"font-bold"},[t._v(t._s(t._f("currency")(t.customer.purchases_amount)))])])])]),t._v(" "),e("div",{staticClass:"px-4 mb-4 w-full md:w-1/4"},[e("div",{staticClass:"rounded-lg shadow bg-transparent bg-gradient-to-br from-error-secondary to-red-700 p-2 text-white"},[e("h3",{staticClass:"font-medium text-lg"},[t._v(t._s(t.__("Total Owed")))]),t._v(" "),e("div",{staticClass:"w-full flex justify-end"},[e("h2",{staticClass:"text-2xl font-bold"},[t._v(t._s(t._f("currency")(t.customer.owed_amount)))])])])]),t._v(" "),e("div",{staticClass:"px-4 mb-4 w-full md:w-1/4"},[e("div",{staticClass:"rounded-lg shadow bg-transparent bg-gradient-to-br from-blue-500 to-blue-700 p-2 text-white"},[e("h3",{staticClass:"font-medium text-lg"},[t._v(t._s(t.__("Wallet Amount")))]),t._v(" "),e("div",{staticClass:"w-full flex justify-end"},[e("h2",{staticClass:"text-2xl font-bold"},[t._v(t._s(t._f("currency")(t.customer.account_amount)))])])])]),t._v(" "),e("div",{staticClass:"px-4 mb-4 w-full md:w-1/4"},[e("div",{staticClass:"rounded-lg shadow bg-transparent bg-gradient-to-br from-teal-500 to-teal-700 p-2 text-white"},[e("h3",{staticClass:"font-medium text-lg"},[t._v(t._s(t.__("Credit Limit")))]),t._v(" "),e("div",{staticClass:"w-full flex justify-end"},[e("h2",{staticClass:"text-2xl font-bold"},[t._v(t._s(t._f("currency")(t.customer.credit_limit_amount)))])])])])]),t._v(" "),e("div",{staticClass:"flex flex-auto flex-col overflow-hidden"},[e("ns-tabs",{attrs:{active:t.selectedTab},on:{changeTab:function(e){return t.doChangeTab(e)}}},[e("ns-tabs-item",{attrs:{identifier:"orders",label:t.__("Orders")}},[t.isLoadingOrders?e("div",{staticClass:"flex-auto h-full justify-center flex items-center"},[e("ns-spinner",{attrs:{size:"36"}})],1):t._e(),t._v(" "),t.isLoadingOrders?t._e():[e("div",{staticClass:"py-2 w-full"},[e("h2",{staticClass:"font-semibold text-primary"},[t._v(t._s(t.__("Last Purchases")))])]),t._v(" "),e("div",{staticClass:"flex-auto flex-col flex overflow-hidden"},[e("div",{staticClass:"flex-auto overflow-y-auto"},[e("table",{staticClass:"table ns-table w-full"},[e("thead",[e("tr",{staticClass:"text-primary"},[e("th",{staticClass:"p-2 border font-semibold",attrs:{colspan:"3",width:"150"}},[t._v(t._s(t.__("Order")))]),t._v(" "),e("th",{staticClass:"p-2 border font-semibold",attrs:{width:"50"}},[t._v(t._s(t.__("Options")))])])]),t._v(" "),e("tbody",{staticClass:"text-primary"},[0===t.orders.length?e("tr",[e("td",{staticClass:"border p-2 text-center",attrs:{colspan:"4"}},[t._v(t._s(t.__("No orders...")))])]):t._e(),t._v(" "),t._l(t.orders,(function(r){return e("tr",{key:r.id},[e("td",{staticClass:"border p-2 text-center",attrs:{colspan:"3"}},[e("div",{staticClass:"flex flex-col items-start"},[e("h3",{staticClass:"font-bold"},[t._v(t._s(t.__("Code"))+": "+t._s(r.code))]),t._v(" "),e("div",{staticClass:"md:-mx-2 w-full flex flex-col md:flex-row"},[e("div",{staticClass:"md:px-2 flex items-start w-full md:w-1/4"},[e("small",[t._v(t._s(t.__("Total"))+": "+t._s(t._f("currency")(r.total)))])]),t._v(" "),e("div",{staticClass:"md:px-2 flex items-start w-full md:w-1/4"},[e("small",[t._v(t._s(t.__("Status"))+": "+t._s(r.human_status))])]),t._v(" "),e("div",{staticClass:"md:px-2 flex items-start w-full md:w-1/4"},[e("small",[t._v(t._s(t.__("Delivery"))+": "+t._s(r.human_delivery_status))])])])])]),t._v(" "),e("td",{staticClass:"border p-2 text-center"},[e("button",{staticClass:"rounded-full h-8 px-2 flex items-center justify-center border border-gray ns-inset-button success",on:{click:function(e){return t.openOrderOptions(r)}}},[e("i",{staticClass:"las la-wallet"}),t._v(" "),e("span",{staticClass:"ml-1"},[t._v(t._s(t.__("Options")))])])])])}))],2)])])])]],2),t._v(" "),e("ns-tabs-item",{attrs:{identifier:"wallet-history",label:t.__("Wallet History")}},[t.isLoadingHistory?e("div",{staticClass:"flex-auto h-full justify-center flex items-center"},[e("ns-spinner",{attrs:{size:"36"}})],1):t._e(),t._v(" "),t.isLoadingHistory?t._e():[e("div",{staticClass:"py-2 w-full"},[e("h2",{staticClass:"font-semibold text-primary"},[t._v(t._s(t.__("Wallet History")))])]),t._v(" "),e("div",{staticClass:"flex-auto flex-col flex overflow-hidden"},[e("div",{staticClass:"flex-auto overflow-y-auto"},[e("table",{staticClass:"table ns-table w-full"},[e("thead",[e("tr",{staticClass:"text-primary"},[e("th",{staticClass:"p-2 border font-semibold",attrs:{colspan:"3",width:"150"}},[t._v(t._s(t.__("Transaction")))])])]),t._v(" "),e("tbody",{staticClass:"text-primary"},[0===t.walletHistories.length?e("tr",[e("td",{staticClass:"border p-2 text-center",attrs:{colspan:"3"}},[t._v(t._s(t.__("No History...")))])]):t._e(),t._v(" "),t._l(t.walletHistories,(function(r){return e("tr",{key:r.id},[e("td",{staticClass:"border p-2 text-center",attrs:{colspan:"3"}},[e("div",{staticClass:"flex flex-col items-start"},[e("h3",{staticClass:"font-bold"},[t._v(t._s(t.__("Transaction"))+": "+t._s(t.getWalletHistoryLabel(r.operation)))]),t._v(" "),e("div",{staticClass:"md:-mx-2 w-full flex flex-col md:flex-row"},[e("div",{staticClass:"md:px-2 flex items-start w-full md:w-1/3"},[e("small",[t._v(t._s(t.__("Amount"))+": "+t._s(t._f("currency")(r.amount)))])]),t._v(" "),e("div",{staticClass:"md:px-2 flex items-start w-full md:w-1/3"},[e("small",[t._v(t._s(t.__("Date"))+": "+t._s(r.created_at))])])])])])])}))],2)])])])]],2),t._v(" "),e("ns-tabs-item",{attrs:{identifier:"coupons",label:t.__("Coupons")}},[t.isLoadingCoupons?e("div",{staticClass:"flex-auto h-full justify-center flex items-center"},[e("ns-spinner",{attrs:{size:"36"}})],1):t._e(),t._v(" "),t.isLoadingCoupons?t._e():[e("div",{staticClass:"py-2 w-full"},[e("h2",{staticClass:"font-semibold text-primary"},[t._v(t._s(t.__("Coupons")))])]),t._v(" "),e("div",{staticClass:"flex-auto flex-col flex overflow-hidden"},[e("div",{staticClass:"flex-auto overflow-y-auto"},[e("table",{staticClass:"table ns-table w-full"},[e("thead",[e("tr",{staticClass:"text-primary"},[e("th",{staticClass:"p-2 border font-semibold",attrs:{width:"150"}},[t._v(t._s(t.__("Name")))]),t._v(" "),e("th",{staticClass:"p-2 border font-semibold"},[t._v(t._s(t.__("Type")))]),t._v(" "),e("th",{staticClass:"p-2 border font-semibold"})])]),t._v(" "),e("tbody",{staticClass:"text-primary text-sm"},[0===t.coupons.length?e("tr",[e("td",{staticClass:"border p-2 text-center",attrs:{colspan:"4"}},[t._v(t._s(t.__("No coupons for the selected customer...")))])]):t._e(),t._v(" "),t._l(t.coupons,(function(r){return e("tr",{key:r.id},[e("td",{staticClass:"border p-2",attrs:{width:"300"}},[e("h3",[t._v(t._s(r.name))]),t._v(" "),e("div",{},[e("ul",{staticClass:"-mx-2 flex"},[e("li",{staticClass:"text-xs text-primary px-2"},[t._v(t._s(t.__("Usage :"))+" "+t._s(r.usage)+"/"+t._s(r.limit_usage))]),t._v(" "),e("li",{staticClass:"text-xs text-primary px-2"},[t._v(t._s(t.__("Code :"))+" "+t._s(r.code))])])])]),t._v(" "),e("td",{staticClass:"border p-2 text-center"},[t._v(t._s(t.getType(r.coupon.type))+"\n                                                                "),"percentage_discount"===r.coupon.type?e("span",[t._v("\n                                                                    ("+t._s(r.coupon.discount_value)+"%)\n                                                                ")]):t._e(),t._v(" "),"flat_discount"===r.coupon.type?e("span",[t._v("\n                                                                    ("+t._s(t._f("currency")(r.coupon.discount_value))+")\n                                                                ")]):t._e()]),t._v(" "),e("td",{staticClass:"border p-2 text-right"},[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.applyCoupon(r)}}},[t._v(t._s(t.__("Use Coupon")))])],1)])}))],2)])])])]],2),t._v(" "),e("ns-tabs-item",{attrs:{identifier:"rewards",label:t.__("Rewards")}},[t.isLoadingRewards?e("div",{staticClass:"flex-auto h-full justify-center flex items-center"},[e("ns-spinner",{attrs:{size:"36"}})],1):t._e(),t._v(" "),t.isLoadingRewards?t._e():[e("div",{staticClass:"py-2 w-full"},[e("h2",{staticClass:"font-semibold text-primary"},[t._v(t._s(t.__("Rewards")))])]),t._v(" "),e("div",{staticClass:"flex-auto flex-col flex overflow-hidden"},[e("div",{staticClass:"flex-auto overflow-y-auto"},[e("table",{staticClass:"table ns-table w-full"},[e("thead",[e("tr",{staticClass:"text-primary"},[e("th",{staticClass:"p-2 border font-semibold",attrs:{width:"150"}},[t._v(t._s(t.__("Name")))]),t._v(" "),e("th",{staticClass:"p-2 border font-semibold"},[t._v(t._s(t.__("Points")))]),t._v(" "),e("th",{staticClass:"p-2 border font-semibold"},[t._v(t._s(t.__("Target")))])])]),t._v(" "),t.rewardsResponse.data?e("tbody",{staticClass:"text-primary text-sm"},[0===t.rewardsResponse.data.length?e("tr",[e("td",{staticClass:"border p-2 text-center",attrs:{colspan:"4"}},[t._v(t._s(t.__("No rewards available the selected customer...")))])]):t._e(),t._v(" "),t._l(t.rewardsResponse.data,(function(r){return e("tr",{key:r.id},[e("td",{staticClass:"border p-2",attrs:{width:"300"}},[e("h3",{staticClass:"text-center"},[t._v(t._s(r.reward_name))])]),t._v(" "),e("td",{staticClass:"border p-2",attrs:{width:"300"}},[e("h3",{staticClass:"text-center"},[t._v(t._s(r.points))])]),t._v(" "),e("td",{staticClass:"border p-2",attrs:{width:"300"}},[e("h3",{staticClass:"text-center"},[t._v(t._s(r.target))])])])}))],2):t._e()])])]),t._v(" "),e("div",{staticClass:"py-1 flex justify-end"},[e("ns-paginate",{attrs:{pagination:t.rewardsResponse},on:{load:function(e){return t.loadRewards(e)}}})],1)]],2)],1)],1)]),t._v(" "),e("div",{staticClass:"p-2 border-t border-box-edge flex justify-between"},[e("div"),t._v(" "),e("div",[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.newTransaction(t.customer)}}},[t._v(t._s(t.__("Account Transaction")))])],1)])]):t._e()])],1)],1)])}),[],!1,null,null,null).exports},4207:(t,e,r)=>{"use strict";r.d(e,{Z:()=>d});var n=r(3658),i=r(1487),s=r(8094);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}const u={name:"ns-pos-layaway-popup",data:function(){return{fields:[],instalments:[],formValidation:new n.Z,subscription:null,totalPayments:0}},mounted:function(){var t=this;this.loadFields(),this.subscription=this.$popup.event.subscribe((function(e){["click-overlay","press-esc"].includes(e.event)&&t.close()}))},updated:function(){var t=this;setTimeout((function(){document.querySelector(".is-popup #total_instalments").addEventListener("change",(function(){var e=t.formValidation.extractFields(t.fields).total_instalments;t.generatePaymentFields(e)})),document.querySelector(".is-popup #total_instalments").addEventListener("focus",(function(){document.querySelector(".is-popup #total_instalments").select()}))}),200)},computed:{expectedPayment:function(){var t=this.order.customer.group.minimal_credit_payment;return nsRawCurrency(this.order.total*t/100)},order:function(){return this.$popupParams.order.instalments=this.$popupParams.order.instalments.map((function(t){for(var e in t)if("object"!==c(t[e]))if("date"===e){var r={type:"date",name:e,label:(0,s.__)("Date"),disabled:1===t.paid,value:moment(t.date).format("YYYY-MM-DD")};t[e]=r}else if("amount"===e){var n={type:"number",name:e,label:(0,s.__)("Amount"),disabled:1===t.paid,value:t.amount};t[e]=n}else if(!["paid","id"].includes(e)){var i={type:"hidden",name:e,value:t[e]};t[e]=i}return t})),this.$popupParams.order}},destroyed:function(){this.subscription.unsubscribe()},methods:{__:s.__,refreshTotalPayments:function(){if(this.order.instalments.length>0){var t=nsRawCurrency(this.order.instalments.map((function(t){return parseFloat(t.amount.value)||0})).reduce((function(t,e){return parseFloat(t)+parseFloat(e)})));this.totalPayments=this.order.total-t}else this.totalPayments=0},removeInstalment:function(t){var e=this.order.instalments.indexOf(t);this.order.instalments.splice(e,1),this.$forceUpdate()},generatePaymentFields:function(t){var e=this;this.order.instalments=new Array(parseInt(t)).fill("").map((function(t,r){return{date:{type:"date",name:"date",label:"Date",value:0===r?ns.date.moment.format("YYYY-MM-DD"):""},amount:{type:"number",name:"amount",label:"Amount",value:0===r?e.expectedPayment:0},readonly:{type:"hidden",name:"readonly",value:e.expectedPayment>0&&0===r}}})),this.$forceUpdate(),this.refreshTotalPayments()},close:function(){this.$popupParams.reject({status:"failed",message:(0,s.__)("You must define layaway settings before proceeding.")}),this.$popup.close()},skipInstalments:function(){this.expectedPayment>0?(this.order.instalments=[{amount:this.expectedPayment,date:ns.date.current}],this.order.final_payment_date=this.order.instalments.reverse()[0].date,this.order.total_instalments=this.order.instalments.length,this.order.support_instalments=!1):(this.order.final_payment_date=ns.date.current,this.order.total_instalments=0,this.order.support_instalments=!1),this.$popup.close(),POS.order.next(this.order);var t=this.$popupParams,e=t.resolve;t.reject;return e({order:this.order,skip_layaway:!0})},updateOrder:function(){var t=this;if(0===this.order.instalments.length)return i.kX.error((0,s.__)("Please provide instalments before proceeding.")).subscribe();if(this.fields.forEach((function(e){return t.formValidation.validateField(e)})),!this.formValidation.fieldsValid(this.fields))return i.kX.error((0,s.__)("Unable to process, the form is not valid")).subscribe();this.$forceUpdate();var e=this.order.instalments.map((function(t){return{amount:parseFloat(t.amount.value),date:t.date.value}})),r=nsRawCurrency(e.map((function(t){return t.amount})).reduce((function(t,e){return parseFloat(t)+parseFloat(e)})));if(e.filter((function(t){return void 0===t.date||""===t.date})).length>0)return i.kX.error((0,s.__)("One or more instalments has an invalid date.")).subscribe();if(e.filter((function(t){return!(t.amount>0)})).length>0)return i.kX.error((0,s.__)("One or more instalments has an invalid amount.")).subscribe();if(e.filter((function(t){return moment(t.date).isBefore(ns.date.moment.startOf("day"))})).length>0)return i.kX.error((0,s.__)("One or more instalments has a date prior to the current date.")).subscribe();var n=e.filter((function(t){return moment(t.date).isSame(ns.date.moment.startOf("day"),"day")})),o=0;if(n.forEach((function(t){o+=parseFloat(t.amount)})),o<this.expectedPayment)return i.kX.error((0,s.__)("The payment to be made today is less than what is expected.")).subscribe();if(r<nsRawCurrency(this.order.total))return i.kX.error((0,s.__)("Total instalments must be equal to the order total.")).subscribe();e.sort((function(t,e){var r=moment(t.date),n=moment(e.date);return r.isBefore(n)?-1:r.isAfter(n)?1:0}));var l=this.formValidation.extractFields(this.fields);l.final_payment_date=e.reverse()[0].date,l.total_instalments=e.length;var c=a(a(a({},this.$popupParams.order),l),{},{instalments:e}),u=this.$popupParams,d=u.resolve;u.reject;return this.$popup.close(),POS.order.next(c),d({order:c,skip_layaway:!1})},loadFields:function(){var t=this;i.ih.get("/api/nexopos/v4/fields/ns.layaway").subscribe((function(e){t.fields=t.formValidation.createFields(e),t.fields.forEach((function(e){"total_instalments"===e.name&&(e.value=t.order.total_instalments||0)}))}))}}};const d=(0,r(1900).Z)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-lg h-95vh md:h-5/6-screen lg:h-5/6-screen w-95vw md:w-4/6-screen lg:w-3/6-screen ns-box flex flex-col"},[e("div",{staticClass:"p-2 border-b ns-box-header flex justify-between items-center"},[e("h3",{staticClass:"font-semibold"},[t._v(t._s(t.__("Layaway Parameters")))]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),e("div",{staticClass:"p-2 flex-auto flex flex-col relative overflow-y-auto"},[0===t.fields.length?e("div",{staticClass:"absolute h-full w-full flex items-center justify-center"},[e("ns-spinner")],1):t._e(),t._v(" "),e("div",{staticClass:"p-2 elevation-surface info mb-2 text-center text-2xl font-bold flex justify-between"},[e("span",[t._v(t._s(t.__("Minimum Payment")))]),t._v(" "),e("span",[t._v(t._s(t._f("currency")(t.expectedPayment)))])]),t._v(" "),e("div",t._l(t.fields,(function(t,r){return e("ns-field",{key:r,attrs:{field:t}})})),1),t._v(" "),e("div",{staticClass:"flex flex-col flex-auto overflow-hidden"},[e("div",{staticClass:"border-b ns-box-body"},[e("h3",{staticClass:"text-2xl flex justify-between py-2 text-primary"},[e("span",[t._v(t._s(t.__("Instalments & Payments")))]),t._v(" "),e("p",[e("span",{staticClass:"text-sm"},[t._v("("+t._s(t._f("currency")(t.totalPayments))+")")]),t._v(" "),e("span",[t._v("\n                        "+t._s(t._f("currency")(t.order.total))+"\n                        ")])])]),t._v(" "),e("p",{staticClass:"p-2 mb-2 text-center bg-green-200 text-green-700"},[t._v("\n                    "+t._s(t.__("The final payment date must be the last within the instalments."))+"\n                ")])]),t._v(" "),e("div",{staticClass:"flex-auto overflow-y-auto"},[t._l(t.order.instalments,(function(r,n){return e("div",{key:n,staticClass:"flex w-full -mx-1 py-2"},[e("div",{staticClass:"flex flex-auto"},[e("div",{staticClass:"px-1 w-full md:w-1/2"},[e("ns-field",{attrs:{field:r.date},on:{change:function(e){return t.refreshTotalPayments()}}})],1),t._v(" "),e("div",{staticClass:"px-1 w-full md:w-1/2"},[e("ns-field",{attrs:{field:r.amount},on:{change:function(e){return t.refreshTotalPayments()}}})],1)]),t._v(" "),e("div",{staticClass:"flex items-center"},[e("button",{staticClass:"items-center flex justify-center h-8 w-8 rounded border text-primary ns-inset-button error",on:{click:function(e){return t.removeInstalment(r)}}},[e("i",{staticClass:"las la-times"})])])])})),t._v(" "),0===t.order.instalments.length?e("div",{staticClass:"my-2"},[e("p",{staticClass:"p-2 elevation-surface border text-primary text-center"},[t._v(t._s(t.__("There is no instalment defined. Please set how many instalments are allowed for this order")))])]):t._e()],2)])]),t._v(" "),e("div",{staticClass:"p-2 flex border-t ns-box-footer justify-between flex-shrink-0"},[e("div",{staticClass:"md:-mx-1 flex flex-col md:flex-row"},[e("div",{staticClass:"md:px-1"},[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.skipInstalments()}}},[t._v(t._s(t.__("Skip Instalments")))])],1)]),t._v(" "),e("div",{staticClass:"md:-mx-1 flex flex-col md:flex-row"},[e("div",{staticClass:"md:px-1"},[e("ns-button",{attrs:{type:"error"},on:{click:function(e){return t.close()}}},[t._v(t._s(t.__("Cancel")))])],1),t._v(" "),e("div",{staticClass:"md:px-1"},[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.updateOrder()}}},[t._v(t._s(t.__("Proceed")))])],1)])])])}),[],!1,null,null,null).exports},4140:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});const n={name:"ns-pos-loading-popup"};const i=(0,r(1900).Z)(n,(function(){return(0,this._self._c)("ns-spinner")}),[],!1,null,null,null).exports},1951:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(3216),i=r(8094),s=r(2867);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var s=e&&e.prototype instanceof b?e:b,o=Object.create(s.prototype),a=new $(n||[]);return i(o,"_invoke",{value:O(t,r,a)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",v="suspendedYield",m="executing",_="completed",y={};function b(){}function g(){}function x(){}var w={};d(w,l,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(F([])));k&&k!==r&&n.call(k,l)&&(w=k);var P=x.prototype=b.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,s,a,l){var c=p(t[i],t,s);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==o(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,l)}),(function(t){r("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,l)}))}l(c.arg)}var s;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return s=s?s.then(i,i):i()}})}function O(e,r,n){var i=h;return function(s,o){if(i===m)throw new Error("Generator is already running");if(i===_){if("throw"===s)throw o;return{value:t,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=p(e,r,n);if("normal"===c.type){if(i=n.done?_:v,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var s=p(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,y;var o=s.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(o(e)+" is not iterable")}return g.prototype=x,i(P,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:g,configurable:!0}),g.displayName=d(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,u,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},j(S.prototype),d(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new S(f(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(P),d(P,u,"Generator"),d(P,l,(function(){return this})),d(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function l(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}const c={data:function(){return{types:[],typeSubscription:null}},mounted:function(){var t=this;this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&t.resolveIfQueued(!1)})),this.typeSubscription=POS.types.subscribe((function(e){t.types=e,1===Object.values(t.types).length&&t.select(Object.keys(t.types)[0])})),this.popupCloser()},destroyed:function(){this.typeSubscription.unsubscribe()},methods:{__:i.__,popupCloser:s.Z,popupResolver:n.Z,resolveIfQueued:n.Z,select:function(t){var e,r=this;return(e=a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.values(r.types).forEach((function(t){return t.selected=!1})),r.types[t].selected=!0,n=r.types[t],e.prev=3,e.next=6,POS.triggerOrderTypeSelection(n);case 6:e.sent,POS.types.next(r.types),r.resolveIfQueued(n),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:case"end":return e.stop()}}),e,null,[[3,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(t){l(s,n,i,o,a,"next",t)}function a(t){l(s,n,i,o,a,"throw",t)}o(void 0)}))})()}}};const u=(0,r(1900).Z)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-full w-4/5-screen md:w-2/5-screen lg:w-2/5-screen xl:w-2/6-screen shadow-lg",attrs:{id:"ns-order-type"}},[e("div",{staticClass:"h-16 flex justify-center items-center",attrs:{id:"header"}},[e("h3",{staticClass:"font-bold"},[t._v(t._s(t.__("Define The Order Type")))])]),t._v(" "),0===Object.values(t.types).length?e("div",{staticClass:"ns-box-body grid grid-flow-row grid-cols-1 grid-rows-1"},[e("div",{staticClass:"h-full w-full flex items-center justify-center flex-col"},[e("i",{staticClass:"las la-frown text-7xl"}),t._v(" "),e("div",{staticClass:"p-4 md:w-2/3"},[e("p",{staticClass:"text-center"},[t._v(t._s(t.__("No payment type has been selected on the settings. Please check your POS features and choose the supported order type")))]),t._v(" "),e("div",{staticClass:"flex justify-center py-1"},[e("ns-link",{attrs:{target:"_blank",type:"info",href:"https://my.nexopos.com/en/documentation/components/order-types"}},[t._v(t._s(t.__("Read More")))])],1)])])]):t._e(),t._v(" "),Object.values(t.types).length>0?e("div",{staticClass:"ns-box-body grid grid-flow-row grid-cols-2 grid-rows-2"},t._l(t.types,(function(r){return e("div",{key:r.identifier,staticClass:"ns-numpad-key info h-56 flex items-center justify-center flex-col cursor-pointer border",class:r.selected?"active":"",on:{click:function(e){return t.select(r.identifier)}}},[e("img",{staticClass:"w-32 h-32",attrs:{src:r.icon,alt:""}}),t._v(" "),e("h4",{staticClass:"font-semibold text-xl my-2"},[t._v(t._s(r.label))])])})),0):t._e()])}),[],!1,null,null,null).exports},3287:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r(1487),i=r(8094),s=r(2867),o=r(8321),a=r(9693);const l={components:{nsNumpad:o.Z,nsNumpadPlus:a.Z},data:function(){return{finalValue:1,virtualStock:null,options:{},optionsSubscription:null,allSelected:!0,isLoading:!1}},beforeDestroy:function(){this.optionsSubscription.unsubscribe()},mounted:function(){var t=this;this.optionsSubscription=POS.options.subscribe((function(e){t.options=e})),this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&(t.$popupParams.reject(!1),t.$popup.close())})),this.$popupParams.product.quantity&&(this.finalValue=this.$popupParams.product.quantity),this.popupCloser()},destroyed:function(){nsHotPress.destroy("pos-quantity-numpad"),nsHotPress.destroy("pos-quantity-backspace"),nsHotPress.destroy("pos-quantity-enter")},methods:{__:i.__,popupCloser:s.Z,closePopup:function(){this.$popupParams.reject(!1),this.$popup.close()},updateQuantity:function(t){this.finalValue=t},defineQuantity:function(t){var e=this.$popupParams,r=e.product,s=e.data;if(0===t)return n.kX.error((0,i.__)("Please provide a quantity")).subscribe();if("enabled"===r.$original().stock_management&&"materialized"===r.$original().type){var o=POS.getStockUsage(r.$original().id,s.unit_quantity_id)-(r.quantity||0);if(t>parseFloat(s.$quantities().quantity)-o)return n.kX.error((0,i.__)("Unable to add the product, there is not enough stock. Remaining %s").replace("%s",s.$quantities().quantity-o)).subscribe()}this.resolve({quantity:t})},resolve:function(t){this.$popupParams.resolve(t),this.$popup.close()}}};const c=(0,r(1900).Z)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-box shadow min-h-2/5-screen w-3/4-screen md:w-3/5-screen lg:w-2/5-screen xl:w-2/5-screen relative"},[t.isLoading?e("div",{staticClass:"flex w-full h-full absolute top-O left-0 items-center justify-center",staticStyle:{background:"rgb(202 202 202 / 49%)"},attrs:{id:"loading-overlay"}},[e("ns-spinner")],1):t._e(),t._v(" "),e("div",{staticClass:"flex-shrink-0 flex justify-between items-center p-2 border-b ns-box-header"},[e("div",[e("h1",{staticClass:"text-xl font-bold text-primary text-center"},[t._v(t._s(t.__("Define Quantity")))])]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.closePopup()}}})],1)]),t._v(" "),e("div",{staticClass:"h-24 border-b primary ns-box-body flex items-center justify-center",attrs:{id:"screen"}},[e("h1",{staticClass:"font-bold text-3xl"},[t._v(t._s(t.finalValue))])]),t._v(" "),"default"===t.options.ns_pos_numpad?e("ns-numpad",{attrs:{floating:t.options.ns_pos_allow_decimal_quantities,value:t.finalValue},on:{changed:function(e){return t.updateQuantity(e)},next:function(e){return t.defineQuantity(e)}}}):t._e(),t._v(" "),"advanced"===t.options.ns_pos_numpad?e("ns-numpad-plus",{attrs:{value:t.finalValue},on:{changed:function(e){return t.updateQuantity(e)},next:function(e){return t.defineQuantity(e)}}}):t._e()],1)}),[],!1,null,null,null).exports},4054:(t,e,r)=>{"use strict";r.d(e,{Z:()=>d});var n=r(1487),i=r(3216),s=r(3658);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const u={name:"ns-pos-shipping-popup",computed:{activeTabFields:function(){if(null!==this.tabs)for(var t in this.tabs)if(this.tabs[t].active)return this.tabs[t].fields;return[]},useBillingInfo:function(){return null!==this.tabs?this.tabs.billing.fields[0].value:new Object},useShippingInfo:function(){return null!==this.tabs?this.tabs.shipping.fields[0].value:new Object}},destroyed:function(){this.orderSubscription.unsubscribe()},mounted:function(){var t=this;this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&t.resolveIfQueued(!1)})),this.orderSubscription=POS.order.subscribe((function(e){return t.order=e})),this.loadForm()},data:function(){return{tabs:null,orderSubscription:null,order:null,formValidation:new s.Z}},watch:{useBillingInfo:function(t){var e=this;1===t&&this.tabs.billing.fields.forEach((function(t){"_use_customer_billing"!==t.name&&(t.value=e.order.customer.billing?e.order.customer.billing[t.name]:t.value)}))},useShippingInfo:function(t){var e=this;1===t&&this.tabs.shipping.fields.forEach((function(t){"_use_customer_shipping"!==t.name&&(t.value=e.order.customer.shipping?e.order.customer.shipping[t.name]:t.value)}))}},methods:{__,resolveIfQueued:i.Z,submitInformations:function(){var t=this.formValidation.extractForm({tabs:this.tabs});for(var e in t.general)["shipping","shipping_rate"].includes(e)&&(t.general[e]=parseFloat(t.general[e]));this.order=l(l({},this.order),t.general),delete t.general,delete t.shipping._use_customer_shipping,delete t.billing._use_customer_billing,this.order.addresses=t,POS.order.next(this.order),POS.refreshCart(),this.resolveIfQueued(!0)},closePopup:function(){this.resolveIfQueued(!1)},toggle:function(t){for(var e in this.tabs)this.tabs[e].active=!1;this.tabs[t].active=!0},loadForm:function(){var t=this;n.ih.get("/api/nexopos/v4/forms/ns.pos-addresses").subscribe((function(e){var r=e.tabs,n=function(e){"general"===e?r[e].fields.forEach((function(e){e.value=t.order[e.name]||""})):r[e].fields.forEach((function(r){r.value=t.order.addresses[e]?t.order.addresses[e][r.name]:""}))};for(var i in r)n(i);t.tabs=t.formValidation.initializeTabs(r)}))}}};const d=(0,r(1900).Z)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-box w-6/7-screen md:w-4/5-screen lg:w-3/5-screen h-6/7-screen md:h-4/5-screen shadow-lg flex flex-col overflow-hidden"},[e("div",{staticClass:"p-2 border-b ns-box-header flex justify-between items-center"},[e("h3",{staticClass:"font-bold text-primary"},[t._v(t._s(t.__("Shipping & Billing")))]),t._v(" "),e("div",{staticClass:"tools"},[e("button",{staticClass:"ns-close-button rounded-full h-8 w-8 border items-center justify-center",on:{click:function(e){return t.closePopup()}}},[e("i",{staticClass:"las la-times"})])])]),t._v(" "),e("div",{staticClass:"flex-auto ns-box-body p-2 overflow-y-auto ns-tab"},[e("div",{attrs:{id:"tabs-container"}},[e("div",{staticClass:"header flex",staticStyle:{"margin-bottom":"-1px"}},t._l(t.tabs,(function(r,n){return e("div",{key:n,staticClass:"tab rounded-tl rounded-tr border tab px-3 py-2 text-primary cursor-pointer",class:r.active?"border-b-0 active":"inactive",staticStyle:{"margin-right":"-1px"},on:{click:function(e){return t.toggle(n)}}},[t._v(t._s(r.label))])})),0),t._v(" "),e("div",{staticClass:"border ns-tab-item"},[e("div",{staticClass:"px-4"},[e("div",{staticClass:"-mx-4 flex flex-wrap"},t._l(t.activeTabFields,(function(r,n){return e("div",{key:n,class:"p-4 w-full md:w-1/2 lg:w-1/3"},[e("ns-field",{attrs:{field:r},on:{blur:function(e){return t.formValidation.checkField(r)},change:function(e){return t.formValidation.checkField(r)}}})],1)})),0)])])])]),t._v(" "),e("div",{staticClass:"p-2 flex justify-between border-t ns-box-footer"},[e("div"),t._v(" "),e("div",[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.submitInformations()}}},[t._v(t._s(t.__("Save")))])],1)])])}),[],!1,null,null,null).exports},8093:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});const n={data:function(){return{title:"",message:"",input:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var t=this;this.input=this.$popupParams.input||"",this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(e){"click-overlay"===e.event&&(t.$popupParams.reject(!1),t.$popup.close())}))},methods:{__:r(8094).__,emitAction:function(t){this.$popupParams.onAction(t?this.input:t),this.$popup.close()},reject:function(t){void 0!==this.$popupParams.reject&&this.$popupParams.reject(t),this.$popup.close()}}};const i=(0,r(1900).Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-5/7-screen md:w-3/7-screen flex flex-col shadow-lg",class:t.size,attrs:{id:"prompt-popup"}},[e("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-2"},[e("h2",{staticClass:"text-3xl font-body"},[t._v(t._s(t.title))]),t._v(" "),e("p",{staticClass:"w-full md:mx-auto md:w-2/3 py-4 text-center"},[t._v(t._s(t.message))])]),t._v(" "),e("div",{staticClass:"p-2"},[e("div",{staticClass:"ns-input"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"w-full border p-2",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"flex border-t action-buttons"},[e("button",{staticClass:"flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(e){return t.emitAction(!0)}}},[t._v(t._s(t.__("Ok")))]),t._v(" "),e("hr",{staticClass:"border-r"}),t._v(" "),e("button",{staticClass:"flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(e){return t.reject(!1)}}},[t._v(t._s(t.__("Cancel")))])])])}),[],!1,null,null,null).exports},2909:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(2867),i=r(8094);const s={data:function(){return{value:[],options:[],description:"",label:null,type:"select"}},computed:{},mounted:function(){this.popupCloser(),this.value=this.$popupParams.value||[],this.options=this.$popupParams.options,this.label=this.$popupParams.label,this.description=this.$popupParams.description||"",this.type=this.$popupParams.type||this.type},methods:{popupCloser:n.Z,__:i.__,toggle:function(t){var e=this.value.indexOf(t);-1===e?this.value.unshift(t):this.value.splice(e,1)},isSelected:function(t){return this.value.indexOf(t)>=0},close:function(){this.$popupParams.reject(!1),this.$popup.close()},select:function(t){void 0!==t&&(this.value=[t]),this.$popupParams.resolve(this.value),this.close()}}};const o=(0,r(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"shadow-xl ns-box w-6/7-screen md:w-4/7-screen lg:w-3/7-screen max-h-5/6-screen overflow-hidden flex flex-col"},[e("div",{staticClass:"p-2 flex justify-between border-b items-center ns-box-header"},[e("span",{staticClass:"text-semibold text-primary"},[t._v("\n            "+t._s(t.label)+"\n        ")]),t._v(" "),e("div",[e("ns-close-button",{on:{click:function(e){return t.close()}}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-col overflow-hidden"},[t.description.length>0?e("p",{staticClass:"p-2 text-center text-sm bg-info-primary"},[t._v(t._s(t.description))]):t._e(),t._v(" "),e("div",{staticClass:"overflow-y-auto"},[e("ul",{staticClass:"ns-vertical-menu"},["select"===t.type?t._l(t.options,(function(r){return e("li",{key:r.value,staticClass:"p-2 border-b border-box-edge text-primary cursor-pointer",on:{click:function(e){return t.select(r)}}},[t._v(t._s(r.label))])})):t._e(),t._v(" "),"multiselect"===t.type?t._l(t.options,(function(r){return e("li",{key:r.value,staticClass:"p-2 border-b text-primary cursor-pointer",class:t.isSelected(r)?"active":"",on:{click:function(e){return t.toggle(r)}}},[t._v(t._s(r.label))])})):t._e()],2)])]),t._v(" "),"multiselect"===t.type?e("div",{staticClass:"flex justify-between"},[e("div"),t._v(" "),e("div",[e("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.select()}}},[t._v(t._s(t.__("Select")))])],1)]):t._e()])}),[],!1,null,null,null).exports},5042:()=>{}},t=>{t.O(0,[898],(()=>{return e=8168,t(t.s=e);var e}));t.O()}]);