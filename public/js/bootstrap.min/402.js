"use strict";(self.webpackChunknexopos_4x=self.webpackChunknexopos_4x||[]).push([[402],{8402:(s,e,t)=>{t.r(e),t.d(e,{default:()=>l});var i=t(2277),n=t(3658),r=t(1487),o=t(8094);const a={name:"ns-login",props:["showRecoveryLink","showRegisterButton"],data:function(){return{fields:[],xXsrfToken:null,validation:new n.Z,isSubitting:!1}},mounted:function(){var s=this;(0,i.D)([r.ih.get("/api/nexopos/v4/fields/ns.login"),r.ih.get("/sanctum/csrf-cookie")]).subscribe({next:function(e){s.fields=s.validation.createFields(e[0]),s.xXsrfToken=r.ih.response.config.headers["X-XSRF-TOKEN"],setTimeout((function(){return r.kq.doAction("ns-login-mounted",s)}),100)},error:function(s){r.kX.error(s.message||(0,o.__)("An unexpected error occurred."),(0,o.__)("OK"),{duration:0}).subscribe()}})},methods:{__:o.__,signIn:function(){var s=this;if(!this.validation.validateFields(this.fields))return r.kX.error((0,o.__)("Unable to proceed the form is not valid.")).subscribe();this.validation.disableFields(this.fields),r.kq.applyFilters("ns-login-submit",!0)&&(this.isSubitting=!0,r.ih.post("/auth/sign-in",this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe({next:function(s){document.location=s.data.redirectTo},error:function(e){s.isSubitting=!1,s.validation.enableFields(s.fields),e.data&&s.validation.triggerFieldsErrors(s.fields,e.data),r.kX.error(e.message).subscribe()}}))}}};const l=(0,t(1900).Z)(a,(function(){var s=this,e=s._self._c;return e("div",{staticClass:"ns-box rounded shadow overflow-hidden transition-all duration-100"},[e("div",{staticClass:"ns-box-body"},[0===s.fields.length?e("div",{staticClass:"flex items-center justify-center py-10"},[e("ns-spinner",{attrs:{border:"4",size:"16"}})],1):s._e(),s._v(" "),s.showRecoveryLink?e("div",{staticClass:"flex w-full items-center justify-center py-4"},[e("a",{staticClass:"hover:underline text-blue-600 text-sm",attrs:{href:"/password-lost"}},[s._v(s._s(s.__("Password Forgotten ?")))])]):s._e()]),s._v(" "),e("div",{staticClass:"flex justify-between items-center border-t ns-box-footer p-3"},[e("div",[e("ns-button",{staticClass:"justify-between",attrs:{type:"info"},on:{click:function(e){return s.signIn()}}},[s.isSubitting?e("ns-spinner",{staticClass:"mr-2",attrs:{size:"6",border:"2"}}):s._e(),s._v(" "),[s._v(s._s(s.__("Sign In")))]],2)],1),s._v(" "),s.showRegisterButton?e("div",[e("ns-button",{attrs:{link:!0,href:"/sign-up",type:"success"}},[s._v(s._s(s.__("Register")))])],1):s._e()])])}),[],!1,null,null,null).exports}}]);