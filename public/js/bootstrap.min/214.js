"use strict";(self.webpackChunknexopos_4x=self.webpackChunknexopos_4x||[]).push([[214],{214:(t,r,e)=>{e.r(r),e.d(r,{default:()=>c});var i=e(3658),o=e(1487),n=e(8094);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,i)}return e}function l(t,r,e){return(r=function(t){var r=function(t,r){if("object"!==s(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===s(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}const u={name:"ns-create-coupons",mounted:function(){this.loadForm()},computed:{validTabs:function(){if(this.form){var t=[];for(var r in this.form.tabs)["selected_products","selected_categories"].includes(r)&&t.push(this.form.tabs[r]);return t}return[]},activeValidTab:function(){return this.validTabs.filter((function(t){return t.active}))[0]},generalTab:function(){var t=[];for(var r in this.form.tabs)["general"].includes(r)&&t.push(this.form.tabs[r]);return t}},data:function(){return{formValidation:new i.Z,form:{},nsSnackBar:o.kX,nsHttpClient:o.ih,options:new Array(40).fill("").map((function(t,r){return{label:"Foo"+r,value:"bar"+r}}))}},props:["submit-method","submit-url","return-url","src","rules"],methods:{__:n.__,setTabActive:function(t){this.validTabs.forEach((function(t){return t.active=!1})),t.active=!0},submit:function(){var t=this;if(this.formValidation.validateForm(this.form).length>0)return o.kX.error(this.$slots["error-invalid-form"]?this.$slots["error-invalid-form"][0].text:"No error message provided for having an invalid form.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe();if(void 0===this.submitUrl)return o.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:"No error message provided for not having a valid submit url.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe();this.formValidation.disableForm(this.form);var r=function(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?a(Object(e),!0).forEach((function(r){l(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}({},this.formValidation.extractForm(this.form));o.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,r).subscribe((function(r){if("success"===r.status)return document.location=t.returnUrl;t.formValidation.enableForm(t.form)}),(function(r){o.kX.error(r.message||(0,n.__)("An unexpected error occurred."),void 0,{duration:5e3}).subscribe(),r.response&&t.formValidation.triggerError(t.form,r.response.data),t.formValidation.enableForm(t.form)}))},handleGlobalChange:function(t){this.globallyChecked=t,this.rows.forEach((function(r){return r.$checked=t}))},loadForm:function(){var t=this;o.ih.get("".concat(this.src)).subscribe((function(r){t.form=t.parseForm(r.form)}))},parseForm:function(t){t.main.value=void 0===t.main.value?"":t.main.value,t.main=this.formValidation.createFields([t.main])[0];var r=0;for(var e in t.tabs)1===r&&void 0===t.tabs[e].active&&(t.tabs[e].active=!0),t.tabs[e].active=void 0!==t.tabs[e].active&&t.tabs[e].active,t.tabs[e].fields=this.formValidation.createFields(t.tabs[e].fields),r++;return t},addOption:function(t){var r=this.options.indexOf(t);r>=0&&(this.options[r].selected=!this.options[r].selected)},removeOption:function(t){var r=t.option;t.index;r.selected=!1},getRuleForm:function(){return this.form.ruleForm},addRule:function(){this.form.rules.push(this.getRuleForm())},removeRule:function(t){this.form.rules.splice(t,1)}}};const c=(0,e(1900).Z)(u,(function(){var t=this,r=t._self._c;return r("div",{staticClass:"form flex-auto flex flex-col",attrs:{id:"crud-form"}},[0===Object.values(t.form).length?r("div",{staticClass:"flex items-center justify-center flex-auto"},[r("ns-spinner")],1):t._e(),t._v(" "),Object.values(t.form).length>0?[r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"flex justify-between items-center"},[r("label",{staticClass:"font-bold my-2 text-primary",attrs:{for:"title"}},[t._t("title",(function(){return[t._v("No title Provided")]}))],2),t._v(" "),r("div",{staticClass:"text-sm my-2",attrs:{for:"title"}},[t.returnUrl?r("a",{staticClass:"rounded-full border ns-inset-button error px-2 py-1",attrs:{href:t.returnUrl}},[t._v(t._s(t.__("Return")))]):t._e()])]),t._v(" "),r("div",{staticClass:"input-group flex border rounded overflow-hidden",class:t.form.main.disabled?"disabled":t.form.main.errors.length>0?"error":"info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.main.value,expression:"form.main.value"}],staticClass:"flex-auto text-primary outline-none h-10 px-2",attrs:{disabled:t.form.main.disabled,type:"text"},domProps:{value:t.form.main.value},on:{blur:function(r){return t.formValidation.checkField(t.form.main)},change:function(r){return t.formValidation.checkField(t.form.main)},input:function(r){r.target.composing||t.$set(t.form.main,"value",r.target.value)}}}),t._v(" "),r("button",{staticClass:"outline-none px-4 h-10 border-l border-tertia",attrs:{disabled:t.form.main.disabled},on:{click:function(r){return t.submit()}}},[t._t("save",(function(){return[t._v(t._s(t.__("Save")))]}))],2)]),t._v(" "),t.form.main.description&&0===t.form.main.errors.length?r("p",{staticClass:"text-xs text-primary py-1"},[t._v(t._s(t.form.main.description))]):t._e(),t._v(" "),t._l(t.form.main.errors,(function(e,i){return r("p",{key:i,staticClass:"text-xs py-1 text-error-tertiary"},[r("span",[t._t("error-required",(function(){return[t._v(t._s(e.identifier))]}))],2)])}))],2),t._v(" "),r("div",{staticClass:"-mx-4 flex flex-wrap mt-4",attrs:{id:"form-container"}},[r("div",{staticClass:"px-4 w-full md:w-1/2"},t._l(t.generalTab,(function(e,i){return r("div",{key:i,staticClass:"rounded ns-box shadow p-2"},t._l(e.fields,(function(t,e){return r("ns-field",{key:e,attrs:{field:t}})})),1)})),0),t._v(" "),r("div",{staticClass:"px-4 w-full md:w-1/2"},[r("div",{attrs:{id:"tabbed-card"}},[r("div",{staticClass:"flex flex-wrap ns-tab",attrs:{id:"card-header"}},t._l(t.validTabs,(function(e,i){return r("div",{key:i,staticClass:"tab cursor-pointer px-4 py-2 rounded-tl-lg rounded-tr-lg",class:e.active?"active":"inactive",on:{click:function(r){return t.setTabActive(e)}}},[t._v("\n                            "+t._s(e.label)+"\n                        ")])})),0),t._v(" "),r("div",{staticClass:"ns-tab-item rounded-br-lg rounded-bl-lg shadow p-2"},t._l(t.activeValidTab.fields,(function(t,e){return r("div",{key:e,staticClass:"flex flex-col"},[r("ns-field",{attrs:{field:t}})],1)})),0)])])])]:t._e()],2)}),[],!1,null,null,null).exports}}]);