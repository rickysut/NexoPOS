/*! For license information please see popups.min.js.LICENSE.txt */
(self.webpackChunknexopos_4x=self.webpackChunknexopos_4x||[]).push([[820,198,93,326,140],{1487:(e,t,n)=>{"use strict";n.d(t,{l:()=>U,kq:()=>W,ih:()=>G,kX:()=>H});var r=n(6486),i=n(5121),s=n(5750),o=n(8345),a=n(2357),l=n(9248),c=n(230);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,s=void 0,s=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(s)?s:String(s)),r)}var i,s}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subject=new l.x}var t,n,r;return t=e,n=[{key:"defineClient",value:function(e){this._client=e}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("post",e,t,n)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("get",e,void 0,t)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("delete",e,void 0,t)}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("put",e,t,n)}},{key:"response",get:function(){return this._lastRequestData}},{key:"_request",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=W.applyFilters("http-client-url",t.replace(/\/$/,"")),this._subject.next({identifier:"async.start",url:t,data:r}),new c.y((function(s){n._client[e](t,r,Object.assign(Object.assign({},n._client.defaults[e]),i)).then((function(e){n._lastRequestData=e,s.next(e.data),s.complete(),n._subject.next({identifier:"async.stop"})})).catch((function(e){var t;s.error((null===(t=e.response)||void 0===t?void 0:t.data)||e.response||e),n._subject.next({identifier:"async.stop"})}))}))}},{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(e){var t=e.identifier,n=e.value;this._subject.next({identifier:t,value:n})}}],n&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p=n(3);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,s=void 0,s=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===v(s)?s:String(s)),r)}var i,s}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subject=new p.t}var t,n,r;return t=e,(n=[{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(e){var t=e.identifier,n=e.value;this._subject.next({identifier:t,value:n})}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),b=n(6515);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,s=void 0,s=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(s)?s:String(s)),r)}var i,s}var g=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={},this.behaviorState=new b.X({}),this.behaviorState.subscribe((function(e){n.state=e})),this.setState(t)}var t,n,r;return t=e,(n=[{key:"setState",value:function(e){this.behaviorState.next(Object.assign(Object.assign({},this.state),{object:e}))}}])&&_(t.prototype,n),r&&_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=n(2401),w=n(8272),C=n(381),k=n(1419),j=n(538),P=n(3658);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,s=void 0,s=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===S(s)?s:String(s)),r)}var i,s}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=ns.base_url}var t,n,r;return t=e,(n=[{key:"get",value:function(e){return this.url+e}}])&&O(t.prototype,n),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$=j.default.filter("abbreviate",(function(e){var t=e;if(e>=1e3){for(var n,r=Math.floor((""+e).length/3),i=2;i>=1;i--){if(((n=parseFloat((0!=r?e/Math.pow(1e3,r):e).toPrecision(i)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}n%1!=0&&(n=n.toFixed(1)),t=n+["","k","m","b","t"][r]}return t})),T=n(3515),D=n(9364);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,s=void 0,s=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===F(s)?s:String(s)),r)}var i,s}var A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instances=new Object}var t,n,r;return t=e,(n=[{key:"getInstance",value:function(e){return this.instances[e]}},{key:"defineInstance",value:function(e,t){this.instances[e]=t}}])&&L(t.prototype,n),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),V=n(2319),q=n(8094),N=n(3216),M=n(2867),Z=n(4554),Y=n(6891);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,s=void 0,s=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===I(s)?s:String(s)),r)}var i,s}var z=n(6606);window._=r,window.ChartJS=s,window.Pusher=z,window.Vue=j.default,window.moment=C,window.Axios=i.Z,window.__=q.__,window.__m=q.c,window.VueRouter=o.ZP,window.SnackBar=a.S,window.nsHooks=(0,V.Hu)(),window.popupResolver=N.Z,window.popupCloser=M.Z,window.Axios.defaults.headers.common["x-requested-with"]="XMLHttpRequest",window.Axios.defaults.withCredentials=!0,ns.websocket.enabled&&(window.Echo=new Z.ZP({broadcaster:"pusher",key:ns.websocket.key,wsHost:ns.websocket.host,wsPort:ns.websocket.port,wssPort:ns.websocket.port,namespace:"",forceTLS:ns.websocket.secured,disableStats:!0,encrypted:ns.websocket.secured,enabledTransports:ns.websocket.secured?["ws","wss"]:["ws"],disabledTransports:ns.websocket.secured?["sockjs","xhr_polling","xhr_streaming"]:[]}));var U=new m,G=new f,H=new a.S,X=new E,Q=new A,W=window.nsHooks,B=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.breakpoint="",this.detectScreenSizes(),(0,x.R)(window,"resize").subscribe((function(e){return t.detectScreenSizes()}))}var t,n,r;return t=e,(n=[{key:"detectScreenSizes",value:function(){switch(!0){case window.outerWidth>0&&window.outerWidth<=480:this.breakpoint="xs";break;case window.outerWidth>480&&window.outerWidth<=640:this.breakpoint="sm";break;case window.outerWidth>640&&window.outerWidth<=1024:this.breakpoint="md";break;case window.outerWidth>1024&&window.outerWidth<=1280:this.breakpoint="lg";break;case window.outerWidth>1280:this.breakpoint="xl"}}}])&&R(t.prototype,n),r&&R(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),K=new g({sidebar:["xs","sm","md"].includes(B.breakpoint)?"hidden":"visible"});G.defineClient(i.Z),window.nsEvent=U,window.nsHttpClient=G,window.nsSnackBar=H,window.nsCurrency=T.W,window.nsTruncate=D.b,window.nsRawCurrency=T.f,window.nsAbbreviate=$,window.nsState=K,window.nsUrl=X,window.nsScreen=B,window.ChartJS=s,window.EventEmitter=m,window.Popup=k.G,window.RxJS=w,window.FormValidation=P.Z,window.nsCrudHandler=Q,window.nsTax=Y.Z},3577:(e,t,n)=>{"use strict";n.r(t),n.d(t,{nsAvatar:()=>B,nsButton:()=>a,nsCheckbox:()=>p,nsCkeditor:()=>T,nsCloseButton:()=>j,nsCrud:()=>G,nsCrudForm:()=>y,nsDate:()=>w,nsDateRangePicker:()=>K.Z,nsDateTimePicker:()=>A.Z,nsDatepicker:()=>ee.Z,nsField:()=>g.P,nsIconButton:()=>P,nsInput:()=>c,nsLink:()=>l,nsMediaInput:()=>k,nsMenu:()=>s,nsMultiselect:()=>x,nsNotice:()=>J.Z,nsNumpad:()=>H.Z,nsPaginate:()=>te.Z,nsSearch:()=>se,nsSelect:()=>d,nsSelectAudio:()=>f,nsSpinner:()=>m,nsSubmenu:()=>o,nsSwitch:()=>L.Z,nsTableRow:()=>h,nsTabs:()=>D,nsTabsItem:()=>F,nsTextarea:()=>_});var r=n(538),i=n(1487),s=r.default.component("ns-menu",{data:function(){return{defaultToggledState:!1,_save:0}},props:["href","label","icon","notification","toggled","identifier"],template:'\n    <div>\n        <a @click="toggleEmit()" :href="href || \'javascript:void(0)\'" :class="defaultToggledState ? \'border-blue-800 bg-gray-800 dark:border-slate-700 dark:bg-slate-700\' : \'border-transparent bg-gray-900 dark:bg-slate-900\'" class="flex justify-between py-2 border-l-8 text-gray-200 dark:text-slate-300 dark:hover:bg-slate-700 px-3 font-bold  hover:bg-gray-700">\n            <span class="flex items-center">\n            <i class="las text-lg mr-2" :class="icon?.length > 0 ? icon : \'la-star\'"></i>\n            {{ label }}\n            </span>\n            <span v-if="notification > 0" class="rounded-full bg-red-600 text-white dark:text-slate-300 font-bold w-6 h-6 text-xs justify-center items-center flex">{{ notification }}</span>\n        </a>\n        <ul :class="defaultToggledState ? \'\' : \'hidden\'" class="submenu-wrapper">\n            <slot></slot>                  \n        </ul>\n    </div>\n    ',mounted:function(){var e=this;this.defaultToggledState=void 0!==this.toggled?this.toggled:this.defaultToggledState,i.l.subject().subscribe((function(t){t.value!==e.identifier&&(e.defaultToggledState=!1)}))},methods:{toggleEmit:function(){var e=this;this.toggle().then((function(t){t&&i.l.emit({identifier:"side-menu.open",value:e.identifier})}))},toggle:function(){var e=this;return new Promise((function(t,n){0===e.href.length&&(e.defaultToggledState=!e.defaultToggledState,t(e.defaultToggledState))}))}}}),o=r.default.component("ns-submenu",{data:function(){return{}},props:["href","label","active"],mounted:function(){},template:'\n    <div>\n        <li>\n            <a :class="active ? \'font-bold text-white dark:text-slate-300\' : \'text-gray-100 dark:text-slate-200\'" :href="href" class="py-2 border-l-8 border-blue-800 dark:border-slate-700 px-3 block bg-gray-800 dark:bg-slate-800 dark:hover:bg-slate-700 hover:bg-gray-700">\n                <slot></slot>\n            </a>\n        </li>\n    </div>\n    '}),a=r.default.component("ns-button",{data:function(){return{clicked:!1,_save:0}},props:["type","disabled","link","href","routerLink","to"],template:'\n    <div class="flex ns-button" :class="type ? type : \'default\'" @click="$emit( \'click\' )">\n        <button :disabled="isDisabled" v-if="!link && !href" class="flex rounded items-center cursor-pointer py-2 px-3 font-semibold"><slot></slot></button>\n        <router-link  :to="to" v-if="routerLink" class="flex rounded items-center cursor-pointer py-2 px-3 font-semibold"><slot></slot></router-link>\n        <a v-if="href" :href="href" class="flex rounded items-center cursor-pointer py-2 px-3 font-semibold"><slot></slot></a>\n    </div>\n    ',mounted:function(){},computed:{isDisabled:function(){return this.disabled&&(0===this.disabled.length||"disabled"===this.disabled||this.disabled)}}}),l=r.default.component("ns-link",{data:function(){return{clicked:!1,_save:0}},props:["type","to","href","target"],template:'\n    <div class="flex">\n        <router-link v-if="to" :to="to" :class="buttonclass" class="rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></router-link>\n        <a v-if="href" :target="target" :href="href" :class="buttonclass" class="hover:underline rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></a>\n    </div>\n    ',computed:{buttonclass:function(){switch(this.type){case"info":return"shadow bg-blue-400 text-white";case"success":return"shadow bg-green-400 text-white";case"error":return"shadow bg-red-400 text-white";case"warning":return"shadow bg-orange-400 text-white";default:return"shadow bg-white text-gray-800"}}}}),c=r.default.component("ns-input",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto ns-input">\n        <label :for="field.name" :class="hasError ? \'has-error\' : \'is-pristine\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="mt-1 relative overflow-hidden border rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="leading sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <input \n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" :type="type || field.type || \'text\'" \n                :class="inputClass" class="block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs ns-description"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs ns-error">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">This field is required.</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">This field must contain a valid email address.</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),u=n(8094),d=r.default.component("ns-select",{data:function(){return{}},props:["name","placeholder","field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},mounted:function(){},methods:{__:u.__},template:'\n    <div class="flex flex-col flex-auto ns-select">\n        <label :for="field.name" :class="hasError ? \'has-error\' : \'is-pristine\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="border mt-1 relative rounded-md shadow-sm mb-2 overflow-hidden">\n            <select :disabled="field.disabled ? field.disabled : false" @change="$emit( \'change\', $event )" :name="field.name" v-model="field.value" :class="inputClass" class="form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 appearance-none">\n                <option :value="null">{{ __( \'Choose an option\' ) }}</option>\n                <option :value="option.value" v-for="option of field.options" class="py-2">{{ option.label }}</option>\n            </select>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs ns-description"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs ns-error">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),f=r.default.component("ns-select-audio",{data:function(){return{}},props:["name","placeholder","field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__:u.__,playSelectedSound:function(){this.field.value.length>0&&new Audio(this.field.value).play()}},template:'\n    <div class="flex flex-col flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-error-primary\' : \'text-primary\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-error-primary\' : \'border-input-edge\'" class="border mt-1 flex relative overflow-hidden rounded-md shadow-sm mb-2 form-input">\n            <div @click="playSelectedSound()" class="border-r-2 border-input-edge flex-auto flex items-center justify-center hover:bg-info-primary hover:text-white">\n                <button class="w-10 flex item-center justify-center">\n                    <i class="las la-play text-2xl"></i>\n                </button>\n            </div>\n            <select :disabled="field.disabled ? field.disabled : false" @change="$emit( \'change\', $event )" :name="field.name" v-model="field.value" :class="inputClass" class="text-primary block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 outline-none">\n                <option :value="option.value" v-for="option of field.options" class="py-2">{{ option.label }}</option>\n            </select>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),p=r.default.component("ns-checkbox",{data:function(){return{}},props:["checked","field","label"],template:'\n    <div class="flex items-center justify-center cursor-pointer" @click="toggleIt()">\n        <div class="w-6 h-6 flex bg-input-background border-input-edge border items-center justify-center cursor-pointer">\n            <i v-if="isChecked" class="las la-check"></i>   \n        </div>\n        <span v-if="label" class="mx-2">{{ label }}</span>\n        <span v-if="field" class="mx-2">{{ field.label }}</span>\n    </div>\n    ',computed:{isChecked:function(){return this.field?this.field.value:this.checked}},methods:{toggleIt:function(){void 0!==this.field&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}}),v=n(1419),h=r.default.component("ns-table-row",{props:["options","row","columns","prependOptions","showOptions"],data:function(){return{optionsToggled:!1}},mounted:function(){},methods:{__:u.__,sanitizeHTML:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("script"),r=n.length;r--;)n[r].parentNode.removeChild(n[r]);return t.innerHTML},getElementOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},toggleMenu:function(e){var t=this;if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout((function(){var e=t.$el.querySelectorAll(".relative > .absolute")[0],n=t.$el.querySelectorAll(".relative")[0],r=t.getElementOffset(n);e.style.top=r.top+"px",e.style.left=r.left+"px",void 0!==n&&(n.classList.remove("relative"),n.classList.add("dropdown-holder"))}),100);else{var n=this.$el.querySelectorAll(".dropdown-holder")[0];n.classList.remove("dropdown-holder"),n.classList.add("relative")}},handleChanged:function(e){this.row.$checked=e,this.$emit("updated",this.row)},triggerAsync:function(e){var t=this;e.confirm?confirm(e.confirm.message)&&i.ih[e.type.toLowerCase()](e.url).subscribe((function(e){i.kX.success(e.message).subscribe(),t.$emit("reload",t.row)}),(function(e){t.toggleMenu(),i.kX.error(e.message).subscribe()})):(i.l.emit({identifier:"ns-table-row-action",value:{action:e,row:this.row,component:this}}),this.toggleMenu())},triggerPopup:function(e,t){var n=window.nsExtraComponents[e.component];if(e.component)return n?new Promise((function(r,i){v.G.show(n,{resolve:r,reject:i,row:t,action:e})})):i.kX.error((0,u.__)('Unable to load the component "'.concat(e.component,'". Make sure the component is registered to "nsExtraComponents".'))).subscribe();this.triggerAsync(e)}},template:'\n    <tr class="ns-table-row" :class="row.$cssClass ? row.$cssClass : \'border text-sm\'">\n        <td class="font-sans p-2">\n            <ns-checkbox @change="handleChanged( $event )" :checked="row.$checked"> </ns-checkbox>\n        </td>\n        <td v-if="prependOptions && showOptions" class="font-sans p-2">\n            <div class=""> \x3c!-- flex items-center justify-center --\x3e\n                <button @click="toggleMenu( $event )" :class="row.$toggled ? \'active\': \'\'" class="ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"><i class="las la-ellipsis-h"></i> {{ __( \'Options\' ) }}</button>\n                <div @click="toggleMenu( $event )" v-if="row.$toggled" class="absolute w-full h-full z-10 top-0 left-0"></div>\n                <div class="relative">\n                    <div v-if="row.$toggled" class="zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper">\n                        <div class="rounded-md shadow-xs">\n                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">\n                                <template v-for="action of row.$actions">\n                                    <a :href="action.url" v-if="action.type === \'GOTO\'" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                    <a href="javascript:void(0)" @click="triggerAsync( action )" v-if="[ \'GET\', \'DELETE\' ].includes( action.type )" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                    <a href="javascript:void(0)" @click="triggerPopup( action, row )" v-if="[ \'POPUP\' ].includes( action.type )" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                </template>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </td>\n        <td v-for="(column, identifier) of columns" class="font-sans p-2">\n            <template v-if="row[ identifier ] && row[ identifier ].type && row[ identifier ].type === \'link\'">\n                <a target="_blank" :href="row[ identifier ].href" v-html="sanitizeHTML( row[ identifier ].label )"></a>\n            </template>\n            <template v-if="typeof row[ identifier ] === \'string\' || typeof row[ identifier ] === \'number\'">\n                <div v-html="sanitizeHTML( row[ identifier ] )"></div>\n            </template>\n            <template v-if="row[ identifier ] === null">\n                <div>{{ __( \'Undefined\' ) }}</div>\n            </template>\n        </td>\n        <td v-if="!prependOptions && showOptions" class="font-sans p-2 flex flex-col items-center justify-center">\n            <div class=""> \x3c!-- flex items-center justify-center --\x3e\n                <button @click="toggleMenu( $event )" :class="row.$toggled ? \'active\': \'\'" class="ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"><i class="las la-ellipsis-h"></i> {{ __( \'Options\' ) }}</button>\n                <div @click="toggleMenu( $event )" v-if="row.$toggled" class="absolute w-full h-full z-10 top-0 left-0"></div>\n                <div class="relative">\n                    <div v-if="row.$toggled" class="zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right -ml-28 w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper">\n                        <div class="rounded-md shadow-xs">\n                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">\n                                <template v-for="action of row.$actions">\n                                    <a :href="action.url" :target="action.target || \'\'" v-if="action.type === \'GOTO\'" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                    <a href="javascript:void(0)" @click="triggerAsync( action )" v-if="[ \'GET\', \'DELETE\' ].includes( action.type )" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                    <a href="javascript:void(0)" @click="triggerPopup( action, row )" v-if="[ \'POPUP\' ].includes( action.type )" class="ns-action-button block px-4 py-2 text-sm leading-5" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                </template>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </td>\n    </tr>\n    '}),m=r.default.component("ns-spinner",{data:function(){return{}},mounted:function(){},computed:{validatedSize:function(){return this.size||24},validatedBorder:function(){return this.border||8},validatedAnimation:function(){return this.animation||"fast"}},props:["color","size","border"],template:"\n    <div class=\"flex items-center justify-center\">\n        <div class=\"loader ease-linear rounded-full border-gray-200\" :class=\"validatedAnimation + ' border-4 border-t-4' + ' w-' + validatedSize + ' h-' + validatedSize\"></div>\n    </div>\n    "}),b=n(3658),y=r.default.component("ns-crud-form",{data:function(){return{form:{},globallyChecked:!1,formValidation:new b.Z,rows:[]}},mounted:function(){this.loadForm()},props:["src","create-url","field-class","return-url","submit-url","submit-method","disable-tabs"],computed:{activeTabFields:function(){for(var e in this.form.tabs)if(this.form.tabs[e].active)return this.form.tabs[e].fields;return[]}},methods:{__:u.__,toggle:function(e){for(var t in this.form.tabs)this.form.tabs[t].active=!1;this.form.tabs[e].active=!0},handleShowOptions:function(e){this.rows.forEach((function(t){t.$id!==e.$id&&(t.$toggled=!1)}))},submit:function(){var e=this;return this.formValidation.validateForm(this.form).length>0?i.kX.error(this.$slots["error-invalid"]?this.$slots["error-invalid"][0].text:"No error message provided for having an invalid form.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe():(this.formValidation.disableForm(this.form),void 0===this.submitUrl?i.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:"No error message provided for not having a valid submit url.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe():void i.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,this.formValidation.extractForm(this.form)).subscribe((function(t){if("success"===t.status){if(e.submitMethod&&"post"===e.submitMethod.toLowerCase()&&!1!==e.returnUrl)return document.location=t.data.editUrl||e.returnUrl;i.kX.info(t.message,(0,u.__)("Okay"),{duration:3e3}).subscribe(),e.$emit("save",t)}e.formValidation.enableForm(e.form)}),(function(t){i.kX.error(t.message,void 0,{duration:5e3}).subscribe(),void 0!==t.data&&e.formValidation.triggerError(e.form,t.data),e.formValidation.enableForm(e.form)})))},handleGlobalChange:function(e){this.globallyChecked=e,this.rows.forEach((function(t){return t.$checked=e}))},loadForm:function(){var e=this;i.ih.get("".concat(this.src)).subscribe({next:function(t){e.form=e.parseForm(t.form),i.kq.doAction("ns-crud-form-loaded",e),e.$emit("updated",e.form)},error:function(e){i.kX.error(e.message,"OKAY",{duration:0}).subscribe()}})},parseForm:function(e){e.main.value=void 0===e.main.value?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0];var t=0;for(var n in e.tabs)0===t&&(e.tabs[n].active=!0),e.tabs[n].active=void 0!==e.tabs[n].active&&e.tabs[n].active,e.tabs[n].fields=this.formValidation.createFields(e.tabs[n].fields),t++;return e}},template:'\n    <div class="form flex-auto" id="crud-form">\n        <div v-if="Object.values( form ).length === 0" class="flex items-center justify-center h-full">\n            <ns-spinner />\n        </div>\n        <div v-if="Object.values( form ).length > 0">\n            <div class="flex flex-col">\n                <div class="flex justify-between items-center" v-if="form.main">\n                    <label for="title" class="font-bold my-2 text-primary">\n                        <span v-if="form.main.name">{{ form.main.label }}</span>\n                    </label>\n                    <div for="title" class="text-sm my-2">\n                        <a v-if="returnUrl" :href="returnUrl" class="rounded-full border px-2 py-1 ns-inset-button error">{{ __( \'Go Back\' ) }}</a>\n                    </div>\n                </div>\n                <template v-if="form.main.name">\n                    <div :class="form.main.disabled ? \'disabled\' : form.main.errors.length > 0 ? \'error\' : \'info\'" class="input-group flex border rounded overflow-hidden">\n                        <input v-model="form.main.value" \n                            @blur="formValidation.checkField( form.main )" \n                            @change="formValidation.checkField( form.main )" \n                            :disabled="form.main.disabled"\n                            type="text" \n                            class="flex-auto outline-none h-10 px-2">\n                        <button :disabled="form.main.disabled" :class="form.main.disabled ? \'disabled\' : form.main.errors.length > 0 ? \'error\' : \'\'" @click="submit()" class="outline-none px-4 h-10 text-white border-l border-gray-400"><slot name="save">Save</slot></button>\n                    </div>\n                    <p class="text-xs text-primary py-1" v-if="form.main.description && form.main.errors.length === 0">{{ form.main.description }}</p>\n                    <p class="text-xs py-1 text-error-tertiary" v-for="error of form.main.errors">\n                        <span v-if="error.identifier=== \'required\'"><slot name="error-required">{{ error.identifier }}</slot></span>\n                        <span v-if="error.identifier=== \'invalid\'"><slot name="error-invalid">{{ error.message }}</slot></span>\n                    </p>\n                </template>\n            </div>\n            <div id="tabs-container" class="my-5 ns-tab" v-if="disableTabs !== \'true\'">\n                <div class="header flex" style="margin-bottom: -2px;">\n                    <div v-for="( tab , identifier ) of form.tabs" \n                        @click="toggle( identifier )" \n                        :class="tab.active ? \'active border border-b-transparent\' : \'inactive border\'" \n                        class="tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer" style="margin-right: -1px">{{ tab.label }}</div>\n                </div>\n                <div class="border ns-tab-item p-4">\n                    <div class="-mx-4 flex flex-wrap">\n                        <div :class="fieldClass || \'px-4 w-full md:w-1/2 lg:w-1/3\'" v-for="field of activeTabFields">\n                            <ns-field @blur="formValidation.checkField( field )" @change="formValidation.checkField( field )" :field="field"/>\n                        </div>\n                    </div>\n                    <div class="flex justify-end" v-if="! form.main.name">\n                        <div class="ns-button" :class="form.main.disabled ? \'default\' : ( form.main.errors.length > 0 ? \'error\' : \'info\' )">\n                            <button :disabled="form.main.disabled" @click="submit()" class="outline-none px-4 h-10 border-l"><slot name="save">{{ __( \'Save\' ) }}</slot></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    '}),_=r.default.component("ns-textarea",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto ns-textarea">\n        <label :for="field.name" :class="hasError ? \'text-error-primary\' : \'text-primary\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="mt-1 relative border overflow-hidden rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-secondary sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <textarea \n                :rows="field.data ? ( field.data.rows || 10 ) : 10"\n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" :type="type || field.type || \'text\'" \n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5" :placeholder="placeholder"></textarea>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">This field is required.</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">This field must contain a valid email address.</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),g=n(3012),x=r.default.component("ns-multiselect",{data:function(){return{showPanel:!1,search:""}},props:["field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},_options:function(){var e=this;return this.field.options.map((function(t){return t.selected=void 0!==t.selected&&t.selected,e.field.value&&e.field.value.includes(t.value)&&(t.selected=!0),t}))}},methods:{__:u.__,addOption:function(e){this.field.disabled||(this.$emit("addOption",e),this.$forceUpdate(),setTimeout((function(){}),100))},removeOption:function(e,t){var n=this;if(!this.field.disabled)return t.preventDefault(),t.stopPropagation(),this.$emit("removeOption",e),this.$forceUpdate(),setTimeout((function(){n.search=""}),100),!1}},mounted:function(){var e=this;this.field.value&&this.field.value.reverse().forEach((function(t){var n=e.field.options.filter((function(e){return e.value===t}));n.length>=0&&e.addOption(n[0])}))},template:'\n    <div class="flex flex-col ns-multiselect">\n        <label :for="field.name" :class="hasError ? \'text-error-secondary\' : \'text-primary\'" class="block mb-1 leading-5 font-medium"><slot></slot></label>\n        <div class="flex flex-col">\n            <div @click="showPanel = !showPanel" :class="showPanel ? \'\' : \'\'" class="select-preview flex justify-between rounded border border-input-option-hover p-2 items-center">\n                <div class="flex -mx-1 -my-1 flex-wrap">\n                    <div class="px-1 my-1" v-for="(option,index) of _options.filter( o => o.selected )">\n                        <div class="rounded bg-info-secondary text-white flex justify-between p-1 items-center">\n                            <span class="pr-8">{{ option.label }}</span>\n                            <button @click="removeOption( option, $event )" class="rounded outline-none hover:bg-info-tertiary h-6 w-6 flex items-center justify-center">\n                                <i class="las la-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <i class="las la-angle-down" v-if="showPanel"></i>\n                    <i class="las la-angle-up" v-if="!showPanel"></i>\n                </div>\n            </div>\n            <div class="h-0 z-10" v-if="showPanel" :class="showPanel ? \'shadow\' : \'\'">\n                <div class="ns-dropdown shadow">\n                    <div class="search border-b border-input-option-hover">\n                        <input v-model="search" class="p-2 w-full bg-transparent text-primary outline-none" placeholder="Search">\n                    </div>\n                    <div class="h-40 overflow-y-auto">\n                        <div @click="addOption( option )" v-for="(option, index) of _options" :class="option.selected ? \'bg-info-secondary text-white\' : \'text-primary\'" class="option p-2 flex justify-between cursor-pointer hover:bg-info-secondary hover:text-white">\n                            <span>{{ option.label }}</span>\n                            <span>\n                                <i v-if="option.checked" class="las la-check"></i>\n                            </span>\n                        </div>\n                    </div>\n                    <div v-if="_options.length === 0" class="p-2 text-center text-primary">{{ __( \'Nothing to display\' ) }}</div>\n                </div>\n            </div>\n        </div>\n        <div class="my-2">\n            <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n            <p v-for="error of field.errors" class="text-xs text-error-secondary">\n                <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n                <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n                <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n            </p>\n        </div>\n    </div>\n    '}),w=r.default.component("ns-date",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-input-edge cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-auto flex-col mb-2">\n        <label :for="field.name" :class="hasError ? \'text-error-primary\' : \'text-primary\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-error-primary\' : \'border-input-edge\'" class="bg-input-background text-secondary mt-1 relative border rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <input \n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" type="date"\n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),C=n(2478),k=r.default.component("ns-media-input",{template:'\n    <div class="flex flex-col mb-2 flex-auto ns-media">\n        <label :for="field.name" :class="hasError ? \'has-error\' : \'is-pristine\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="mt-1 relative border rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-primary sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <div class="rounded overflow-hidden flex">\n                <div \n                    v-if="field.data && field.data.type === \'model\'"\n                    class="form-input flex w-full sm:text-sm items-center sm:leading-5 h-10">\n                    <template v-if="field.value && field.value.name">\n                        <img class="w-8 h-8 m-1" :src="field.value.sizes.thumb" :alt="field.value.name">\n                        <span class="text-xs text-secondary">{{ field.value.name }}</span>\n                    </template>\n                </div>\n                <input \n                    v-if="! field.data || field.data.type === \'undefined\' || field.data.type === \'url\'"\n                    v-model="field.value" \n                    :disabled="field.disabled"\n                    @blur="$emit( \'blur\', this )" \n                    @change="$emit( \'change\', this )" \n                    :id="field.name" :type="type || field.type || \'text\'" \n                    :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n                <button \n                    @click="toggleMedia( field )"\n                    class="w-10 h-10 flex items-center justify-center border-l-2 outline-none">\n                    <i class="las la-photo-video"></i>\n                </button>\n            </div>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-primary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    ',computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":"ns-enabled"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},data:function(){return{}},props:["placeholder","leading","type","field"],mounted:function(){},methods:{toggleMedia:function(){var e=this;new Promise((function(t,n){v.G.show(C.default,Object.assign({resolve:t,reject:n},e.field.data||{}))})).then((function(t){"use-selected"===t.event&&(e.field.data&&"url"!==e.field.data.type?e.field.data&&"model"!==e.field.data.type||(e.field.value=t.value[0]):e.field.value=t.value[0].sizes.original,e.$forceUpdate())}))}}}),j=r.default.component("ns-close-button",{template:'\n    <button @click="clicked( $event )" class="outline-none ns-close-button border rounded-full h-8 w-8 items-center justify-center">\n        <i class="las la-times"></i>\n    </button>\n    ',methods:{clicked:function(e){this.$emit("click",e)}}}),P=r.default.component("ns-icon-button",{template:'\n    <button @click="clicked( $event )" :class="type ? type : buttonClass " class="ns-inset-button rounded-full h-8 w-8 border items-center justify-center">\n        <i :class="className" class="las"></i>\n    </button>\n    ',props:["className","buttonClass","type"],methods:{clicked:function(e){this.$emit("click",e)}}}),S=n(1272),O=n.n(S),E=n(5234),$=n.n(E),T=r.default.component("ns-ckeditor",{data:function(){return{editor:$()}},components:{ckeditor:O().component},mounted:function(){},methods:{__:u.__},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-error-primary\' : \'text-primary\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'has-error\' : \'is-pristine\'" class="mt-1 relative rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-secondary sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <ckeditor class="w-full" :editor="editor" v-model="field.value"></ckeditor>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-secondary"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-error-primary">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),D=r.default.component("ns-tabs",{data:function(){return{childrens:[]}},props:["active"],computed:{activeComponent:function(){var e=this.$children.filter((function(e){return e.active}));return e.length>0&&e[0]}},methods:{toggle:function(e){this.$emit("active",e.identifier),this.$emit("changeTab",e.identifier)}},mounted:function(){this.childrens=this.$children},template:'\n    <div class="tabs flex flex-col flex-auto ns-tab">\n        <div class="header flex" style="margin-bottom: -1px;">\n            <div v-for="( tab , identifier ) of childrens" @click="toggle( tab )" :class="active === tab.identifier ? \'border-b-0 active z-10\' : \'border inactive\'" class="tab rounded-tl rounded-tr border  px-3 py-2 cursor-pointer" style="margin-right: -1px">{{ tab.label }}</div>\n        </div>\n        <slot></slot>\n    </div>\n    '}),F=r.default.component("ns-tabs-item",{data:function(){return{}},mounted:function(){},props:["label","identifier","padding"],template:'\n    <div :class="( padding || \'p-4\' )" class="ns-tab-item border flex-auto" v-if="$parent.active === identifier">\n        <slot></slot>\n    </div>\n    '}),L=n(3720),A=n(7359),V=n(2381),q=n(2867),N=n(3216);const M={data:function(){return{fields:[],validation:new b.Z}},methods:{__:u.__,popupCloser:q.Z,popupResolver:N.Z,closePopup:function(){this.popupResolver(!1)},useFilters:function(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters:function(){this.fields.forEach((function(e){return e.value=""})),this.popupResolver(null)}},mounted:function(){this.fields=this.validation.createFields(this.$popupParams.queryFilters),this.popupCloser()}};var Z=n(1900);const Y=(0,Z.Z)(M,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"ns-box shadow-lg w-95vw h-95vh md:w-2/5-screen overflow-hidden md:h-5/6-screen flex flex-col"},[t("div",{staticClass:"p-2 border-b ns-box-header flex justify-between items-center"},[t("h3",[e._v(e._s(e.__("Search Filters")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 ns-box-body flex-auto overflow-y-auto"},e._l(e.fields,(function(e,n){return t("ns-field",{key:n,attrs:{field:e}})})),1),e._v(" "),t("div",{staticClass:"p-2 flex justify-between ns-box-footer border-t"},[t("div",[t("ns-button",{attrs:{type:"error"},on:{click:function(t){return e.clearFilters()}}},[e._v(e._s(e.__("Clear Filters")))])],1),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.useFilters()}}},[e._v(e._s(e.__("Use Filters")))])],1)])])}),[],!1,null,null,null).exports;function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(){R=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof b?t:b,o=Object.create(s.prototype),a=new $(r||[]);return i(o,"_invoke",{value:P(e,n,a)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",v="executing",h="completed",m={};function b(){}function y(){}function _(){}var g={};c(g,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(T([])));w&&w!==n&&r.call(w,o)&&(g=w);var C=_.prototype=b.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(i,s,o,a){var l=d(e[i],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==I(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function P(t,n,r){var i=f;return function(s,o){if(i===v)throw new Error("Generator is already running");if(i===h){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var l=S(a,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?h:p,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=h,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=d(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(I(t)+" is not iterable")}return y.prototype=_,i(C,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},k(j.prototype),c(j.prototype,a,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new j(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}var z=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const U={data:function(){return{prependOptions:!1,showOptions:!0,isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],withFilters:!1,columns:[],selectedEntries:[],globallyChecked:!1,result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}},name:"ns-crud",mounted:function(){void 0!==this.identifier&&nsCrudHandler.defineInstance(this.identifier,this),this.loadConfig()},props:["src","create-url","mode","identifier","queryParams"],computed:{getParsedSrc:function(){return"".concat(this.src,"?").concat(this.sortColumn).concat(this.searchQuery).concat(this.queryFiltersString).concat(this.queryPage).concat(this.getQueryParams()?"&"+this.getQueryParams():"")},showQueryFilters:function(){return this.queryFilters.length>0},getSelectedAction:function(){var e=this,t=this.bulkActions.filter((function(t){return t.identifier===e.bulkAction}));return t.length>0&&t[0]},pagination:function(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage:function(){return this.result?"&page=".concat(this.page):""},resultInfo:function(){return(0,u.__)("displaying {perPage} on {items} items").replace("{perPage}",this.result.total).replace("{items}",this.result.total)}},methods:{__:u.__,getQueryParams:function(){var e=this;return this.queryParams?Object.keys(this.queryParams).map((function(t){return"".concat(t,"=").concat(e.queryParams[t])})).join("&"):""},pageNumbers:function(e,t){var n=[];t-3>1&&n.push(1,"...");for(var r=1;r<=e;r++)t+3>r&&t-3<r&&n.push(r);return t+3<e&&n.push("...",e),n.filter((function(e){return e>0||"string"==typeof e}))},downloadContent:function(){nsHttpClient.post("".concat(this.src,"/export?").concat(this.getParsedSrc),{entries:this.selectedEntries.map((function(e){return e.$id}))}).subscribe((function(e){setTimeout((function(){return document.location=e.url}),300),i.kX.success((0,u.__)("The document has been generated.")).subscribe()}),(function(e){i.kX.error(e.message||(0,u.__)("Unexpected error occurred.")).subscribe()}))},clearSelectedEntries:function(){var e=this;v.G.show(V.default,{title:(0,u.__)("Clear Selected Entries ?"),message:(0,u.__)("Would you like to clear all selected entries ?"),onAction:function(t){t&&(e.selectedEntries=[])}})},refreshRow:function(e){if(console.log({row:e}),!0===e.$checked){0===this.selectedEntries.filter((function(t){return t.$id===e.$id})).length&&this.selectedEntries.push(e)}else{var t=this.selectedEntries.filter((function(t){return t.$id===e.$id}));if(t.length>0){var n=this.selectedEntries.indexOf(t[0]);this.selectedEntries.splice(n,1)}}},handleShowOptions:function(e){this.result.data.forEach((function(t){t.$id!==e.$id&&(t.$toggled=!1)}))},handleGlobalChange:function(e){var t=this;this.globallyChecked=e,this.result.data.forEach((function(n){n.$checked=e,t.refreshRow(n)}))},loadConfig:function(){var e=this;nsHttpClient.get("".concat(this.src,"/config?").concat(this.getQueryParams())).subscribe((function(t){e.columns=t.columns,e.bulkActions=t.bulkActions,e.queryFilters=t.queryFilters,e.prependOptions=t.prependOptions,e.showOptions=t.showOptions,e.refresh()}),(function(e){i.kX.error(e.message,"OK",{duration:!1}).subscribe()}))},cancelSearch:function(){this.searchInput="",this.search()},search:function(){this.searchInput?this.searchQuery="&search=".concat(this.searchInput):this.searchQuery="",this.refresh()},sort:function(e){for(var t in this.columns)t!==e&&(this.columns[t].$sorted=!1,this.columns[t].$direction="");switch(this.columns[e].$sorted=!0,this.columns[e].$direction){case"asc":this.columns[e].$direction="desc";break;case"desc":this.columns[e].$direction="";break;case"":this.columns[e].$direction="asc"}["asc","desc"].includes(this.columns[e].$direction)?this.sortColumn="active=".concat(e,"&direction=").concat(this.columns[e].$direction):this.sortColumn="",this.$emit("sort",this.columns[e]),this.refresh()},bulkDo:function(){var e=this;return this.bulkAction?this.selectedEntries.length>0?confirm(this.getSelectedAction.confirm||this.$slots["error-bulk-confirmation"]||(0,u.__)("Would you like to perform the selected bulk action on the selected entries ?"))?nsHttpClient.post("".concat(this.src,"/bulk-actions"),{action:this.bulkAction,entries:this.selectedEntries.map((function(e){return e.$id}))}).subscribe({next:function(t){i.kX.info(t.message).subscribe(),e.selectedEntries=[],e.refresh()},error:function(e){i.kX.error(e.message).subscribe()}}):void 0:i.kX.error(this.$slots["error-no-selection"]?this.$slots["error-no-selection"][0].text:(0,u.__)("No selection has been made.")).subscribe():i.kX.error(this.$slots["error-no-action"]?this.$slots["error-no-action"][0].text:(0,u.__)("No action has been selected.")).subscribe()},openQueryFilter:function(){return z(this,void 0,void 0,R().mark((function e(){var t,n=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(Y),e.next=4,new Promise((function(e,t){v.G.show(Y,{resolve:e,reject:t,queryFilters:n.queryFilters})}));case 4:t=e.sent,this.withFilters=!1,this.queryFiltersString="",null!==t&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(t))),this.refresh(),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,this,[[0,11]])})))},refresh:function(){var e=this;this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get("".concat(this.getParsedSrc)).subscribe((function(t){t.data=t.data.map((function(t){return e.selectedEntries.filter((function(e){return e.$id===t.$id})).length>0&&(t.$checked=!0),t})),e.isRefreshing=!1,e.result=t,e.page=t.current_page}),(function(t){e.isRefreshing=!1,i.kX.error(t.message).subscribe()}))}}};const G=(0,Z.Z)(U,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full rounded-lg",class:"light"!==e.mode?"shadow mb-8":"",attrs:{id:"crud-table"}},["light"!==e.mode?t("div",{staticClass:"p-2 border-b border-popup-surface flex flex-col md:flex-row justify-between flex-wrap",attrs:{id:"crud-table-header"}},[t("div",{staticClass:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex",attrs:{id:"crud-search-box"}},[e.createUrl?t("div",{staticClass:"px-2 flex items-center justify-center"},[t("a",{staticClass:"rounded-full ns-crud-button text-sm h-10 flex items-center justify-center cursor-pointer px-3 outline-none border",attrs:{href:e.createUrl||"#"}},[t("i",{staticClass:"las la-plus"})])]):e._e(),e._v(" "),t("div",{staticClass:"px-2"},[t("div",{staticClass:"rounded-full p-1 ns-crud-input flex"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],staticClass:"w-36 md:w-auto bg-transparent outline-none px-2",attrs:{type:"text"},domProps:{value:e.searchInput},on:{input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),e._v(" "),t("button",{staticClass:"rounded-full w-8 h-8 outline-none ns-crud-input-button",on:{click:function(t){return e.search()}}},[t("i",{staticClass:"las la-search"})]),e._v(" "),e.searchQuery?t("button",{staticClass:"ml-1 rounded-full w-8 h-8 bg-error-secondary text-white outline-none hover:bg-error-tertiary",on:{click:function(t){return e.cancelSearch()}}},[t("i",{staticClass:"las la-times"})]):e._e()])]),e._v(" "),t("div",{staticClass:"px-2 flex items-center justify-center"},[t("button",{staticClass:"rounded-full text-sm h-10 px-3 outline-none border ns-crud-button",on:{click:function(t){return e.refresh()}}},[t("i",{staticClass:"las la-sync",class:e.isRefreshing?"animate-spin":""})])]),e._v(" "),e.showQueryFilters?t("div",{staticClass:"px-2 flex items-center"},[t("button",{staticClass:"ns-crud-button border rounded-full text-sm h-10 px-3 outline-none",class:e.withFilters?"table-filters-enabled":"table-filters-disabled",on:{click:function(t){return e.openQueryFilter()}}},[e.withFilters?e._e():t("i",{staticClass:"las la-filter"}),e._v(" "),e.withFilters?t("i",{staticClass:"las la-check"}):e._e(),e._v(" "),e.withFilters?e._e():t("span",[e._v(e._s(e.__("Filters")))]),e._v(" "),e.withFilters?t("span",[e._v(e._s(e.__("Has Filters")))]):e._e()])]):e._e()]),e._v(" "),t("div",{staticClass:"-mx-1 flex flex-wrap w-full md:w-auto",attrs:{id:"crud-buttons"}},[e.selectedEntries.length>0?t("div",{staticClass:"px-1 flex items-center"},[t("button",{staticClass:"flex justify-center items-center rounded-full text-sm h-10 px-3 outline-none ns-crud-button border",on:{click:function(t){return e.clearSelectedEntries()}}},[t("i",{staticClass:"lar la-check-square"}),e._v(" "+e._s(e.__("{entries} entries selected").replace("{entries}",e.selectedEntries.length))+"\n                ")])]):e._e(),e._v(" "),t("div",{staticClass:"px-1 flex items-center"},[t("button",{staticClass:"flex justify-center items-center rounded-full text-sm h-10 px-3 ns-crud-button border outline-none",on:{click:function(t){return e.downloadContent()}}},[t("i",{staticClass:"las la-download"}),e._v(" "+e._s(e.__("Download")))])])])]):e._e(),e._v(" "),t("div",{staticClass:"flex"},[t("div",{staticClass:"overflow-x-auto flex-auto"},[Object.values(e.columns).length>0?t("table",{staticClass:"table ns-table w-full"},[t("thead",[t("tr",[t("th",{staticClass:"text-center px-2 border w-16 py-2"},[t("ns-checkbox",{attrs:{checked:e.globallyChecked},on:{change:function(t){return e.handleGlobalChange(t)}}})],1),e._v(" "),e.prependOptions&&e.showOptions?t("th",{staticClass:"text-left px-2 py-2 w-16 border"}):e._e(),e._v(" "),e._l(e.columns,(function(n,r){return t("th",{key:r,staticClass:"cursor-pointer justify-betweenw-40 border text-left px-2 py-2",style:{"min-width":n.width||"auto"},on:{click:function(t){return e.sort(r)}}},[t("div",{staticClass:"w-full flex justify-between items-center"},[t("span",{staticClass:"flex"},[e._v(e._s(n.label))]),e._v(" "),t("span",{staticClass:"h-6 w-6 flex justify-center items-center"},["desc"===n.$direction?t("i",{staticClass:"las la-sort-amount-up"}):e._e(),e._v(" "),"asc"===n.$direction?t("i",{staticClass:"las la-sort-amount-down"}):e._e()])])])})),e._v(" "),!e.prependOptions&&e.showOptions?t("th",{staticClass:"text-left px-2 py-2 w-16 border"}):e._e()],2)]),e._v(" "),t("tbody",[void 0!==e.result.data&&e.result.data.length>0?e._l(e.result.data,(function(n,r){return t("ns-table-row",{key:r,attrs:{columns:e.columns,prependOptions:e.prependOptions,showOptions:e.showOptions,row:n},on:{updated:function(t){return e.refreshRow(t)},reload:function(t){return e.refresh()},toggled:function(t){return e.handleShowOptions(t)}}})})):e._e(),e._v(" "),e.result&&0!==e.result.data.length?e._e():t("tr",[t("td",{staticClass:"text-center text-gray-600 dark:text-slate-300 py-3",attrs:{colspan:Object.values(e.columns).length+2}},[e._v(e._s(e.__("There is nothing to display...")))])])],2)]):e._e()])]),e._v(" "),t("div",{staticClass:"p-2 flex border-t flex-col md:flex-row justify-between footer"},[e.bulkActions.length>0?t("div",{staticClass:"mb-2 md:mb-0 flex justify-between rounded-full ns-crud-input p-1",attrs:{id:"grouped-actions"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.bulkAction,expression:"bulkAction"}],staticClass:"outline-none bg-transparent",attrs:{id:"grouped-actions"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.bulkAction=t.target.multiple?n:n[0]}}},[t("option",{staticClass:"bg-input-disabled",attrs:{selected:"",value:""}},[e._t("bulk-label",(function(){return[e._v(e._s(e.__("Bulk Actions")))]}))],2),e._v(" "),e._l(e.bulkActions,(function(n,r){return t("option",{key:r,staticClass:"bg-input-disabled",domProps:{value:n.identifier}},[e._v(e._s(n.label))])}))],2),e._v(" "),t("button",{staticClass:"ns-crud-input-button h-8 px-3 outline-none rounded-full flex items-center justify-center",on:{click:function(t){return e.bulkDo()}}},[e._t("bulk-go",(function(){return[e._v(e._s(e.__("Apply")))]}))],2)]):e._e(),e._v(" "),t("div",{staticClass:"flex"},[t("div",{staticClass:"items-center flex text-primary mx-4"},[e._v(e._s(e.resultInfo))]),e._v(" "),t("div",{staticClass:"flex items-center -mx-1",attrs:{id:"pagination"}},[e.result.current_page?[t("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.page=e.result.first_page,e.refresh()}}},[t("i",{staticClass:"las la-angle-double-left"})]),e._v(" "),e._l(e.pagination,(function(n,r){return["..."!==e.page?t("a",{key:r,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border",class:e.page==n?"bg-info-tertiary border-transparent text-white":"",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.page=n,e.refresh()}}},[e._v(e._s(n))]):e._e(),e._v(" "),"..."===e.page?t("a",{key:r,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border",attrs:{href:"javascript:void(0)"}},[e._v("...")]):e._e()]})),e._v(" "),t("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.page=e.result.last_page,e.refresh()}}},[t("i",{staticClass:"las la-angle-double-right"})])]:e._e()],2)])])])}),[],!1,null,null,null).exports;var H=n(8321),X=n(1726),Q=n(7259);const W=r.default.extend({methods:{__:u.__},name:"ns-avatar",data:function(){return{svg:""}},mounted:function(){this.svg=(0,X.createAvatar)(Q,{seed:this.displayName})},computed:{avatarUrl:function(){return 0===this.url.length?"":this.url}},props:["url","display-name"]});const B=(0,Z.Z)(W,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex justify-between items-center flex-shrink-0"},[t("span",{staticClass:"hidden md:inline-block px-2"},[e._v(e._s(e.__("Howdy, {name}").replace("{name}",this.displayName)))]),e._v(" "),t("span",{staticClass:"md:hidden px-2"},[e._v(e._s(e.displayName))]),e._v(" "),t("div",{staticClass:"px-2"},[t("div",{staticClass:"w-8 h-8 overflow-hidden rounded-full bg-gray-600"},[""!==e.avatarUrl?t("img",{staticClass:"w-8 h-8 overflow-hidden rounded-full",attrs:{src:e.avatarUrl,alt:e.displayName,srcset:""}}):e._e(),e._v(" "),""===e.avatarUrl?t("div",{domProps:{innerHTML:e._s(e.svg)}}):e._e()])])])}),[],!1,null,null,null).exports;var K=n(9607),J=n(1128),ee=n(9785),te=n(5507);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ne(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ne(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ie={name:"ns-search",props:["url","placeholder","value","label","method","searchArgument"],data:function(){return{searchText:"",searchTimeout:null,results:[]}},methods:{__:u.__,selectOption:function(e){this.$emit("select",e),this.searchText="",this.results=[]}},watch:{searchText:function(){var e=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){e.searchText.length>0&&i.ih[e.method||"post"](e.url,re({},e.searchArgument||"search",e.searchText)).subscribe({next:function(t){e.results=t},error:function(e){i.kX.error(e.message||(0,u.__)("An unexpected error occurred.")).subscribe()}})}),1e3)}},mounted:function(){}};const se=(0,Z.Z)(ie,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"ns-search"},[t("div",{staticClass:"input-group info border"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"p-2 w-full",attrs:{type:"text",placeholder:e.placeholder||e.__("Search..."),id:""},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"relative"},[t("div",{staticClass:"w-full absolute"},[e.results.length>0&&e.searchText.length>0?t("ul",{staticClass:"ns-vertical-menu"},e._l(e.results,(function(n,r){return t("li",{key:r,staticClass:"border-b p-2 cursor-pointer",on:{click:function(t){return e.selectOption(n)}}},[e._v(e._s(n[e.label]))])})),0):e._e()])])])}),[],!1,null,null,null).exports},3012:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var r=n(538),i=n(9607),s=n(7359),o=n(3720),a=r.default.component("ns-field",{data:function(){return{}},mounted:function(){},components:{nsDateRangePicker:i.Z,nsDateTimePicker:s.Z,nsSwitch:o.Z},computed:{isInputField:function(){return["text","password","email","number","tel"].includes(this.field.type)},isDateField:function(){return["date"].includes(this.field.type)},isSelectField:function(){return["select"].includes(this.field.type)},isTextarea:function(){return["textarea"].includes(this.field.type)},isCheckbox:function(){return["checkbox"].includes(this.field.type)},isMultiselect:function(){return["multiselect"].includes(this.field.type)},isSelectAudio:function(){return["select-audio"].includes(this.field.type)},isSwitch:function(){return["switch"].includes(this.field.type)},isMedia:function(){return["media"].includes(this.field.type)},isCkEditor:function(){return["ckeditor"].includes(this.field.type)},isDateTimePicker:function(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker:function(){return["daterangepicker"].includes(this.field.type)},isCustom:function(){return["custom"].includes(this.field.type)}},props:["field"],methods:{addOption:function(e){"select"===this.field.type&&this.field.options.forEach((function(e){return e.selected=!1})),e.selected=!0;var t=this.field.options.indexOf(e);this.field.options.splice(t,1),this.field.options.unshift(e),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:e})},refreshMultiselect:function(){this.field.value=this.field.options.filter((function(e){return e.selected})).map((function(e){return e.value}))},removeOption:function(e){e.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:e})}},template:'\n    <div class="flex flex-auto">\n        <ns-input @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isInputField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-input>\n        <ns-date-time-picker @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateTimePicker">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date-time-picker>\n        <ns-date @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date>\n        <ns-media-input @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isMedia">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-media-input>\n        <ns-select @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isSelectField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-select>\n        <ns-date-range-picker @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateRangePicker">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date-range-picker>\n        <ns-select-audio @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isSelectAudio">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-select-audio>\n        <ns-textarea @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isTextarea">\n            <template>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-textarea v-slot>\n        <ns-checkbox @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isCheckbox">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-checkbox>\n        <ns-multiselect \n            @addOption="addOption( $event )" \n            @removeOption="removeOption( $event )" \n            :field="field" \n            v-if="isMultiselect">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-multiselect>\n        <ns-ckeditor \n            :field="field" \n            v-if="isCkEditor">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-ckeditor>\n        <ns-switch \n            :field="field" \n            @change="$emit( \'change\', field )"\n            v-if="isSwitch">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-switch>\n        <template v-if="isCustom">\n            <keep-alive>\n                <component \n                    :field="field"\n                    @blur="$emit( \'blur\', field )" \n                    @change="$emit( \'change\', field )" \n                    v-bind:is="field.component"></component>\n            </keep-alive>\n        </template>\n    </div>\n    '})},3515:(e,t,n)=>{"use strict";n.d(t,{W:()=>c,f:()=>u});var r=n(2077),i=n.n(r),s=n(538),o=n(6740),a=n.n(o),l=new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join(""),c=s.default.filter("currency",(function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full";switch(ns.currency.ns_currency_prefered){case"iso":t=ns.currency.ns_currency_iso;break;case"symbol":t=ns.currency.ns_currency_symbol}if("full"===r){var s={decimal:ns.currency.ns_currency_decimal_separator,separator:ns.currency.ns_currency_thousand_separator,precision:parseInt(ns.currency.ns_currency_precision),symbol:""};n=a()(e,s).format()}else n=i()(e).format("0.0a");return"".concat("before"===ns.currency.ns_currency_position?t:"").concat(n).concat("after"===ns.currency.ns_currency_position?t:"")})),u=function(e){var t="0.".concat(l);return parseFloat(i()(e).format(t))}},9364:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var r=n(538).default.filter("truncate",(function(e,t){return e?(e=e.toString()).length>t?e.substring(0,t)+"...":e:""}))},3658:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(s=i.key,o=void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===r(o)?o:String(o)),i)}var s,o}n.d(t,{Z:()=>s});var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"validateFields",value:function(e){var t=this;return 0===e.map((function(e){return t.checkField(e),e.errors?0===e.errors.length:0})).filter((function(e){return!1===e})).length}},{key:"validateFieldsErrors",value:function(e){var t=this;return e.map((function(e){return t.checkField(e),e.errors})).flat()}},{key:"validateForm",value:function(e){e.main&&this.validateField(e.main);var t=[];for(var n in e.tabs)if(e.tabs[n].fields){var r=[],i=this.validateFieldsErrors(e.tabs[n].fields);i.length>0&&r.push(i),e.tabs[n].errors=r.flat(),t.push(r.flat())}return t.flat().filter((function(e){return void 0!==e}))}},{key:"initializeTabs",value:function(e){var t=0;for(var n in e)0===t&&(e[n].active=!0),e[n].active=void 0!==e[n].active&&e[n].active,e[n].fields=this.createFields(e[n].fields),t++;return e}},{key:"validateField",value:function(e){return this.checkField(e)}},{key:"fieldsValid",value:function(e){return!(e.map((function(e){return e.errors&&e.errors.length>0})).filter((function(e){return e})).length>0)}},{key:"createFields",value:function(e){return e.map((function(t){if(t.type=t.type||"text",t.errors=t.errors||[],t.disabled=t.disabled||!1,"custom"===t.type&&"string"==typeof t.component){var n=t.component;if(t.component=nsExtraComponents[t.component],!t.component)throw'Failed to load a custom component. "'.concat(n,'" is not provided as an extra component. More details here: https://my.nexopos.com/en/documentation/developpers-guides/how-to-register-a-custom-vue-component');t.component.$field=t,t.component.$fields=e}return t}))}},{key:"createForm",value:function(e){if(e.main&&(e.main=this.createFields([e.main])[0]),e.tabs)for(var t in e.tabs)e.tabs[t].errors=[],void 0!==e.tabs[t].fields?e.tabs[t].fields=this.createFields(e.tabs[t].fields):console.info('Warning: The tab "'.concat(e.tabs[t].label,'" is missing fields. Fallback on checking dynamic component instead.'));return e}},{key:"enableFields",value:function(e){return e.map((function(e){return e.disabled=!1}))}},{key:"disableFields",value:function(e){return e.map((function(e){return e.disabled=!0}))}},{key:"disableForm",value:function(e){for(var t in e.main&&(e.main.disabled=!0),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!0}))}},{key:"enableForm",value:function(e){for(var t in e.main&&(e.main.disabled=!1),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!1}))}},{key:"getValue",value:function(e){var t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"checkField",value:function(e){var t=this;return void 0!==e.validation&&(e.errors=[],this.detectValidationRules(e.validation).forEach((function(n){t.fieldPassCheck(e,n)}))),e}},{key:"extractForm",value:function(e){var t={};if(e.main&&(t[e.main.name]=e.main.value),e.tabs)for(var n in e.tabs)void 0===t[n]&&(t[n]={}),t[n]=this.extractFields(e.tabs[n].fields);return t}},{key:"extractFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"detectValidationRules",value:function(e){var t=function(e){var t;return["email","required"].includes(e)?{identifier:e}:(t=/(min)\:([0-9])+/g.exec(e))||(t=/(max)\:([0-9])+/g.exec(e))?{identifier:t[1],value:t[2]}:e};return Array.isArray(e)?e.filter((function(e){return"string"==typeof e})).map(t):e.split("|").map(t)}},{key:"triggerError",value:function(e,t){if(console.log(t),t.errors){var n=function(n){var r=n.split(".").filter((function(e){return!/^\d+$/.test(e)}));2===r.length&&e.tabs[r[0]].fields.forEach((function(e){e.name===r[1]&&t.errors[n].forEach((function(t){var n={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(n)}))})),n===e.main.name&&t.errors[n].forEach((function(t){e.main.errors.push({identifier:"invalid",invalid:!0,message:t,name:e.main.name})}))};for(var r in t.errors)n(r)}}},{key:"triggerFieldsErrors",value:function(e,t){if(t&&t.errors){var n=function(n){e.forEach((function(e){e.name===n&&t.errors[n].forEach((function(t){var n={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(n)}))}))};for(var r in t.errors)n(r)}}},{key:"fieldPassCheck",value:function(e,t){if("required"===t.identifier){if(void 0===e.value||null===e.value||0===e.value.length)return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(n,r){n.identifier===t.identifier&&!0===n.invalid&&e.errors.splice(r,1)}))}if("email"===t.identifier&&e.value.length>0){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(e.value))return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(n,r){!0===n[t.identifier]&&e.errors.splice(r,1)}))}return e}}],n&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},8094:(e,t,n)=>{"use strict";n.d(t,{__:()=>r,c:()=>i});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NexoPOS";return nsLanguage.getEntries(t)&&nsLanguage.getEntries(t)[e]||e},i=function(e,t){return nsLanguage.getEntries(t)&&nsLanguage.getEntries(t)[e]||e}},2867:(e,t,n)=>{"use strict";function r(){var e=this;Object.keys(this).includes("$popup")&&(this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close()),"press-esc"===t.event&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close())})),nsHotPress.create("popup-esc").whenPressed("escape",(function(t){t.preventDefault();var n=parseInt(e.$el.parentElement.getAttribute("data-index"));null===document.querySelector('.is-popup [data-index="'.concat(n+1,"]"))&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close(),nsHotPress.destroy("popup-esc"))})))}n.d(t,{Z:()=>r})},3216:(e,t,n)=>{"use strict";function r(e){void 0!==this.$popupParams.resolve&&this.$popupParams.reject&&(!1!==e?this.$popupParams.resolve(e):this.$popupParams.reject(e)),this.$popup.close()}n.d(t,{Z:()=>r})},1419:(e,t,n)=>{"use strict";n.d(t,{G:()=>l});var r=n(9248);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,s=Object.create(i.prototype),a=new D(r||[]);return o(s,"_invoke",{value:O(e,n,a)}),s}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var v="suspendedStart",h="suspendedYield",m="executing",b="completed",y={};function _(){}function g(){}function x(){}var w={};d(w,l,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(F([])));k&&k!==n&&r.call(k,l)&&(w=k);var j=x.prototype=_.prototype=Object.create(w);function P(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(s,o,a,l){var c=p(e[s],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var s;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function O(t,n,r){var i=v;return function(s,o){if(i===m)throw new Error("Generator is already running");if(i===b){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var l=E(a,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?b:h,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=b,r.method="throw",r.arg=c.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var s=p(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,y;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function F(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,o=function n(){for(;++s<t.length;)if(r.call(t,s))return n.value=t[s],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(i(t)+" is not iterable")}return g.prototype=x,o(j,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:g,configurable:!0}),g.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},P(S.prototype),d(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new S(f(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},P(j),d(j,u,"Generator"),d(j,l,(function(){return this})),d(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=F,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:F(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(s=r.key,o=void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(o)?o:String(o)),r)}var s,o}var a=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={primarySelector:void 0,popupClass:"shadow-lg h-half w-1/2 bg-white"},this.container=document.createElement("div"),this.popupBody=document.createElement("div"),this.popupSelector="",this.config=Object.assign(this.config,t),void 0===this.config.primarySelector&&document.querySelectorAll(".is-popup").length>0){var n=document.querySelectorAll(".is-popup").length;this.parentWrapper=document.querySelectorAll(".is-popup")[n-1]}else this.parentWrapper=document.querySelector("body").querySelectorAll("div")[0];this.event=new r.x}var t,n,i;return t=e,n=[{key:"hash",value:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<10;n++)e+=t.charAt(Math.floor(62*Math.random()));return e}},{key:"open",value:function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,void 0,void 0,s().mark((function o(){var a,l,c,u=this;return s().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if("function"!=typeof e){s.next=9;break}return s.prev=1,s.next=4,e();case 4:e=s.sent.default,s.next=9;break;case 7:s.prev=7,s.t0=s.catch(1);case 9:a=document.querySelector("body").querySelectorAll("div")[0],this.parentWrapper.style.filter="blur(4px)",a.style.filter="blur(6px)",this.container.setAttribute("class","absolute top-0 left-0 w-full h-full flex items-center justify-center is-popup"),this.container.addEventListener("click",(function(e){u.event.next({event:"click-overlay",value:!0}),e.stopPropagation()})),this.popupBody.addEventListener("click",(function(e){e.stopImmediatePropagation()})),l=document.querySelectorAll(".is-popup").length,this.container.id="popup-container-"+this.hash(),this.popupSelector="#".concat(this.container.id),this.popupBody.setAttribute("class","zoom-out-entrance popup-body"),this.popupBody.setAttribute("data-index",l),this.popupBody.innerHTML='<div class="vue-component"></div>',this.container.appendChild(this.popupBody),document.body.appendChild(this.container),c=Vue.extend(e),this.instance=new c({propsData:{popup:this}}),this.instance.template=(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.template)||void 0,this.instance.render=e.render||void 0,this.instance.methods=(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.methods)||(null==e?void 0:e.methods),this.instance.data=(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.data)||(null==e?void 0:e.data),this.instance.$popup=this,this.instance.$popupParams=i,this.instance.$mount("#".concat(this.container.id," .vue-component"));case 32:case"end":return s.stop()}}),o,this,[[1,7]])})))}},{key:"close",value:function(){var e=this;this.instance.$destroy(),this.event.unsubscribe(),this.parentWrapper.style.filter="blur(0px)";var t=document.querySelector("body").querySelectorAll("div")[0];document.querySelectorAll(".is-popup").length<=1&&(t.style.filter="blur(0px)");var n="".concat(this.popupSelector," .popup-body");this.popupBody=document.querySelector(n),this.popupBody.classList.remove("zoom-out-entrance"),this.popupBody.classList.add("zoom-in-exit"),this.container=document.querySelector("".concat(this.popupSelector)),this.container.classList.remove("is-popup"),setTimeout((function(){e.container.remove()}),300)}}],i=[{key:"show",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return r.open(t,n),r}}],n&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},5494:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(s=i.key,o=void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===r(o)?o:String(o)),i)}var s,o}n.d(t,{Z:()=>s});var s=function(){function e(t){var n=t.urls,r=t.options;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.printingURL={refund:"refund_printing_url",sale:"sale_printing_url",payment:"payment_printing_url"},this.urls=n,this.options=r}var t,n,r;return t=e,n=[{key:"processRegularPrinting",value:function(e,t){var n=document.querySelector("#printing-section");n&&n.remove();var r=this.urls[this.printingURL[t]].replace("{reference_id}",e),i=document.createElement("iframe");i.id="printing-section",i.className="hidden",i.src=r,document.body.appendChild(i),setTimeout((function(){document.querySelector("#printing-section").remove()}),5e3)}},{key:"process",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"aloud";"default"===this.options.ns_pos_printing_gateway?this.processRegularPrinting(e,t):this.processCustomPrinting(e,this.options.ns_pos_printing_gateway,t,n)}},{key:"processCustomPrinting",value:function(e,t,n){var r={printed:!1,reference_id:e,gateway:t,document:n,mode:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"aloud"};nsHooks.applyFilters("ns-custom-print",{params:r,promise:function(){return new Promise((function(e,t){t({status:"failed",message:__("The selected print gateway doesn't support this type of printing.","NsPrintAdapter")})}))}}).promise().then((function(e){nsSnackBar.success(e.message).subscribe()})).catch((function(e){nsSnackBar.error(e.message||__("An error unexpected occured while printing.")).subscribe()}))}}],n&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},2357:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(3260);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(s=r.key,o=void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(o)?o:String(o)),r)}var s,o}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===window.snackbarQueue&&(window.snackbarQueue=[],this.queue=window.snackbarQueue)}var t,n,i;return t=e,n=[{key:"show",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return r.Observable.create((function(r){var s=n.__createSnack({message:e,label:t,type:i.type}),o=s.buttonNode,a=(s.textNode,s.snackWrapper,s.sampleSnack);o.addEventListener("click",(function(e){r.onNext(o),r.onCompleted(),a.remove()})),n.__startTimer(i.duration,a)}))}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"error"};return this.show(e,t,Object.assign(Object.assign({},n),{type:"error"}))}},{key:"success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"success"};return this.show(e,t,Object.assign(Object.assign({},n),{type:"success"}))}},{key:"info",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return this.show(e,t,Object.assign(Object.assign({},n),{type:"info"}))}},{key:"__startTimer",value:function(e,t){var n,r=function(){e>0&&!1!==e&&(n=setTimeout((function(){t.remove()}),e))};t.addEventListener("mouseenter",(function(){clearTimeout(n)})),t.addEventListener("mouseleave",(function(){r()})),r()}},{key:"__createSnack",value:function(e){var t=e.message,n=e.label,r=e.type,i=void 0===r?"info":r,s=document.getElementById("snack-wrapper")||document.createElement("div"),o=document.createElement("div"),a=document.createElement("p"),l=document.createElement("div"),c=document.createElement("button"),u="",d="";switch(i){case"info":u="",d="info";break;case"error":u="",d="error";break;case"success":u="",d="success"}return a.textContent=t,a.setAttribute("class","pr-2"),n&&(l.setAttribute("class","ns-button default"),c.textContent=n,c.setAttribute("class","px-3 py-2 shadow rounded uppercase ".concat(u)),l.appendChild(c)),o.appendChild(a),o.appendChild(l),o.setAttribute("class","md:rounded py-2 px-3 md:w-2/5 w-full z-10 md:my-2 shadow-lg flex justify-between items-center zoom-in-entrance anim-duration-300 ns-notice ".concat(d)),s.appendChild(o),null===document.getElementById("snack-wrapper")&&(s.setAttribute("id","snack-wrapper"),s.setAttribute("class","absolute bottom-0 w-full flex justify-between items-center flex-col"),document.body.appendChild(s)),{snackWrapper:s,sampleSnack:o,buttonsWrapper:l,buttonNode:c,textNode:a}}}],n&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},6891:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2985);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(s=r.key,o=void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(o)?o:String(o)),r)}var s,o}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"compute",value:function(t,n,r){switch(t){case"inclusive":return e.computeInclusive(n,r);case"exclusive":return e.computeExclusive(n,r)}}},{key:"computeInclusive",value:function(e,t){return r.tS(r.tS(e).divide(r.tS(t).add(100).done()).done()).multiply(100).done()}},{key:"computeExclusive",value:function(e,t){return r.tS(e).divide(100).multiply(r.tS(t).add(100).done()).done()}},{key:"getTaxValue",value:function(t,n,r){switch(t){case"inclusive":return n-e.compute(t,n,r);case"exclusive":return e.compute(t,n,r)-n}return 0}}],(n=null)&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},8802:(e,t,n)=>{"use strict";var r=n(1588),i=n(1487);const s={name:"ns-products-preview",computed:{product:function(){return this.$popupParams.product}},methods:{__:n(8094).__,changeActiveTab:function(e){this.active=e,"units-quantities"===this.active&&this.loadProductQuantities()},loadProductQuantities:function(){var e=this;this.hasLoadedUnitQuantities=!1,i.ih.get("/api/nexopos/v4/products/".concat(this.product.id,"/units/quantities")).subscribe((function(t){e.unitQuantities=t,e.hasLoadedUnitQuantities=!0}))}},data:function(){return{active:"units-quantities",unitQuantities:[],hasLoadedUnitQuantities:!1}},mounted:function(){var e=this;this.loadProductQuantities(),this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.$popup.close()}))}};const o=(0,n(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg w-6/7-screen lg:w-3/5-screen h-6/7-screen lg:h-4/5-screen ns-box overflow-hidden flex flex-col"},[t("div",{staticClass:"p-2 border-b ns-box-header text-primary text-center font-medium flex justify-between items-center"},[t("div",[e._v("\n            "+e._s(e.__("Previewing :"))+" "+e._s(e.product.name)+"\n        ")]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.$popup.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto overflow-y-auto ns-box-body"},[t("div",{staticClass:"p-2"},[t("ns-tabs",{attrs:{active:e.active},on:{active:function(t){return e.changeActiveTab(t)}}},[t("ns-tabs-item",{attrs:{label:e.__("Units & Quantities"),identifier:"units-quantities"}},[e.hasLoadedUnitQuantities?t("table",{staticClass:"table ns-table w-full"},[t("thead",[t("tr",[t("th",{staticClass:"p-1 border"},[e._v(e._s(e.__("Unit")))]),e._v(" "),t("th",{staticClass:"text-right p-1 border",attrs:{width:"150"}},[e._v(e._s(e.__("Sale Price")))]),e._v(" "),t("th",{staticClass:"text-right p-1 border",attrs:{width:"150"}},[e._v(e._s(e.__("Wholesale Price")))]),e._v(" "),t("th",{staticClass:"text-right p-1 border",attrs:{width:"150"}},[e._v(e._s(e.__("Quantity")))])])]),e._v(" "),t("tbody",e._l(e.unitQuantities,(function(n){return t("tr",{key:n.id},[t("td",{staticClass:"p-1 border text-left"},[e._v(e._s(n.unit.name))]),e._v(" "),t("td",{staticClass:"p-1 border text-right"},[e._v(e._s(e._f("currency")(n.sale_price)))]),e._v(" "),t("td",{staticClass:"p-1 border text-right"},[e._v(e._s(e._f("currency")(n.wholesale_price)))]),e._v(" "),t("td",{staticClass:"p-1 border text-right"},[e._v(e._s(n.quantity))])])})),0)]):e._e(),e._v(" "),e.hasLoadedUnitQuantities?e._e():t("ns-spinner",{attrs:{size:"16",border:"4"}})],1)],1)],1)])])}),[],!1,null,null,null).exports;var a=n(9326),l=n(2381),c=n(8093),u=n(2478),d=n(549),f=n(9527),p=n(2909),v=n(4140),h={nsOrderPreview:r.Z,nsProductPreview:o,nsAlertPopup:a.default,nsConfirmPopup:l.default,nsPromptPopup:c.default,nsMediaPopup:u.default,nsProcurementQuantity:d.Z,nsOrdersRefund:f.Z,nsSelectPopup:p.Z,nsPOSLoadingPopup:v.default};for(var m in h)window[m]=h[m]},6700:(e,t,n)=>{var r={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":4415,"./fy.js":4415,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=s,e.exports=i,i.id=6700},9607:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(538),i=n(381),s=n.n(i),o=n(7144),a=n.n(o),l=(n(3656),n(8094));const c=r.default.extend({name:"ns-date-range-picker",data:function(){return{dateRange:{startDate:null,endDate:null}}},components:{DateRangePicker:a()},mounted:function(){void 0!==this.field.value&&(this.dateRange=this.field.value)},watch:{dateRange:function(){var e={startDate:s()(this.dateRange.startDate).format("YYYY-MM-DD HH:mm"),endDate:s()(this.dateRange.endDate).format("YYYY-MM-DD HH:mm")};this.field.value=e,this.$emit("change",this)}},methods:{__:l.__,getFormattedDate:function(e){return null!==e?s()(e).format("YYYY-MM-DD HH:mm"):(0,l.__)("N/D")},clearDate:function(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0}},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]});const u=(0,n(1900).Z)(c,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex flex-auto flex-col mb-2 ns-date-range-picker"},[t("label",{staticClass:"block leading-5 font-medium",class:e.hasError?"text-error-primary":"text-primary",attrs:{for:e.field.name}},[e._t("default")],2),e._v(" "),t("div",{staticClass:"mt-1 relative flex input-group border rounded-md overflow-hidden focus:shadow-sm",class:e.hasError?"error":""},[e.leading?t("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{staticClass:"text-primary sm:text-sm sm:leading-5"},[e._v("\n            "+e._s(e.leading)+"\n            ")])]):e._e(),e._v(" "),t("button",{staticClass:"px-3 outline-none bg-error-secondary font-semibold text-white",on:{click:function(t){return e.clearDate()}}},[t("i",{staticClass:"las la-times"})]),e._v(" "),t("date-range-picker",{ref:"picker",staticClass:"w-full flex items-center bg-input-background",attrs:{"locale-data":{firstDay:1,format:"yyyy-mm-dd HH:mm:ss"},timePicker:!0,timePicker24Hour:!0,showWeekNumbers:!0,showDropdowns:!0,autoApply:!1,appendToBody:!0,disabled:e.field.disabled,linkedCalendars:!0},scopedSlots:e._u([{key:"input",fn:function(n){return[t("div",{staticClass:"flex justify-between items-center w-full py-2"},[t("span",{staticClass:"text-xs"},[e._v(e._s(e.__("Range Starts"))+" : "+e._s(e.getFormattedDate(n.startDate)))]),e._v(" "),t("span",{staticClass:"text-xs"},[e._v(e._s(e.__("Range Ends"))+" : "+e._s(e.getFormattedDate(n.endDate)))])])]}}]),model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),e.field.errors&&0!==e.field.errors.length?e._e():t("p",{staticClass:"text-xs text-gray-500"},[e._t("description")],2),e._v(" "),e._l(e.field.errors,(function(n,r){return t("p",{key:r,staticClass:"text-xs text-red-400"},["required"===n.identifier?e._t(n.identifier,(function(){return[e._v(e._s(e.__("This field is required.")))]})):e._e(),e._v(" "),"email"===n.identifier?e._t(n.identifier,(function(){return[e._v(e._s(e.__("This field must contain a valid email address.")))]})):e._e(),e._v(" "),"invalid"===n.identifier?e._t(n.identifier,(function(){return[e._v(e._s(n.message))]})):e._e()],2)}))],2)}),[],!1,null,null,null).exports},7359:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(381),i=n.n(r);const s={name:"ns-date-time-picker",props:["field","date"],data:function(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:i(),months:new Array(11).fill("").map((function(e,t){return t})),daysOfWeek:new Array(7).fill("").map((function(e,t){return t})),calendar:[[]]}},computed:{momentCopy:function(){return i()()}},watch:{visible:function(){var e=this;this.visible&&setTimeout((function(){e.$refs.hours.addEventListener("focus",(function(){this.select()})),e.$refs.minutes.addEventListener("focus",(function(){this.select()}))}),100)}},mounted:function(){var e=this;document.addEventListener("mousedown",(function(t){return e.checkClickedItem(t)})),this.field?this.currentDay=[void 0,"",null].includes(this.field.value)?i()():i()(this.field.value):this.currentDay=[void 0,"",null].includes(this.date)?i()():i()(this.date),this.hours=this.currentDay.format("HH"),this.minutes=this.currentDay.format("mm"),this.build()},methods:{__:n(8094).__,erase:function(){this.selectDate()},setYear:function(e){parseInt(e.srcElement.value)>0&&parseInt(e.srcElement.value)<9999&&(this.currentDay.year(e.srcElement.value),this.updateDateTime())},subYear:function(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.updateDateTime())},addYear:function(){this.currentDay.add(1,"year"),this.updateDateTime()},toggleView:function(e){var t=this;this.currentView=e,"years"===this.currentView&&setTimeout((function(){t.$refs.year.select()}),100)},setMonth:function(e){this.currentDay.month(e),this.updateDateTime()},detectHoursChange:function(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.updateDateTime()},detectMinuteChange:function(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.updateDateTime()},updateDateTime:function(){this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.build(),this.selectDate(this.currentDay)},checkClickedItem:function(e){!this.$el.contains(e.srcElement)&&this.visible&&(this.visible=!1)},selectDate:function(e){[void 0].includes(e)?(this.field&&(this.field.value=null),this.$emit("change",null)):(this.currentDay=e,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.field&&(this.field.value=this.currentDay.format("YYYY/MM/DD HH:mm")),console.log(this.hours,this.minutes),this.$emit("change",this.field?this.field:this.currentDay))},subMonth:function(){this.currentDay.subtract(1,"month"),this.build()},addMonth:function(){this.currentDay.add(1,"month"),this.build()},resetCalendar:function(){this.calendar=[[]]},build:function(){this.resetCalendar();this.currentDay.clone().startOf("month");for(var e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");;){0===e.day()&&this.calendar[0].length>0&&this.calendar.push([]);var n=this.calendar.length-1;if(this.calendar[n].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(i().now(),"day")}),e.isSame(t,"day"))break;e.add(1,"day")}}}};const o=(0,n(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"picker mb-2"},[e.field?t("label",{staticClass:"block leading-5 font-medium text-primary"},[e._v(e._s(e.field.label))]):e._e(),e._v(" "),t("div",{staticClass:"ns-button"},[t("button",{staticClass:"rounded cursor-pointer w-full px-1 py-1 flex items-center text-primary",class:e.field?"mt-1 border":"shadow",on:{click:function(t){e.visible=!e.visible}}},[t("i",{staticClass:"las la-clock text-2xl"}),e._v(" "),e.currentDay&&e.field?t("span",{staticClass:"mx-1 text-sm"},[null!==e.field.value?t("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD HH:mm")))]):e._e(),e._v(" "),null===e.field.value?t("span",[e._v("N/A")]):e._e()]):e._e(),e._v(" "),e.currentDay&&e.date?t("span",{staticClass:"mx-1 text-sm"},[null!==e.date?t("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD HH:mm")))]):e._e(),e._v(" "),null===e.date?t("span",[e._v("N/A")]):e._e()]):e._e()])]),e._v(" "),e.field?t("p",{staticClass:"text-sm text-secondary py-1"},[e._v(e._s(e.field.description))]):e._e(),e._v(" "),e.visible?t("div",{staticClass:"relative z-10 h-0 w-0"},[t("div",{staticClass:"absolute w-72 shadow-xl rounded ns-box anim-duration-300 zoom-in-entrance flex flex-col",class:e.field?"-mt-4":"mt-2"},["years"===e.currentView?t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"p-2 flex items-center"},[t("div",[t("button",{staticClass:"w-8 h-8 border border-numpad-edge outline-none text-numpad-text hover:bg-numpad-hover rounded",on:{click:function(t){return e.subMonth()}}},[t("i",{staticClass:"las la-angle-left"})])]),e._v(" "),t("div",{staticClass:"flex flex-auto font-semibold text-primary justify-center"},[t("span",{staticClass:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(t){return e.toggleView("months")}}},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),t("span",{staticClass:"cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),t("div",[t("button",{staticClass:"w-8 h-8 border border-numpad-edge outline-none text-numpad-text hover:bg-numpad-hover rounded",on:{click:function(t){return e.addMonth()}}},[t("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),t("div",{staticClass:"h-32 flex items-center justify-center text-primary"},[t("div",{staticClass:"rounded input-group info border flex w-2/3 overflow-hidden"},[t("button",{staticClass:"px-4 py-2",on:{click:function(t){return e.subYear()}}},[t("i",{staticClass:"las la-minus"})]),e._v(" "),t("input",{ref:"year",staticClass:"p-2 w-24 text-center outline-none",attrs:{type:"text"},domProps:{value:e.currentDay.format("YYYY")},on:{change:function(t){return e.setYear(t)}}}),e._v(" "),t("button",{staticClass:"px-4 py-2",on:{click:function(t){return e.addYear()}}},[t("i",{staticClass:"las la-plus"})])])])]):e._e(),e._v(" "),"months"===e.currentView?t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"p-2 flex items-center"},[t("div",[t("button",{staticClass:"w-8 h-8 border ns-inset-button outline-none ns-inset-button rounded",on:{click:function(t){return e.subMonth()}}},[t("i",{staticClass:"las la-angle-left"})])]),e._v(" "),t("div",{staticClass:"flex flex-auto font-semibold text-primary justify-center"},[t("span",{staticClass:"mr-2 border-b border-info-secondary border-dashed"},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),t("span",{staticClass:"cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),t("div",[t("button",{staticClass:"w-8 h-8 border ns-inset-button outline-none ns-inset-button rounded",on:{click:function(t){return e.addMonth()}}},[t("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-primary"},e._l(e.months,(function(n,r){return t("div",{key:r,staticClass:"h-8 flex justify-center items-center text-sm"},[[t("div",{staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:e.momentCopy.month(n).format("MM")===e.currentDay.format("MM")?"bg-info-secondary text-white border border-info-secondary":"hover:bg-numpad-hover border border-numpad-edge",on:{click:function(t){return e.setMonth(n)}}},[e._v("\n                                "+e._s(e.momentCopy.format("MMM"))+"\n                            ")])]],2)})),0)]):e._e(),e._v(" "),"days"===e.currentView?t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"p-2 flex items-center"},[t("div",[t("button",{staticClass:"w-8 h-8 border outline-none ns-inset-button rounded",on:{click:function(t){return e.subMonth()}}},[t("i",{staticClass:"las la-angle-left"})])]),e._v(" "),t("div",{staticClass:"flex flex-auto font-semibold text-primary justify-center"},[t("span",{staticClass:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(t){return e.toggleView("months")}}},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),t("span",{staticClass:"cursor-pointer border-b border-info-secondary border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),t("div",[t("button",{staticClass:"w-8 h-8 border outline-none ns-inset-button rounded",on:{click:function(t){return e.addMonth()}}},[t("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary"},[t("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sun")))]),e._v(" "),t("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Mon")))]),e._v(" "),t("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Tue")))]),e._v(" "),t("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Wed")))]),e._v(" "),t("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Thu")))]),e._v(" "),t("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Fri")))]),e._v(" "),t("div",{staticClass:"border border-numpad-edge h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sat")))])]),e._v(" "),e._l(e.calendar,(function(n,r){return t("div",{key:r,staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary"},e._l(e.daysOfWeek,(function(r,i){return t("div",{key:i,staticClass:"h-8 flex justify-center items-center text-sm"},[e._l(n,(function(n,i){return[n.dayOfWeek===r?t("div",{key:i,staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:n.date.format("DD")===e.currentDay.format("DD")?"text-white border border-info-secondary bg-info-secondary":"hover:bg-numpad-hover border border-numpad-edge",on:{click:function(t){return e.selectDate(n.date)}}},[e._v("\n                                "+e._s(n.date.format("DD"))+"\n                            ")]):e._e()]}))],2)})),0)}))],2):e._e(),e._v(" "),t("div",{staticClass:"border-t border-numpad-edge w-full p-2"},[t("div",{staticClass:"-mx-1 flex justify-between"},[t("div",{staticClass:"px-1"},[t("div",{staticClass:"-mx-1 flex"},[e.field?t("div",{staticClass:"px-1"},[t("button",{staticClass:"border ns-inset-button error hover:text-white rounded w-8 h-8 flex items-center justify-center",on:{click:function(t){return e.erase()}}},[t("i",{staticClass:"las la-trash"})])]):e._e(),e._v(" "),"days"!==e.currentView?t("div",{staticClass:"px-1"},[t("button",{staticClass:"border ns-inset-button error hover:text-white rounded w-8 h-8 flex items-center justify-center",on:{click:function(t){return e.toggleView("days")}}},[t("i",{staticClass:"las la-sign-out-alt"})])]):e._e()])]),e._v(" "),t("div",{staticClass:"px-2"},[t("div",{staticClass:"rounded flex"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hours,expression:"hours"}],ref:"hours",staticClass:"w-12 p-1 text-center border border-numpad-edge bg-input-disabled text-primary active:border-numpad-edge",attrs:{placeholder:"HH",type:"number"},domProps:{value:e.hours},on:{change:function(t){return e.detectHoursChange(t)},input:function(t){t.target.composing||(e.hours=t.target.value)}}}),e._v(" "),t("span",{staticClass:"mx-1"},[e._v(":")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.minutes,expression:"minutes"}],ref:"minutes",staticClass:"w-12 p-1 text-center border border-numpad-edge bg-input-disabled text-primary active:border-numpad-edge",attrs:{placeholder:"mm",type:"number"},domProps:{value:e.minutes},on:{change:function(t){return e.detectMinuteChange(t)},input:function(t){t.target.composing||(e.minutes=t.target.value)}}})])])])])])]):e._e()])}),[],!1,null,null,null).exports},9785:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(381),i=n.n(r);const s={name:"ns-datepicker",props:["label","date"],data:function(){return{visible:!1,currentDay:null,daysOfWeek:new Array(7).fill("").map((function(e,t){return t})),calendar:[[]]}},mounted:function(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null].includes(this.date)?i()():i()(this.date),this.build()},methods:{__:n(8094).__,checkClickedItem:function(e){!this.$el.contains(e.srcElement)&&this.visible&&(this.visible=!1)},selectDate:function(e){this.currentDay=e,this.visible=!1,this.$emit("change",e)},subMonth:function(){this.currentDay.subtract(1,"month"),this.build()},addMonth:function(){this.currentDay.add(1,"month"),this.build()},resetCalendar:function(){this.calendar=[[]]},build:function(){this.resetCalendar();this.currentDay.clone().startOf("month");for(var e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");;){0===e.day()&&this.calendar[0].length>0&&this.calendar.push([]);var n=this.calendar.length-1;if(this.calendar[n].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(i().now(),"day")}),e.isSame(t,"day"))break;e.add(1,"day")}}}};const o=(0,n(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"picker"},[t("div",{staticClass:"rounded cursor-pointer bg-white shadow px-1 py-1 flex items-center text-gray-700",on:{click:function(t){e.visible=!e.visible}}},[t("i",{staticClass:"las la-clock text-2xl"}),e._v(" "),t("span",{staticClass:"mx-1 text-sm"},[t("span",[e._v(e._s(e.label||e.__("Date"))+" : ")]),e._v(" "),e.currentDay?t("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD")))]):e._e(),e._v(" "),null===e.currentDay?t("span",[e._v(e._s(e.__("N/A")))]):e._e()])]),e._v(" "),e.visible?t("div",{staticClass:"relative h-0 w-0 -mb-2"},[t("div",{staticClass:"w-72 mt-2 shadow rounded bg-white anim-duration-300 zoom-in-entrance flex flex-col"},[t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"p-2 flex items-center"},[t("div",[t("button",{staticClass:"w-8 h-8 bg-gray-400 rounded",on:{click:function(t){return e.subMonth()}}},[t("i",{staticClass:"las la-angle-left"})])]),e._v(" "),t("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[e._v(e._s(e.currentDay.format("MMM"))+" "+e._s(e.currentDay.format("YYYY")))]),e._v(" "),t("div",[t("button",{staticClass:"w-8 h-8 bg-gray-400 rounded",on:{click:function(t){return e.addMonth()}}},[t("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},[t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sun")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Mon")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Tue")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Wed")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Thu")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Fri")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sat")))])]),e._v(" "),e._l(e.calendar,(function(n,r){return t("div",{key:r,staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},e._l(e.daysOfWeek,(function(r,i){return t("div",{key:i,staticClass:"h-8 flex justify-center items-center text-sm"},[e._l(n,(function(n,i){return[n.dayOfWeek===r?t("div",{key:i,staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:n.date.format("DD")===e.currentDay.format("DD")?"bg-blue-400 text-white border border-blue-500":"hover:bg-gray-100 border border-gray-200",on:{click:function(t){return e.selectDate(n.date)}}},[e._v("\n                                "+e._s(n.date.format("DD"))+"\n                            ")]):e._e()]}))],2)})),0)}))],2),e._v(" "),t("div")])]):e._e()])}),[],!1,null,null,null).exports},1128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r={name:"ns-notice",props:["color"],computed:{actualColor:function(){return this.color||"blue"}}};const i=(0,n(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-4 border-l-4 text-primary ns-notice",class:e.actualColor,attrs:{role:"alert"}},[t("h2",{staticClass:"font-bold"},[e._t("title")],2),e._v(" "),t("p",[e._t("description"),e._t("default")],2)])}),[],!1,null,null,null).exports},8321:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8094);function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const o={name:"ns-numpad",props:["value","currency","floating","limit"],data:function(){return{number:parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join("")),screenValue:0,order:null,cursor:parseInt(ns.currency.ns_currency_precision),orderSubscription:null,allSelected:!0,keys:[].concat(i([7,8,9].map((function(e){return{identifier:e,value:e}}))),i([4,5,6].map((function(e){return{identifier:e,value:e}}))),i([1,2,3].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",value:(0,r.__)("Enter")}])}},mounted:function(){var e=this;this.floating&&this.value>0?this.screenValue=parseFloat(this.value/this.number):this.screenValue=this.value||0;var t=new Array(10).fill("").map((function(e,t){return t}));nsHotPress.create("numpad-keys").whenVisible([".is-popup"]).whenPressed(t,(function(t,n){e.inputValue({value:n})})),nsHotPress.create("numpad-backspace").whenVisible([".is-popup"]).whenPressed("backspace",(function(){return e.inputValue({identifier:"backspace"})})),nsHotPress.create("numpad-increase").whenVisible([".is-popup"]).whenPressed("+",(function(){return e.increaseBy({value:1})})),nsHotPress.create("numpad-reduce").whenVisible([".is-popup"]).whenPressed("-",(function(){return e.increaseBy({value:-1})})),nsHotPress.create("numpad-save").whenVisible([".is-popup"]).whenPressed("enter",(function(){return e.inputValue({identifier:"next"})}))},watch:{value:function(){this.value.toString().length>0?this.floating?this.screenValue=Math.round(this.value*this.number).toString():this.screenValue=this.value:this.screenValue=""}},beforeDestroy:function(){nsHotPress.destroy("numpad-backspace"),nsHotPress.destroy("numpad-increase"),nsHotPress.destroy("numpad-reduce"),nsHotPress.destroy("numpad-save")},methods:{increaseBy:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));this.screenValue=(parseFloat(e.value)*t+(parseFloat(this.screenValue)||0)).toString(),this.allSelected=!1},inputValue:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));if("next"!==e.identifier){if("backspace"===e.identifier)this.allSelected?(this.screenValue="0",this.allSelected=!1):this.screenValue=this.screenValue.toString().substr(0,this.screenValue.length-1);else if(e.value.toString().match(/^\d+$/)){if(this.limit>0&&this.screenValue.length>=this.limit)return;this.allSelected?(this.screenValue=e.value.toString(),this.allSelected=!1):(this.screenValue+=""+e.value.toString(),"percentage"===this.mode&&(this.screenValue=this.screenValue>100?100:this.screenValue))}var n=this.floating&&this.screenValue.length>0&&"0"!==this.screenValue?parseFloat(this.screenValue/this.number):this.screenValue;this.$emit("changed",n)}else this.$emit("next",this.floating&&this.screenValue.length>0?parseFloat(this.screenValue/t):this.screenValue)}}};const a=(0,n(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-3",attrs:{id:"numpad"}},[e._l(e.keys,(function(n,r){return t("div",{key:r,staticClass:"select-none ns-numpad-key border-l border-b h-24 font-bold flex items-center justify-center cursor-pointer",on:{click:function(t){return e.inputValue(n)}}},[void 0!==n.value?t("span",[e._v(e._s(n.value))]):e._e(),e._v(" "),n.icon?t("i",{staticClass:"las",class:n.icon}):e._e()])})),e._v(" "),e._t("numpad-footer")],2)}),[],!1,null,null,null).exports},5507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r={name:"ns-paginate",props:["pagination"],data:function(){return{page:1,path:""}},mounted:function(){this.path=this.pagination.path},computed:{getPagination:function(){return this.pagination?this.pageNumbers(this.pagination.last_page,this.pagination.current_page):[]}},methods:{gotoPage:function(e){this.page=e,this.$emit("load","".concat(this.path,"?page=").concat(this.page))},pageNumbers:function(e,t){var n=[];t-3>1&&n.push(1,"...");for(var r=1;r<=e;r++)t+3>r&&t-3<r&&n.push(r);return t+3<e&&n.push("...",e),console.log(n),n.filter((function(e){return e>0||"string"==typeof e}))}}};const i=(0,n(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex -mx-1",attrs:{id:"pagination"}},[e.pagination.current_page?[t("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-inset-button info shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.gotoPage(e.pagination.first_page)}}},[t("i",{staticClass:"las la-angle-double-left"})]),e._v(" "),e._l(e.getPagination,(function(n,r){return["..."!==e.page?t("a",{key:r,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-inset-button info",class:e.page==n?"active":"",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.gotoPage(n)}}},[e._v(e._s(n))]):e._e(),e._v(" "),"..."===e.page?t("a",{key:r,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-inset-button",attrs:{href:"javascript:void(0)"}},[e._v("...")]):e._e()]})),e._v(" "),t("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-inset-button info shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.gotoPage(e.pagination.last_page)}}},[t("i",{staticClass:"las la-angle-double-right"})])]:e._e()],2)}),[],!1,null,null,null).exports},3720:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r={data:function(){return{}},name:"ns-switch",mounted:function(){},computed:{_options:function(){var e=this;return this.field.options.map((function(t){return t.selected=t.value===e.field.value,t}))},hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},sizeClass:function(){return" w-1/".concat(this._options.length<=4?this._options.length:4)},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__,setSelected:function(e){this.field.value=e.value,this._options.forEach((function(e){return e.selected=!1})),e.selected=!0,this.$forceUpdate(),this.$emit("change",e.value)}},props:["placeholder","leading","type","field"]};const i=(0,n(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-2 ns-switch"},[t("label",{staticClass:"block leading-5 font-medium",class:e.hasError?"has-error":"is-pristine",attrs:{for:e.field.name}},[e._t("default")],2),e._v(" "),t("div",{staticClass:"rounded-lg flex w-52 overflow-hidden shadow my-1",class:e.hasError?"has-error":""},e._l(e._options,(function(n,r){return t("button",{key:r,staticClass:"p-2 text-sm flex-no-wrap outline-none rounded-none",class:n.selected?"selected "+e.sizeClass:"unselected "+e.inputClass+" "+e.sizeClass,attrs:{disabled:n.disabled},on:{click:function(t){return e.setSelected(n)}}},[e._v(e._s(n.label))])})),0),e._v(" "),e.field.errors&&0!==e.field.errors.length?e._e():t("p",{staticClass:"text-xs ns-description"},[e._t("description")],2),e._v(" "),e._l(e.field.errors,(function(n,r){return t("p",{key:r,staticClass:"text-xs ns-error"},["required"===n.identifier?e._t(n.identifier,(function(){return[e._v(e._s(e.__("This field is required.")))]})):e._e()],2)}))],2)}),[],!1,null,null,null).exports},2478:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(1487),i=n(2867),s=n(8094),o=n(2381);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(){l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var s=t&&t.prototype instanceof _?t:_,o=Object.create(s.prototype),a=new D(r||[]);return i(o,"_invoke",{value:O(e,n,a)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var v="suspendedStart",h="suspendedYield",m="executing",b="completed",y={};function _(){}function g(){}function x(){}var w={};d(w,o,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(F([])));k&&k!==n&&r.call(k,o)&&(w=k);var j=x.prototype=_.prototype=Object.create(w);function P(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,s,o,l){var c=p(e[i],e,s);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==a(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(c.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function O(t,n,r){var i=v;return function(s,o){if(i===m)throw new Error("Generator is already running");if(i===b){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var l=E(a,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?b:h,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=b,r.method="throw",r.arg=c.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var s=p(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,y;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function F(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(a(t)+" is not iterable")}return g.prototype=x,i(j,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:g,configurable:!0}),g.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},P(S.prototype),d(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new S(f(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},P(j),d(j,u,"Generator"),d(j,o,(function(){return this})),d(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=F,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:F(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}const u={name:"ns-media",props:["popup"],components:{VueUpload:n(2948)},data:function(){return{pages:[{label:(0,s.__)("Upload"),name:"upload",selected:!1},{label:(0,s.__)("Gallery"),name:"gallery",selected:!0}],resources:[],isDragging:!1,response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},queryPage:1,bulkSelect:!1,files:[]}},mounted:function(){this.popupCloser();var e=this.pages.filter((function(e){return"gallery"===e.name}))[0];this.select(e)},watch:{files:function(){this.uploadFiles()}},computed:{postMedia:function(){return r.kq.applyFilters("http-client-url","/api/nexopos/v4/medias")},currentPage:function(){return this.pages.filter((function(e){return e.selected}))[0]},hasOneSelected:function(){return this.response.data.filter((function(e){return e.selected})).length>0},selectedResource:function(){return this.response.data.filter((function(e){return e.selected}))[0]},csrf:function(){return ns.authentication.csrf},isPopup:function(){return void 0!==this.$popup},user_id:function(){return this.isPopup&&this.$popupParams.user_id||0},panelOpened:function(){return!this.bulkSelect&&this.hasOneSelected}},methods:{popupCloser:i.Z,__:s.__,cancelBulkSelect:function(){this.bulkSelect=!1,this.response.data.forEach((function(e){return e.selected=!1}))},deleteSelected:function(){var e=this;Popup.show(o.default,{title:(0,s.__)("Confirm Your Action"),message:(0,s.__)("You're about to delete selected resources. Would you like to proceed?"),onAction:function(t){t&&r.ih.post("/api/nexopos/v4/medias/bulk-delete",{ids:e.response.data.filter((function(e){return e.selected})).map((function(e){return e.id}))}).subscribe({next:function(t){r.kX.success(t.message).subscribe(),e.loadGallery()},error:function(e){r.kX.error(e.message).subscribe()}})}})},loadUploadScreen:function(){var e=this;setTimeout((function(){e.setDropZone()}),1e3)},setDropZone:function(){var e=this,t=document.getElementById("dropping-zone");t.addEventListener("dragenter",(function(t){return e.preventDefaults(t)}),!1),t.addEventListener("dragleave",(function(t){return e.preventDefaults(t)}),!1),t.addEventListener("dragover",(function(t){return e.preventDefaults(t)}),!1),t.addEventListener("drop",(function(t){return e.preventDefaults(t)}),!1);["dragenter","dragover"].forEach((function(n){t.addEventListener(n,(function(){e.isDragging=!0}))})),["dragleave","drop"].forEach((function(n){t.addEventListener(n,(function(){e.isDragging=!1}))})),t.addEventListener("drop",(function(t){return e.handleDrop(t)}),!1),this.$refs.files.addEventListener("change",(function(t){return e.processFiles(t.currentTarget.files)}))},uploadFiles:function(){var e,t=this;return(e=l().mark((function e(){var n,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.files.filter((function(e){return!1===e.uploaded&&0===e.progress&&!1===e.failed})),i=l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n[s],e.prev=1,t.progress=1,e.next=5,new Promise((function(e,n){var i=new FormData;i.append("file",t.file),r.ih.post("/api/nexopos/v4/medias",i,{headers:{"Content-Type":"multipart/form-data"}}).subscribe({next:function(n){t.uploaded=!0,t.progress=100,e(n)},error:function(e){n(e)}})}));case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.failed=!0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})),s=0;case 3:if(!(s<n.length)){e.next=8;break}return e.delegateYield(i(),"t0",5);case 5:s++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){c(s,r,i,o,a,"next",e)}function a(e){c(s,r,i,o,a,"throw",e)}o(void 0)}))})()},handleDrop:function(e){this.processFiles(e.dataTransfer.files),e.preventDefault(),e.stopPropagation()},preventDefaults:function(e){e.preventDefault(),e.stopPropagation()},triggerManualUpload:function(){this.$refs.files.click()},processFiles:function(e){var t=this;Array.from(e).filter((function(e){return["image/png","image/gif","image/jpg","image/jpeg"].includes(e.type)})).forEach((function(e){t.files.unshift({file:e,uploaded:!1,failed:!1,progress:0})}))},select:function(e){this.pages.forEach((function(e){return e.selected=!1})),e.selected=!0,"gallery"===e.name?this.loadGallery():"upload"===e.name&&this.loadUploadScreen()},loadGallery:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=null===t?this.queryPage:t,this.queryPage=t,r.ih.get("/api/nexopos/v4/medias?page=".concat(t,"&user_id=").concat(this.user_id)).subscribe((function(t){t.data.forEach((function(e){return e.selected=!1})),e.response=t}))},useSelectedEntries:function(){this.$popupParams.resolve({event:"use-selected",value:this.response.data.filter((function(e){return e.selected}))}),this.$popup.close()},selectResource:function(e){var t=this;this.bulkSelect||this.response.data.forEach((function(n,r){r!==t.response.data.indexOf(e)&&(n.selected=!1)})),e.selected=!e.selected}}};const d=(0,n(1900).Z)(u,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex md:flex-row flex-col ns-box shadow-xl overflow-hidden",class:e.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full",attrs:{id:"ns-media"}},[t("div",{staticClass:"sidebar w-48 md:h-full flex-shrink-0"},[t("h3",{staticClass:"text-xl font-bold my-4 text-center"},[e._v(e._s(e.__("Medias Manager")))]),e._v(" "),t("ul",{staticClass:"sidebar-menus flex md:block"},e._l(e.pages,(function(n,r){return t("li",{key:r,staticClass:"py-2 px-3 cursor-pointer border-l-8",class:n.selected?"active":"",on:{click:function(t){return e.select(n)}}},[e._v(e._s(n.label))])})),0)]),e._v(" "),"upload"===e.currentPage.name?t("div",{staticClass:"content w-full overflow-hidden flex"},[t("div",{staticClass:"flex flex-auto m-2 p-2 flex-col border-info-primary items-center justify-center",class:e.isDragging?"border-dashed border":"",attrs:{id:"dropping-zone"},on:{click:function(t){return e.triggerManualUpload()}}},[t("h3",{staticClass:"text-lg md:text-xl font-bold text-center text-primary mb-4"},[e._v(e._s(e.__("Click Here Or Drop Your File To Upload")))]),e._v(" "),t("input",{ref:"files",staticStyle:{display:"none"},attrs:{type:"file",name:"",multiple:"",id:""}}),e._v(" "),t("div",{staticClass:"rounded w-full md:w-2/3 text-primary h-56 overflow-y-auto ns-scrollbar p-2"},[t("ul",e._l(e.files,(function(n,r){return t("li",{key:r,staticClass:"p-2 mb-2 shadow ns-media-upload-item flex items-center justify-between rounded"},[t("span",[e._v(e._s(n.file.name))]),e._v(" "),t("span",{staticClass:"rounded bg-info-primary flex items-center justify-center text-xs p-2"},[e._v(e._s(n.progress)+"%")])])})),0)])])]):e._e(),e._v(" "),"gallery"===e.currentPage.name?t("div",{staticClass:"content flex-col w-full overflow-hidden flex"},[e.popup?t("div",{staticClass:"p-2 flex flex-shrink-0 justify-between"},[t("div"),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.popup.close()}}})],1)]):e._e(),e._v(" "),t("div",{staticClass:"flex flex-auto overflow-hidden"},[t("div",{staticClass:"shadow ns-grid flex flex-auto flex-col overflow-y-auto ns-scrollbar"},[t("div",{staticClass:"flex flex-auto"},[t("div",{staticClass:"p-2 overflow-x-auto"},[t("div",{staticClass:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4"},e._l(e.response.data,(function(n,r){return t("div",{key:r},[t("div",{staticClass:"p-2"},[t("div",{staticClass:"rounded-lg aspect-square bg-gray-500 m-2 overflow-hidden flex items-center justify-center",class:n.selected?"ns-media-image-selected ring-4":"",on:{click:function(t){return e.selectResource(n)}}},[t("img",{staticClass:"object-cover h-full",attrs:{src:n.sizes.thumb,alt:n.name}})])])])})),0)]),e._v(" "),0===e.response.data.length?t("div",{staticClass:"flex flex-auto items-center justify-center"},[t("h3",{staticClass:"text-2xl font-bold"},[e._v(e._s(e.__("Nothing has already been uploaded")))])]):e._e()])]),e._v(" "),t("div",{staticClass:"ns-media-preview-panel hidden lg:block w-64 flex-shrink-0",attrs:{id:"preview"}},[t("div",{staticClass:"h-64 bg-gray-800 flex items-center justify-center"},[e.panelOpened?t("img",{attrs:{src:e.selectedResource.sizes.thumb,alt:e.selectedResource.name}}):e._e()]),e._v(" "),e.panelOpened?t("div",{staticClass:"p-4 text-gray-700 text-sm",attrs:{id:"details"}},[t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("File Name"))+": ")]),t("span",[e._v(e._s(e.selectedResource.name))])]),e._v(" "),t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("Uploaded At"))+":")]),t("span",[e._v(e._s(e.selectedResource.created_at))])]),e._v(" "),t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("By"))+" :")]),t("span",[e._v(e._s(e.selectedResource.user.username))])])]):e._e()])]),e._v(" "),t("div",{staticClass:"p-2 flex ns-media-footer flex-shrink-0 justify-between"},[t("div",{staticClass:"flex -mx-2 flex-shrink-0"},[t("div",{staticClass:"px-2 flex-shrink-0 flex"},[t("div",{staticClass:"rounded shadow overflow-hidden flex text-sm"},[e.bulkSelect?t("div",{staticClass:"ns-button info"},[t("button",{staticClass:"py-2 px-3",on:{click:function(t){return e.cancelBulkSelect()}}},[t("i",{staticClass:"las la-times"})])]):e._e(),e._v(" "),e.hasOneSelected&&!e.bulkSelect?t("div",{staticClass:"ns-button info"},[t("button",{staticClass:"py-2 px-3",on:{click:function(t){e.bulkSelect=!0}}},[t("i",{staticClass:"las la-check-circle"})])]):e._e(),e._v(" "),e.hasOneSelected?t("div",{staticClass:"ns-button error"},[t("button",{staticClass:"py-2 px-3",on:{click:function(t){return e.deleteSelected()}}},[t("i",{staticClass:"las la-trash"})])]):e._e()])])]),e._v(" "),t("div",{staticClass:"flex-shrink-0 -mx-2 flex"},[t("div",{staticClass:"px-2"},[t("div",{staticClass:"rounded shadow overflow-hidden flex text-sm"},[t("div",{staticClass:"ns-button",class:1===e.response.current_page?"disabled cursor-not-allowed":"info"},[t("button",{staticClass:"p-2",attrs:{disabled:1===e.response.current_page},on:{click:function(t){return e.loadGallery(e.response.current_page-1)}}},[e._v(e._s(e.__("Previous")))])]),e._v(" "),t("hr",{staticClass:"border-r border-gray-700"}),e._v(" "),t("div",{staticClass:"ns-button",class:e.response.current_page===e.response.last_page?"disabled cursor-not-allowed":"info"},[t("button",{staticClass:"p-2",attrs:{disabled:e.response.current_page===e.response.last_page},on:{click:function(t){return e.loadGallery(e.response.current_page+1)}}},[e._v(e._s(e.__("Next")))])])])]),e._v(" "),e.popup&&e.hasOneSelected?t("div",{staticClass:"px-2"},[t("div",{staticClass:"ns-button info"},[t("button",{staticClass:"rounded shadow p-2 text-sm",on:{click:function(t){return e.useSelectedEntries()}}},[e._v(e._s(e.__("Use Selected")))])])]):e._e()])])]):e._e()])}),[],!1,null,null,null).exports},9326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const r={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(void 0!==e.$popupParams.onAction&&e.$popupParams.onAction(!1),e.$popup.close())}))},methods:{__:n(8094).__,emitAction:function(e){void 0!==this.$popupParams.onAction&&this.$popupParams.onAction(e),this.$popup.close()}}};const i=(0,n(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-6/7-screen md:w-4/7-screen lg:w-3/7-screen flex flex-col shadow-lg",class:e.size,attrs:{id:"alert-popup"}},[t("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[e.title?t("h2",{staticClass:"text-3xl font-body"},[e._v(e._s(e.title))]):e._e(),e._v(" "),t("p",{staticClass:"py-4 text-center"},[e._v(e._s(e.message))])]),e._v(" "),t("div",{staticClass:"action-buttons flex border-t justify-end items-center p-2"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Ok")))])],1)])}),[],!1,null,null,null).exports},1588:(e,t,n)=>{"use strict";n.d(t,{Z:()=>te});var r=n(1487),i=n(3515),s=n(2277),o=n(3658),a=n(2867),l=n(8094);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={mounted:function(){this.popuCloser(),this.loadFields(),this.product=this.$popupParams.product},data:function(){return{formValidation:new o.Z,fields:[],product:null}},methods:{__:l.__,popuCloser:a.Z,close:function(){this.$popupParams.reject(!1),this.$popup.close()},addProduct:function(){if(this.formValidation.validateFields(this.fields),this.formValidation.fieldsValid(this.fields)){var e=this.formValidation.extractFields(this.fields),t=d(d({},this.product),e);return this.$popupParams.resolve(t),console.log(e,t),this.close()}r.kX.error((0,l.__)("The form is not valid.")).subscribe()},loadFields:function(){var e=this;r.ih.get("/api/nexopos/v4/fields/ns.refund-product").subscribe((function(t){e.fields=e.formValidation.createFields(t),e.fields.forEach((function(t){t.value=e.product[t.name]||""}))}))}}};var v=n(1900);const h=(0,v.Z)(p,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-xl ns-box w-95vw md:w-3/5-screen lg:w-3/7-screen h-95vh md:h-3/5-screen lg:h-3/7-screen overflow-hidden flex flex-col"},[t("div",{staticClass:"p-2 flex justify-between border-b ns-box-header items-center"},[t("h3",{staticClass:"text-semibold"},[e._v(e._s(e.__("Products")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto overflow-y-auto relative ns-scrollbar"},[t("div",{staticClass:"p-2"},e._l(e.fields,(function(e,n){return t("ns-field",{key:n,attrs:{field:e}})})),1),e._v(" "),0===e.fields.length?t("div",{staticClass:"h-full w-full flex items-center justify-center"},[t("ns-spinner")],1):e._e()]),e._v(" "),t("div",{staticClass:"p-2 flex justify-between items-center border-t ns-box-body"},[t("div"),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.addProduct()}}},[e._v(e._s(e.__("Add Product")))])],1)])])}),[],!1,null,null,null).exports;var m=n(3216),b=n(8321);const y={components:{nsNumpad:b.Z},data:function(){return{product:null,seeValue:0,availableQuantity:0}},mounted:function(){this.product=this.$popupParams.product,this.availableQuantity=this.$popupParams.availableQuantity,this.seeValue=this.product.quantity},methods:{__:l.__,popupResolver:m.Z,close:function(){this.$popupParams.reject(!1),this.$popup.close()},setChangedValue:function(e){this.seeValue=e},updateQuantity:function(e){if(e>this.availableQuantity)return r.kX.error("Unable to proceed as the quantity provided is exceed the available quantity.").subscribe();this.product.quantity=parseFloat(e),this.$popupParams.resolve(this.product),this.$popup.close()}}};const _=(0,v.Z)(y,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-xl ns-box overflow-hidden w-95vw md:w-4/6-screen lg:w-3/7-screen"},[t("div",{staticClass:"p-2 flex justify-between ns-box-header"},[t("h3",{staticClass:"font-semibold"},[e._v(e._s(e.__("Quantity")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),e.product?t("div",{staticClass:"border-t border-b ns-box-body py-2 flex items-center justify-center text-2xl font-semibold"},[t("span",[e._v(e._s(e.seeValue))]),e._v(" "),t("span",{staticClass:"text-primary text-sm"},[e._v("("+e._s(e.availableQuantity)+" "+e._s(e.__("available"))+")")])]):e._e(),e._v(" "),e.product?t("div",{staticClass:"flex-auto overflow-y-auto p-2"},[t("ns-numpad",{attrs:{value:e.product.quantity},on:{next:function(t){return e.updateQuantity(t)},changed:function(t){return e.setChangedValue(t)}}})],1):e._e()])}),[],!1,null,null,null).exports;var g=n(2909),x=n(2381),w=n(1419),C=n(5494);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O={components:{nsNumpad:b.Z},props:["order"],computed:{screenValue:function(){var e=parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join(""));return this.screen/e},total:function(){return this.refundables.length>0?this.refundables.map((function(e){return parseFloat(e.unit_price)*parseFloat(e.quantity)})).reduce((function(e,t){return e+t}))+this.shippingFees:0+this.shippingFees},shippingFees:function(){return this.refundShipping?this.order.shipping:0}},data:function(){return{isSubmitting:!1,formValidation:new o.Z,refundables:[],paymentOptions:[],paymentField:[],print:new C.Z({urls:systemUrls,options:systemOptions}),refundShipping:!1,selectedPaymentGateway:!1,screen:0,selectFields:[{type:"select",options:this.order.products.map((function(e){return{label:"".concat(e.name," - ").concat(e.unit.name," (x").concat(e.quantity,")"),value:e.id}})),validation:"required",name:"product_id",label:(0,l.__)("Product"),description:(0,l.__)("Select the product to perform a refund.")}]}},methods:{__:l.__,updateScreen:function(e){this.screen=e},toggleRefundShipping:function(e){this.refundShipping=e,this.refundShipping},proceedPayment:function(){var e=this;return!1===this.selectedPaymentGateway?r.kX.error((0,l.__)("Please select a payment gateway before proceeding.")).subscribe():0===this.total?r.kX.error((0,l.__)("There is nothing to refund.")).subscribe():0===this.screenValue?r.kX.error((0,l.__)("Please provide a valid payment amount.")).subscribe():void w.G.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("The refund will be made on the current order."),onAction:function(t){t&&e.doProceed()}})},doProceed:function(){var e=this,t={products:this.refundables,total:this.screenValue,payment:this.selectedPaymentGateway,refund_shipping:this.refundShipping};this.isSubmitting=!0,r.ih.post("/api/nexopos/v4/orders/".concat(this.order.id,"/refund"),t).subscribe({next:function(t){e.isSubmitting=!1,e.$emit("changed",!0),"refunded"===t.data.order.payment_status&&e.$emit("loadTab","details"),e.print.process(t.data.orderRefund.id,"refund"),r.kX.success(t.message).subscribe()},error:function(t){e.isSubmitting=!1,r.kX.error(t.message).subscribe()}})},addProduct:function(){var e=this;if(this.formValidation.validateFields(this.selectFields),!this.formValidation.fieldsValid(this.selectFields))return r.kX.error((0,l.__)("Please select a product before proceeding.")).subscribe();var t=this.formValidation.extractFields(this.selectFields),n=this.order.products.filter((function(e){return e.id===t.product_id})),i=this.refundables.filter((function(e){return e.id===t.product_id}));if(i.length>0){var s=i.map((function(e){return parseInt(e.quantity)})).reduce((function(e,t){return e+t}));if(s===n[0].quantity)return r.kX.error((0,l.__)("Not enough quantity to proceed.")).subscribe()}if(0===n[0].quantity)return r.kX.error((0,l.__)("Not enough quantity to proceed.")).subscribe();var o=P(P({},n[0]),{condition:"",description:""});new Promise((function(e,t){w.G.show(h,{resolve:e,reject:t,product:o})})).then((function(t){t.quantity=e.getProductOriginalQuantity(t.id)-e.getProductUsedQuantity(t.id),e.refundables.push(t)}),(function(e){return e}))},getProductOriginalQuantity:function(e){var t=this.order.products.filter((function(t){return t.id===e}));return t.length>0?t.map((function(e){return parseFloat(e.quantity)})).reduce((function(e,t){return e+t})):0},getProductUsedQuantity:function(e){var t=this.refundables.filter((function(t){return t.id===e}));return t.length>0?t.map((function(e){return parseFloat(e.quantity)})).reduce((function(e,t){return e+t})):0},openSettings:function(e){var t=this;new Promise((function(t,n){w.G.show(h,{resolve:t,reject:n,product:e})})).then((function(n){var r=t.refundables.indexOf(e);t.$set(t.refundables,r,n)}),(function(e){return e}))},selectPaymentGateway:function(){var e=this;new Promise((function(t,n){w.G.show(g.Z,P({resolve:t,reject:n,value:[e.selectedPaymentOption]},e.paymentField[0]))})).then((function(t){e.selectedPaymentGateway=t[0]}),(function(e){return e}))},changeQuantity:function(e){var t=this;new Promise((function(n,r){var i=t.getProductOriginalQuantity(e.id)-t.getProductUsedQuantity(e.id)+parseFloat(e.quantity);w.G.show(_,{resolve:n,reject:r,product:e,availableQuantity:i})})).then((function(n){if(n.quantity>t.getProductUsedQuantity(e.id)-e.quantity){var r=t.refundables.indexOf(e);t.$set(t.refundables,r,n)}}))},deleteProduct:function(e){var t=this;new Promise((function(n,r){w.G.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this product ?"),onAction:function(n){if(n){var r=t.refundables.indexOf(e);t.refundables.splice(r,1)}}})}))}},mounted:function(){var e=this;this.selectFields=this.formValidation.createFields(this.selectFields),r.ih.get("/api/nexopos/v4/orders/payments").subscribe((function(t){e.paymentField=t}))}};const E=(0,v.Z)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"-m-4 flex-auto flex flex-wrap relative"},[e.isSubmitting?t("div",{staticClass:"bg-overlay h-full w-full flex items-center justify-center absolute z-30"},[t("ns-spinner")],1):e._e(),e._v(" "),t("div",{staticClass:"px-4 w-full lg:w-1/2"},[t("h3",{staticClass:"py-2 border-b-2 text-primary border-info-primary"},[e._v(e._s(e.__("Refund With Products")))]),e._v(" "),t("div",{staticClass:"my-2"},[t("ul",[t("li",{staticClass:"border-b border-info-primary flex justify-between items-center mb-2"},[t("div",{staticClass:"flex-auto flex-col flex"},[t("div",{staticClass:"p-2 flex"},e._l(e.selectFields,(function(e,n){return t("ns-field",{key:n,attrs:{field:e}})})),1),e._v(" "),t("div",{staticClass:"flex justify-between p-2"},[t("div",{staticClass:"flex items-center text-primary"},[e.order.shipping>0?t("span",{staticClass:"mr-2"},[e._v(e._s(e.__("Refund Shipping")))]):e._e(),e._v(" "),e.order.shipping>0?t("ns-checkbox",{attrs:{checked:e.refundShipping},on:{change:function(t){return e.toggleRefundShipping(t)}}}):e._e()],1),e._v(" "),t("div",[t("button",{staticClass:"border rounded-full px-2 py-1 ns-inset-button info",on:{click:function(t){return e.addProduct()}}},[e._v(e._s(e.__("Add Product")))])])])])]),e._v(" "),t("li",[t("h4",{staticClass:"py-1 border-b-2 text-primary border-info-primary"},[e._v(e._s(e.__("Products")))])]),e._v(" "),e._l(e.refundables,(function(n){return t("li",{key:n.id,staticClass:"elevation-surface border flex justify-between items-center mb-2"},[t("div",{staticClass:"px-2 text-primary flex justify-between flex-auto"},[t("div",{staticClass:"flex flex-col"},[t("p",{staticClass:"py-2"},[t("span",[e._v(e._s(n.name))]),e._v(" "),"damaged"===n.condition?t("span",{staticClass:"rounded-full px-2 py-1 text-xs bg-error-tertiary mx-2 text-white"},[e._v(e._s(e.__("Damaged")))]):e._e(),e._v(" "),"unspoiled"===n.condition?t("span",{staticClass:"rounded-full px-2 py-1 text-xs bg-success-tertiary mx-2 text-white"},[e._v(e._s(e.__("Unspoiled")))]):e._e()]),e._v(" "),t("small",[e._v(e._s(n.unit.name))])]),e._v(" "),t("div",{staticClass:"flex items-center justify-center"},[t("span",{staticClass:"py-1 flex items-center cursor-pointer border-b border-dashed border-info-primary"},[e._v(e._s(e._f("currency")(n.unit_price*n.quantity)))])])]),e._v(" "),t("div",{staticClass:"flex"},[t("p",{staticClass:"p-2 border-l border-info-primary cursor-pointer text-primary ns-numpad-key w-16 h-16 flex items-center justify-center",on:{click:function(t){return e.openSettings(n)}}},[t("i",{staticClass:"las la-cog text-xl"})]),e._v(" "),t("p",{staticClass:"p-2 border-l border-info-primary cursor-pointer text-primary ns-numpad-key w-16 h-16 flex items-center justify-center",on:{click:function(t){return e.deleteProduct(n)}}},[t("i",{staticClass:"las la-trash"})]),e._v(" "),t("p",{staticClass:"p-2 border-l border-info-primary cursor-pointer text-primary ns-numpad-key w-16 h-16 flex items-center justify-center",on:{click:function(t){return e.changeQuantity(n)}}},[e._v(e._s(n.quantity))])])])}))],2)])]),e._v(" "),t("div",{staticClass:"px-4 w-full lg:w-1/2"},[t("h3",{staticClass:"py-2 border-b-2 text-primary border-info-primary"},[e._v(e._s(e.__("Summary")))]),e._v(" "),t("div",{staticClass:"py-2"},[t("div",{staticClass:"elevation-surface border font-semibold flex mb-2 p-2 justify-between"},[t("span",[e._v(e._s(e.__("Total")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.total)))])]),e._v(" "),t("div",{staticClass:"elevation-surface border success font-semibold flex mb-2 p-2 justify-between"},[t("span",[e._v(e._s(e.__("Paid")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.tendered)))])]),e._v(" "),t("div",{staticClass:"elevation-surface border info font-semibold flex mb-2 p-2 justify-between cursor-pointer",on:{click:function(t){return e.selectPaymentGateway()}}},[t("span",[e._v(e._s(e.__("Payment Gateway")))]),e._v(" "),t("span",[e._v(e._s(e.selectedPaymentGateway?e.selectedPaymentGateway.label:"N/A"))])]),e._v(" "),t("div",{staticClass:"elevation-surface border font-semibold flex mb-2 p-2 justify-between"},[t("span",[e._v(e._s(e.__("Screen")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.screenValue)))])]),e._v(" "),t("div",[t("ns-numpad",{attrs:{currency:!0,value:e.screen},on:{changed:function(t){return e.updateScreen(t)},next:function(t){return e.proceedPayment(t)}}})],1)])])])}),[],!1,null,null,null).exports;var $=n(8093);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,s=void 0,s=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===T(s)?s:String(s)),r)}var i,s}var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getTypeLabel",value:function(e){var t=typeLabels.filter((function(t){return t.value===e}));return t.length>0?t[0].label:(0,l.__)("Unknown Status")}},{key:"getDeliveryStatus",value:function(e){var t=deliveryStatuses.filter((function(t){return t.value===e}));return t.length>0?t[0].label:(0,l.__)("Unknown Status")}},{key:"getProcessingStatus",value:function(e){var t=processingStatuses.filter((function(t){return t.value===e}));return t.length>0?t[0].label:(0,l.__)("Unknown Status")}},{key:"getPaymentStatus",value:function(e){var t=paymentLabels.filter((function(t){return t.value===e}));return t.length>0?t[0].label:(0,l.__)("Unknown Status")}}])&&D(t.prototype,n),r&&D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===L(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N={props:["order"],data:function(){return{labels:new F,validation:new o.Z,inputValue:0,fields:[],paymentTypes}},computed:{paymentsLabels:function(){var e=new Object;return this.paymentTypes.forEach((function(t){e[t.value]=t.label})),e}},methods:{__:l.__,updateValue:function(e){this.inputValue=e},loadPaymentFields:function(){var e=this;r.ih.get("/api/nexopos/v4/orders/payments").subscribe((function(t){e.fields=e.validation.createFields(t)}))},submitPayment:function(e){var t=this;if(this.validation.validateFields(this.fields),!this.validation.fieldsValid(this.fields))return r.kX.error((0,l.__)("Unable to proceed the form is not valid")).subscribe();if(0==parseFloat(e))return r.kX.error((0,l.__)("Please provide a valid value")).subscribe();e=parseFloat(e);var n=V(V({},this.validation.extractFields(this.fields)),{},{value:e});Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("You make a payment for {amount}. A payment can't be canceled. Would you like to proceed ?").replace("{amount}",this.$options.filters.currency(e)),onAction:function(e){e&&r.ih.post("/api/nexopos/v4/orders/".concat(t.order.id,"/payments"),n).subscribe((function(e){r.kX.success(e.message).subscribe(),t.$emit("changed")}),(function(e){r.kX.error(e.message).subscribe()}))}})}},components:{nsNumpad:b.Z},mounted:function(){this.loadPaymentFields()}};const M=(0,v.Z)(N,(function(){var e=this,t=e._self._c;return t("div",{},[t("div",{staticClass:"flex -mx-4 flex-wrap"},[t("div",{staticClass:"px-2 w-full md:w-1/2"},[t("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center elevation-surface info border text-xl font-bold"},[t("span",[e._v(e._s(e.__("Total")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.total)))])])]),e._v(" "),t("div",{staticClass:"px-2 w-full md:w-1/2"},[t("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center elevation-surface success border text-xl font-bold"},[t("span",[e._v(e._s(e.__("Paid")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.tendered)))])])]),e._v(" "),t("div",{staticClass:"px-2 w-full md:w-1/2"},[t("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center elevation-surface error border text-xl font-bold"},[t("span",[e._v(e._s(e.__("Unpaid")))]),e._v(" "),e.order.total-e.order.tendered>0?t("span",[e._v(e._s(e._f("currency")(e.order.total-e.order.tendered)))]):e._e(),e._v(" "),e.order.total-e.order.tendered<=0?t("span",[e._v(e._s(e._f("currency")(0)))]):e._e()])]),e._v(" "),t("div",{staticClass:"px-2 w-full md:w-1/2"},[t("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center elevation-surface warning border text-xl font-bold"},[t("span",[e._v(e._s(e.__("Customer Account")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.customer.account_amount)))])])])]),e._v(" "),t("div",{staticClass:"flex -mx-4 flex-wrap"},[t("div",{staticClass:"px-2 w-full mb-4 md:w-1/2"},["paid"!==e.order.payment_status?t("div",[t("h3",{staticClass:"font-semibold border-b-2 border-info-primary py-2"},[e._v("\n                    "+e._s(e.__("Payment"))+"\n                ")]),e._v(" "),t("div",{staticClass:"py-2"},[e._l(e.fields,(function(e,n){return t("ns-field",{key:n,attrs:{field:e}})})),e._v(" "),t("div",{staticClass:"my-2 px-2 h-12 flex justify-end items-center border elevation-surface"},[e._v("\n                        "+e._s(e._f("currency")(e.inputValue))+"\n                    ")]),e._v(" "),t("ns-numpad",{attrs:{floating:!0,value:e.inputValue},on:{next:function(t){return e.submitPayment(t)},changed:function(t){return e.updateValue(t)}}})],2)]):e._e(),e._v(" "),"paid"===e.order.payment_status?t("div",{staticClass:"flex items-center justify-center h-full"},[t("h3",{staticClass:"text-primary font-semibold"},[e._v(e._s(e.__("No payment possible for paid order.")))])]):e._e()]),e._v(" "),t("div",{staticClass:"px-2 w-full mb-4 md:w-1/2"},[t("h3",{staticClass:"font-semibold border-b-2 border-info-primary py-2 mb-2"},[e._v("\n                "+e._s(e.__("Payment History"))+"\n            ")]),e._v(" "),t("ul",e._l(e.order.payments,(function(n){return t("li",{key:n.id,staticClass:"p-2 flex items-center justify-between text-shite border elevation-surface mb-2"},[t("span",[e._v(e._s(e.paymentsLabels[n.identifier]||e.__("Unknown")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(n.value)))])])})),0)])])])}),[],!1,null,null,null).exports;var Z=n(9527);const Y={props:["order"],data:function(){return{processingStatuses,deliveryStatuses,labels:new F,showProcessingSelect:!1,showDeliverySelect:!1}},mounted:function(){},methods:{__:l.__,submitProcessingChange:function(){var e=this;w.G.show(x.default,{title:(0,l.__)("Would you proceed ?"),message:(0,l.__)("The processing status of the order will be changed. Please confirm your action."),onAction:function(t){t&&r.ih.post("/api/nexopos/v4/orders/".concat(e.order.id,"/processing"),{process_status:e.order.process_status}).subscribe({next:function(t){e.showProcessingSelect=!1,r.kX.success(t.message).subscribe()},error:function(e){r.kX.error(e.message||(0,l.__)("Unexpected error occurred.")).subscribe()}})}})},openRefunds:function(){var e=this;try{new Promise((function(t,n){var r=e.order;w.G.show(Z.Z,{order:r,resolve:t,reject:n})}))}catch(e){}},submitDeliveryStatus:function(){var e=this;w.G.show(x.default,{title:(0,l.__)("Would you proceed ?"),message:(0,l.__)("The delivery status of the order will be changed. Please confirm your action."),onAction:function(t){t&&r.ih.post("/api/nexopos/v4/orders/".concat(e.order.id,"/delivery"),{delivery_status:e.order.delivery_status}).subscribe({next:function(t){e.showDeliverySelect=!1,r.kX.success(t.message).subscribe()},error:function(e){r.kX.error(e.message||(0,l.__)("Unexpected error occurred.")).subscribe()}})}})}}};const I=(0,v.Z)(Y,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"-mx-4 flex flex-wrap"},[t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"w-full mb-2 flex-wrap flex"},[t("div",{staticClass:"w-full mb-2 px-4"},[t("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary"},[e._v(e._s(e.__("Payment Summary")))])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"elevation-surface border p-2 flex justify-between items-start"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[e._v(e._s(e.__("Sub Total")))])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary"},[e._v(e._s(e._f("currency")(e.order.subtotal)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start ns-notice error"},[t("div",[t("h4",{staticClass:"text-semibold"},[t("span",{staticClass:"text-white"},[e._v(e._s(e.__("Discount")))]),e._v(" "),"percentage"===e.order.discount_type?t("span",{staticClass:"text-white ml-1"},[e._v("("+e._s(e.order.discount_percentage)+"%)")]):e._e(),e._v(" "),"flat"===e.order.discount_type?t("span",{staticClass:"text-white ml-1"},[e._v("(Flat)")]):e._e()])]),e._v(" "),t("div",{staticClass:"font-semibold"},[t("span",[e._v(e._s(e._f("currency")(e.order.discount)))])])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start elevation-surface border"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[e._v(e._s(e.__("Shipping")))])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary"},[e._v(e._s(e._f("currency")(e.order.shipping)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start ns-notice error"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v("\n                            "+e._s(e.__("Coupons"))+"\n                        ")])]),e._v(" "),t("div",{staticClass:"font-semibold"},[t("span",[e._v(e._s(e._f("currency")(e.order.total_coupons)))])])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start ns-notice info"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v(e._s(e.__("Total")))])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.total)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start ns-notice warning"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v(e._s(e.__("Taxes")))])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.tax_value)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start text-primary elevation-surface error border"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v(e._s(e.__("Change")))])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.change)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start elevation-surface border"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v(e._s(e.__("Paid")))])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.tendered)))])])])])]),e._v(" "),t("div",{staticClass:"px-4 w-full md:w-1/2 lg:w-2/4 mb-2"},[t("div",{staticClass:"mb-2"},[t("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary"},[e._v(e._s(e.__("Order Status")))])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex justify-between items-start elevation-surface border"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[t("span",[e._v(e._s(e.__("Customer")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary"},[e._v(e._s(e.order.nexopos_customers_name))])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex justify-between items-start elevation-surface border"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[t("span",[e._v(e._s(e.__("Type")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary"},[e._v(e._s(e.labels.getTypeLabel(e.order.type)))])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex justify-between items-start elevation-surface border"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[t("span",[e._v(e._s(e.__("Delivery Status")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary mt-2 md:mt-0 w-full md:w-auto"},[t("div",{staticClass:"w-full text-center"},[e.showDeliverySelect?e._e():t("span",{staticClass:"font-semibold text-secondary border-b border-info-primary cursor-pointer border-dashed",on:{click:function(t){e.showDeliverySelect=!0}}},[e._v(e._s(e.labels.getDeliveryStatus(e.order.delivery_status)))])]),e._v(" "),e.showDeliverySelect?t("div",{staticClass:"flex-auto flex"},[t("div",{staticClass:"ns-select flex items-center justify-center"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.order.delivery_status,expression:"order.delivery_status"}],ref:"process_status",staticClass:"flex-auto border-info-primary rounded-lg",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.order,"delivery_status",t.target.multiple?n:n[0])}}},e._l(e.deliveryStatuses,(function(n,r){return t("option",{key:r,domProps:{value:n.value}},[e._v(e._s(n.label))])})),0)]),e._v(" "),t("div",{staticClass:"pl-2 flex"},[t("ns-close-button",{on:{click:function(t){e.showDeliverySelect=!1}}}),e._v(" "),t("button",{staticClass:"bg-success-primary text-white rounded-full px-2 py-1",on:{click:function(t){return e.submitDeliveryStatus(e.order)}}},[e._v(e._s(e.__("Save")))])],1)]):e._e()])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex flex-col md:flex-row justify-between items-center elevation-surface border"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[t("span",[e._v(e._s(e.__("Processing Status")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary mt-2 md:mt-0 w-full md:w-auto"},[t("div",{staticClass:"w-full text-center"},[e.showProcessingSelect?e._e():t("span",{staticClass:"border-b border-info-primary cursor-pointer border-dashed",on:{click:function(t){e.showProcessingSelect=!0}}},[e._v(e._s(e.labels.getProcessingStatus(e.order.process_status)))])]),e._v(" "),e.showProcessingSelect?t("div",{staticClass:"flex-auto flex"},[t("div",{staticClass:"ns-select flex items-center justify-center"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.order.process_status,expression:"order.process_status"}],ref:"process_status",staticClass:"flex-auto border-info-primary rounded-lg",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.order,"process_status",t.target.multiple?n:n[0])}}},e._l(e.processingStatuses,(function(n,r){return t("option",{key:r,domProps:{value:n.value}},[e._v(e._s(n.label))])})),0)]),e._v(" "),t("div",{staticClass:"pl-2 flex"},[t("ns-close-button",{on:{click:function(t){e.showProcessingSelect=!1}}}),e._v(" "),t("button",{staticClass:"bg-success-primary text-white rounded-full px-2 py-1",on:{click:function(t){return e.submitProcessingChange(e.order)}}},[e._v(e._s(e.__("Save")))])],1)]):e._e()])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex justify-between items-start elevation-surface border"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[t("span",[e._v(e._s(e.__("Payment Status")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary"},[e._v(e._s(e.labels.getPaymentStatus(e.order.payment_status)))])])]),e._v(" "),t("div",{staticClass:"px-4 w-full md:w-1/2 lg:w-2/4 mb-2"},[t("div",{staticClass:"mb-2"},[t("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary"},[e._v(e._s(e.__("Products")))])]),e._v(" "),e._l(e.order.products,(function(n){return t("div",{key:n.id,staticClass:"p-2 flex justify-between items-start elevation-surface border mb-6"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[e._v(e._s(n.name)+" (x"+e._s(n.quantity)+")")]),e._v(" "),t("p",{staticClass:"text-secondary text-sm"},[e._v(e._s(n.unit.name||"N/A"))])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary"},[e._v(e._s(e._f("currency")(n.total_price)))])])})),e._v(" "),t("div",{staticClass:"mb-2"},[t("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary flex justify-between"},[t("span",[e._v(e._s(e.__("Refunded Products")))]),e._v(" "),t("a",{staticClass:"border-b border-info-primary border-dashed",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.openRefunds()}}},[e._v(e._s(e.__("All Refunds")))])])]),e._v(" "),e._l(e.order.refunded_products,(function(n,r){return t("div",{key:r,staticClass:"p-2 flex justify-between items-start elevation-surface border mb-6"},[t("div",[t("h4",{staticClass:"text-semibold text-primary"},[e._v(e._s(n.order_product.name)+" (x"+e._s(n.quantity)+")")]),e._v(" "),t("p",{staticClass:"text-secondary text-sm"},[e._v(e._s(n.unit.name||"N/A")+" | "),t("span",{staticClass:"rounded-full px-2",class:"damaged"===n.condition?"bg-error-tertiary text-white":"bg-info-tertiary text-white"},[e._v(e._s(n.condition))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-secondary"},[e._v(e._s(e._f("currency")(n.total_price)))])])}))],2)])}),[],!1,null,null,null).exports;function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const G={name:"ns-order-instalments-payment",components:{nsNotice:n(3577).nsNotice},data:function(){return{paymentTypes,fields:[{type:"select",name:"payment_type",description:(0,l.__)("Select the payment type that must apply to the current order."),label:(0,l.__)("Payment Type"),validation:"required",options:paymentTypes}],print:new C.Z({urls:systemUrls,options:systemOptions}),validation:new o.Z,order:null,instalment:null}},methods:{__:l.__,popupResolver:m.Z,popupCloser:a.Z,close:function(){this.popupResolver(!1)},updateInstalmentAsDue:function(e){var t=this;nsHttpClient.put("/api/nexopos/v4/orders/".concat(this.order.id,"/instalments/").concat(this.instalment.id,"/"),{instalment:{date:ns.date.moment.format("YYYY-MM-DD HH:mm:ss")}}).subscribe({next:function(e){t.submitPayment()},error:function(e){r.kX.error(e.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})},submitPayment:function(){var e=this;if(!this.validation.validateFields(this.fields))return r.kX.error(__m("The form is not valid.")).subcribe();nsHttpClient.post("/api/nexopos/v4/orders/".concat(this.order.id,"/instalments/").concat(this.instalment.id,"/pay"),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.validation.extractFields(this.fields))).subscribe({next:function(t){e.popupResolver(!0),e.print.exec(t.data.payment.id,"payment"),r.kX.success(t.message).subscribe()},error:function(t){"failed"===t.status&&Popup.show(x.default,{title:(0,l.__)("Update Instalment Date"),message:(0,l.__)("Would you like to mark that instalment as due today ? If you confirm the instalment will be marked as paid."),onAction:function(t){t&&e.updateInstalmentAsDue(e.instalment)}}),r.kX.error(t.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})}},mounted:function(){this.popupCloser(),this.order=this.$popupParams.order,this.instalment=this.$popupParams.instalment,this.fields=this.validation.createFields(this.fields)}};const H=(0,v.Z)(G,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg ns-box w-95vw md:w-2/3-screen lg:w-1/3-screen"},[t("div",{staticClass:"p-2 flex justify-between border-b items-center"},[t("h3",[e._v(e._s(e.__("Payment Method")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 ns-box-body"},[t("ns-notice",{staticClass:"py-2 p-4 text-center border text-primary rounded-lg",attrs:{color:"info"}},[e._v(e._s(e.__("Before submitting the payment, choose the payment type used for that order.")))]),e._v(" "),t("br"),e._v(" "),e._l(e.fields,(function(e,n){return t("ns-field",{key:n,attrs:{field:e}})}))],2),e._v(" "),t("div",{staticClass:"border-t ns-box-footer p-2 flex justify-end"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.submitPayment()}}},[e._v(e._s(e.__("Submit Payment")))])],1)])}),[],!1,null,null,null).exports;function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Q(){Q=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof b?t:b,o=Object.create(s.prototype),a=new $(r||[]);return i(o,"_invoke",{value:P(e,n,a)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",v="executing",h="completed",m={};function b(){}function y(){}function _(){}var g={};c(g,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(T([])));w&&w!==n&&r.call(w,o)&&(g=w);var C=_.prototype=b.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(i,s,o,a){var l=d(e[i],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==X(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function P(t,n,r){var i=f;return function(s,o){if(i===v)throw new Error("Generator is already running");if(i===h){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var l=S(a,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?h:p,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=h,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=d(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(X(t)+" is not iterable")}return y.prototype=_,i(C,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},k(j.prototype),c(j.prototype,a,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new j(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function W(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}const B={props:["order"],name:"ns-order-instalments",data:function(){return{labels:new F,original:[],instalments:[],print:new C.Z({urls:systemUrls,options:systemOptions,type:"payment"})}},mounted:function(){this.loadInstalments()},computed:{totalInstalments:function(){return this.instalments.length>0?this.instalments.map((function(e){return e.amount})).reduce((function(e,t){return parseFloat(e)+parseFloat(t)})):0}},methods:{__:l.__,loadInstalments:function(){var e=this;r.ih.get("/api/nexopos/v4/orders/".concat(this.order.id,"/instalments")).subscribe((function(t){e.original=t,e.instalments=t.map((function(e){return e.price_clicked=!1,e.date_clicked=!1,e.date=moment(e.date).format("YYYY-MM-DD"),e}))}))},showReceipt:function(e){if(null===e.payment_id)return r.kX.error((0,l.__)("This instalment doesn't have any payment attached.")).subscribe();this.print.process(e.payment_id,"payment")},addInstalment:function(){this.instalments.push({date:ns.date.moment.format("YYYY-MM-DD"),amount:this.order.total-this.totalInstalments,paid:!1})},createInstalment:function(e){var t=this;Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to create this instalment ?"),onAction:function(n){n&&r.ih.post("/api/nexopos/v4/orders/".concat(t.order.id,"/instalments"),{instalment:e}).subscribe({next:function(e){t.loadInstalments(),r.kX.success(e.message).subscribe()},error:function(e){r.kX.error(e.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})}})},deleteInstalment:function(e){var t=this;Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this instalment ?"),onAction:function(n){n&&r.ih.delete("/api/nexopos/v4/orders/".concat(t.order.id,"/instalments/").concat(e.id)).subscribe({next:function(n){var i=t.instalments.indexOf(e);t.instalments.splice(i,1),r.kX.success(n.message).subscribe()},error:function(e){r.kX.error(e.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})}})},markAsPaid:function(e){var t,n=this;return(t=Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(t,r){Popup.show(H,{order:n.order,instalment:e,resolve:t,reject:r})}));case 3:t.sent,n.loadInstalments(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(e){W(s,r,i,o,a,"next",e)}function a(e){W(s,r,i,o,a,"throw",e)}o(void 0)}))})()},togglePriceEdition:function(e){var t=this;e.paid||(e.price_clicked=!e.price_clicked,this.$forceUpdate(),e.price_clicked&&setTimeout((function(){t.$refs.amount[0].select()}),100))},updateInstalment:function(e){var t=this;Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to update that instalment ?"),onAction:function(n){n&&r.ih.put("/api/nexopos/v4/orders/".concat(t.order.id,"/instalments/").concat(e.id),{instalment:e}).subscribe({next:function(e){r.kX.success(e.message).subscribe()},error:function(e){r.kX.error(e.message||(0,l.__)("An unexpected error has occurred")).subscribe()}})}})},toggleDateEdition:function(e){var t=this;e.paid||(e.date_clicked=!e.date_clicked,this.$forceUpdate(),e.date_clicked&&setTimeout((function(){t.$refs.date[0].select()}),200))}}};const K=(0,v.Z)(B,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"-mx-4 flex-auto flex flex-wrap"},[t("div",{staticClass:"flex flex-auto"},[t("div",{staticClass:"w-full mb-2 flex-wrap"},[t("div",{staticClass:"w-full mb-2 px-4"},[t("h3",{staticClass:"font-semibold text-secondary pb-2 border-b border-info-primary"},[e._v(e._s(e.__("Instalments")))])]),e._v(" "),t("div",{staticClass:"px-4"},[t("ul",{staticClass:"border-table-th-edge border-t text-primary"},[e._l(e.instalments,(function(n){return t("li",{key:n.id,staticClass:"border-b border-l flex justify-between elevation-surface",class:n.paid?"success":"info"},[t("span",{staticClass:"p-2"},[n.date_clicked?e._e():t("span",{on:{click:function(t){return e.toggleDateEdition(n)}}},[e._v(e._s(n.date))]),e._v(" "),n.date_clicked?t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:n.date,expression:"instalment.date"}],ref:"date",refInFor:!0,staticClass:"border border-info-primary rounded",attrs:{type:"date"},domProps:{value:n.date},on:{blur:function(t){return e.toggleDateEdition(n)},input:function(t){t.target.composing||e.$set(n,"date",t.target.value)}}})]):e._e()]),e._v(" "),t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"flex items-center px-2 h-full border-r"},[n.price_clicked?e._e():t("span",{on:{click:function(t){return e.togglePriceEdition(n)}}},[e._v(e._s(e._f("currency")(n.amount)))]),e._v(" "),n.price_clicked?t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:n.amount,expression:"instalment.amount"}],ref:"amount",refInFor:!0,staticClass:"border border-info-primary p-1",attrs:{type:"text"},domProps:{value:n.amount},on:{blur:function(t){return e.togglePriceEdition(n)},input:function(t){t.target.composing||e.$set(n,"amount",t.target.value)}}})]):e._e()]),e._v(" "),!n.paid&&n.id?t("div",{staticClass:"w-36 justify-center flex items-center px-2 h-full border-r"},[t("div",{staticClass:"px-2"},[t("ns-icon-button",{attrs:{type:"success",className:"la-money-bill-wave-alt"},on:{click:function(t){return e.markAsPaid(n)}}})],1),e._v(" "),t("div",{staticClass:"px-2"},[t("ns-icon-button",{attrs:{type:"info",className:"la-save"},on:{click:function(t){return e.updateInstalment(n)}}})],1),e._v(" "),t("div",{staticClass:"px-2"},[t("ns-icon-button",{attrs:{type:"error",className:"la-trash-alt"},on:{click:function(t){return e.deleteInstalment(n)}}})],1)]):e._e(),e._v(" "),n.paid||n.id?e._e():t("div",{staticClass:"w-36 justify-center flex items-center px-2 h-full border-r"},[t("div",{staticClass:"px-2"},[t("div",{staticClass:"ns-button info"},[t("button",{staticClass:"px-3 py-1 rounded-full",on:{click:function(t){return e.createInstalment(n)}}},[t("i",{staticClass:"las la-plus"}),e._v("\n                                            "+e._s(e.__("Create"))+"\n                                        ")])])])]),e._v(" "),n.paid?t("div",{staticClass:"w-36 justify-center flex items-center px-2 h-full"},[t("div",{staticClass:"ns-button info"},[t("button",{staticClass:"px-3 text-xs py-1 rounded-full",on:{click:function(t){return e.showReceipt(n)}}},[t("i",{staticClass:"las la-print"}),e._v("\n                                        "+e._s(e.__("Receipt"))+"\n                                    ")])])]):e._e()])])})),e._v(" "),t("li",{staticClass:"flex justify-between p-2 border-r border-b border-l elevation-surface"},[t("div",{staticClass:"flex items-center justify-center"},[t("span",[e._v("\n                                "+e._s(e.__("Total :"))+" "+e._s(e._f("currency")(e.order.total))+"\n                            ")]),e._v(" "),t("span",{staticClass:"ml-1 text-sm"},[e._v("\n                                ("+e._s(e.__("Remaining :"))+" "+e._s(e._f("currency")(e.order.total-e.totalInstalments))+")\n                            ")])]),e._v(" "),t("div",{staticClass:"-mx-2 flex flex-wrap items-center"},[t("span",{staticClass:"px-2"},[e._v("\n                                "+e._s(e.__("Instalments:"))+" "+e._s(e._f("currency")(e.totalInstalments))+"\n                            ")]),e._v(" "),t("span",{staticClass:"px-2"},[t("div",{staticClass:"ns-button info"},[t("button",{staticClass:"rounded-full px-3 py-1",on:{click:function(t){return e.addInstalment()}}},[e._v(e._s(e.__("Add Instalment")))])])])])])],2)])])])])}),[],!1,null,null,null).exports;var J={filters:{nsCurrency:i.W},name:"ns-preview-popup",data:function(){return{active:"details",order:new Object,products:[],payments:[],options:null,print:new C.Z({urls:systemUrls,options:systemOptions}),settings:null}},components:{nsOrderRefund:E,nsOrderPayment:M,nsOrderDetails:I,nsOrderInstalments:K},computed:{isVoidable:function(){return["paid","partially_paid","unpaid"].includes(this.order.payment_status)},isDeleteAble:function(){return["hold"].includes(this.order.payment_status)}},methods:{__:l.__,popupResolver:m.Z,popupCloser:a.Z,closePopup:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.popupResolver(e)},setActive:function(e){this.active=e},printOrder:function(){this.print.process(this.order.id,"sale")},refresh:function(){this.$popupParams.component.$emit("updated"),this.loadOrderDetails(this.order.id)},loadOrderDetails:function(e){var t=this;(0,s.D)([r.ih.get("/api/nexopos/v4/orders/".concat(e)),r.ih.get("/api/nexopos/v4/orders/".concat(e,"/products")),r.ih.get("/api/nexopos/v4/orders/".concat(e,"/payments"))]).subscribe((function(e){t.order=e[0],t.products=e[1],t.payments=e[2]}))},deleteOrder:function(){var e=this;Popup.show(x.default,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this order"),onAction:function(t){t&&r.ih.delete("/api/nexopos/v4/orders/".concat(e.order.id)).subscribe({next:function(t){r.kX.success(t.message).subscribe(),e.refreshCrudTable(),e.closePopup(!0)},error:function(e){r.kX.error(e.message).subscribe()}})}})},voidOrder:function(){var e=this;try{new Promise((function(t,n){Popup.show($.default,{resolve:t,reject:n,title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("The current order will be void. This action will be recorded. Consider providing a reason for this operation"),onAction:function(t){!1!==t&&r.ih.post("/api/nexopos/v4/orders/".concat(e.order.id,"/void"),{reason:t}).subscribe({next:function(t){r.kX.success(t.message).subscribe(),e.refreshCrudTable(),e.closePopup(!0)},error:function(e){r.kX.error(e.message).subscribe()}})}})}))}catch(e){console.log(e)}},refreshCrudTable:function(){this.$popupParams.component.$emit("updated",!0)}},watch:{active:function(){"details"===this.active&&this.loadOrderDetails(this.order.id)}},mounted:function(){this.order=this.$popupParams.order,this.options=systemOptions,this.urls=systemUrls,this.loadOrderDetails(this.order.id),this.popupCloser()}};window.nsOrderPreviewPopup=J;const ee=J;const te=(0,v.Z)(ee,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"h-95vh w-95vw md:h-6/7-screen md:w-6/7-screen overflow-hidden shadow-xl ns-box flex flex-col"},[t("div",{staticClass:"border-b ns-box-header p-3 flex items-center justify-between"},[t("div",[t("h3",[e._v(e._s(e.__("Order Options")))])]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup(!0)}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 overflow-scroll ns-box-body flex flex-auto"},[e.order.id?t("ns-tabs",{attrs:{active:e.active},on:{active:function(t){return e.setActive(t)}}},[t("ns-tabs-item",{staticClass:"overflow-y-auto",attrs:{label:e.__("Details"),identifier:"details"}},[t("ns-order-details",{attrs:{order:e.order}})],1),e._v(" "),["order_void","hold","refunded","partially_refunded"].includes(e.order.payment_status)?e._e():t("ns-tabs-item",{staticClass:"overflow-y-auto",attrs:{label:e.__("Payments"),identifier:"payments"}},[t("ns-order-payment",{attrs:{order:e.order},on:{changed:function(t){return e.refresh()}}})],1),e._v(" "),["order_void","hold","refunded"].includes(e.order.payment_status)?e._e():t("ns-tabs-item",{staticClass:"flex overflow-y-auto",attrs:{label:e.__("Refund & Return"),identifier:"refund"}},[t("ns-order-refund",{attrs:{order:e.order},on:{loadTab:function(t){return e.setActive(t)},changed:function(t){return e.refresh()}}})],1),e._v(" "),["partially_paid","unpaid"].includes(e.order.payment_status)&&e.order.support_instalments?t("ns-tabs-item",{staticClass:"flex overflow-y-auto",attrs:{label:e.__("Installments"),identifier:"instalments"}},[t("ns-order-instalments",{attrs:{order:e.order},on:{changed:function(t){return e.refresh()}}})],1):e._e()],1):e._e(),e._v(" "),e.order.id?e._e():t("div",{staticClass:"h-full w-full flex items-center justify-center"},[t("ns-spinner")],1)],1),e._v(" "),t("div",{staticClass:"p-2 flex justify-between border-t ns-box-footer"},[t("div",[e.isVoidable?t("ns-button",{attrs:{type:"error"},on:{click:function(t){return e.voidOrder()}}},[t("i",{staticClass:"las la-ban"}),e._v("\n                "+e._s(e.__("Void"))+"\n            ")]):e._e(),e._v(" "),e.isDeleteAble?t("ns-button",{attrs:{type:"error"},on:{click:function(t){return e.deleteOrder()}}},[t("i",{staticClass:"las la-trash"}),e._v("\n                "+e._s(e.__("Delete"))+"\n            ")]):e._e()],1),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.printOrder()}}},[t("i",{staticClass:"las la-print"}),e._v("\n                "+e._s(e.__("Print"))+"\n            ")])],1)])])}),[],!1,null,null,null).exports},9527:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(8094),i=n(2867),s=n(3216),o=n(1487),a=n(5494);const l={name:"ns-orders-refund-popup",data:function(){return{order:null,refunds:[],view:"summary",previewed:null,loaded:!1,options:systemOptions,systemUrls,print:new a.Z({urls:systemUrls,options:systemOptions})}},methods:{__:r.__,popupCloser:i.Z,popupResolver:s.Z,toggleProductView:function(e){this.view="details",this.previewed=e},loadOrderRefunds:function(){var e=this;nsHttpClient.get("/api/nexopos/v4/orders/".concat(this.order.id,"/refunds")).subscribe((function(t){e.loaded=!0,e.refunds=t.refunds}),(function(e){o.kX.error(e.message).subscribe()}))},close:function(){this.$popup.close()},printRefundReceipt:function(e){this.print.process(e.id,"refund")}},mounted:function(){this.order=this.$popupParams.order,this.popupCloser(),this.loadOrderRefunds()}};const c=(0,n(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg w-95vw h-95vh md:w-3/5-screen md:h-3/5-screen ns-box flex flex-col overflow-hidden"},[t("div",{staticClass:"border-b p-2 flex items-center justify-between ns-box-header"},[t("h3",[e._v(e._s(e.__("Order Refunds")))]),e._v(" "),t("div",{staticClass:"flex"},["details"===e.view?t("div",{staticClass:"flex items-center justify-center cursor-pointer rounded-full px-3 border hover:bg-info-primary hover:text-white mr-1",on:{click:function(t){e.view="summary"}}},[e._v(e._s(e.__("Go Back")))]):e._e(),e._v(" "),t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"overflow-auto flex-auto ns-box-body"},["summary"===e.view?[e.loaded?e._e():t("div",{staticClass:"flex h-full w-full items-center justify-center"},[t("ns-spinner",{attrs:{size:"24"}})],1),e._v(" "),e.loaded&&0===e.refunds.length?t("div",{staticClass:"flex h-full w-full items-center justify-center"},[t("i",{staticClass:"lar la-frown-open"})]):e._e(),e._v(" "),e.loaded&&e.refunds.length>0?e._l(e.refunds,(function(n){return t("div",{key:n.id,staticClass:"border-b flex flex-col md:flex-row"},[t("div",{staticClass:"w-full md:flex-auto p-2"},[t("h3",{staticClass:"font-semibold mb-1"},[e._v(e._s(e.order.code))]),e._v(" "),t("div",[t("ul",{staticClass:"flex -mx-1 text-sm text-primary"},[t("li",{staticClass:"px-1"},[e._v(e._s(e.__("Total"))+" : "+e._s(e._f("currency")(n.total)))]),e._v(" "),t("li",{staticClass:"px-1"},[e._v(e._s(e.__("By"))+" : "+e._s(n.author.username))])])])]),e._v(" "),t("div",{staticClass:"w-full md:w-16 cursor-pointer hover:bg-info-primary hover:border-info-primary hover:text-white text-lg flex items-center justify-center md:border-l",on:{click:function(t){return e.toggleProductView(n)}}},[t("i",{staticClass:"las la-eye"})]),e._v(" "),t("div",{staticClass:"w-full md:w-16 cursor-pointer hover:bg-info-primary hover:border-info-primary hover:text-white text-lg flex items-center justify-center md:border-l",on:{click:function(t){return e.printRefundReceipt(n)}}},[t("i",{staticClass:"las la-print"})])])})):e._e()]:e._e(),e._v(" "),"details"===e.view?e._l(e.previewed.refunded_products,(function(n){return t("div",{key:n.id,staticClass:"border-b flex flex-col md:flex-row"},[t("div",{staticClass:"w-full md:flex-auto p-2"},[t("h3",{staticClass:"font-semibold mb-1"},[e._v(e._s(n.product.name))]),e._v(" "),t("div",[t("ul",{staticClass:"flex -mx-1 text-sm text-primary"},[t("li",{staticClass:"px-1"},[e._v(e._s(e.__("Condition"))+" : "+e._s(n.condition))]),e._v(" "),t("li",{staticClass:"px-1"},[e._v(e._s(e.__("Quantity"))+" : "+e._s(n.quantity))]),e._v(" "),t("li",{staticClass:"px-1"},[e._v(e._s(e.__("Total"))+" : "+e._s(e._f("currency")(n.total_price)))])])])])])})):e._e()],2)])}),[],!1,null,null,null).exports},2381:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(8094),i=n(3216),s=n(2867);const o={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.popupCloser()},methods:{__:r.__,popupResolver:i.Z,popupCloser:s.Z,emitAction:function(e){this.$popupParams.onAction(e),this.$popup.close()}}};const a=(0,n(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col shadow-lg w-5/7-screen md:w-4/7-screen lg:w-2/7-screen",class:e.size,attrs:{id:"confirm-popup"}},[t("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[t("h2",{staticClass:"text-xl md:text-3xl font-body text-center"},[e._v(e._s(e.title))]),e._v(" "),t("p",{staticClass:"py-4 text-sm md:text-base text-center"},[e._v(e._s(e.message))])]),e._v(" "),t("div",{staticClass:"action-buttons flex border-t"},[t("button",{staticClass:"flex-auto rounded-none w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Yes")))]),e._v(" "),t("hr",{staticClass:"border-r h-16"}),e._v(" "),t("button",{staticClass:"flex-auto rounded-none w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!1)}}},[e._v(e._s(e.__("No")))])])])}),[],!1,null,null,null).exports},4140:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const r={name:"ns-pos-loading-popup"};const i=(0,n(1900).Z)(r,(function(){return(0,this._self._c)("ns-spinner")}),[],!1,null,null,null).exports},549:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(1487),i=n(8094);function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const a={data:function(){return{finalValue:1,virtualStock:null,allSelected:!0,isLoading:!1,keys:[].concat(s([1,2,3].map((function(e){return{identifier:e,value:e}}))),s([4,5,6].map((function(e){return{identifier:e,value:e}}))),s([7,8,9].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.closePopup()})),this.$popupParams.quantity&&(this.finalValue=this.$popupParams.quantity),document.addEventListener("keyup",this.handleKeyPress)},destroyed:function(){document.removeEventListener("keypress",this.handleKeyPress)},methods:{__:i.__,handleKeyPress:function(e){13===e.keyCode&&this.inputValue({identifier:"next"})},closePopup:function(){this.$popupParams.reject(!1),this.$popup.close()},inputValue:function(e){if("next"===e.identifier){var t=this.$popupParams,n=(t.product,t.data,parseFloat(this.finalValue));if(0===n)return r.kX.error((0,i.__)("Please provide a quantity")).subscribe();this.resolve({quantity:n})}else"backspace"===e.identifier?this.allSelected?(this.finalValue=0,this.allSelected=!1):(this.finalValue=this.finalValue.toString(),this.finalValue=this.finalValue.substr(0,this.finalValue.length-1)||0):this.allSelected?(this.finalValue=e.value,this.finalValue=parseFloat(this.finalValue),this.allSelected=!1):(this.finalValue+=""+e.value,this.finalValue=parseFloat(this.finalValue))},resolve:function(e){this.$popupParams.resolve(e),this.$popup.close()}}};const l=(0,n(1900).Z)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"ns-box shadow min-h-2/5-screen w-3/4-screen md:w-3/5-screen lg:w-3/5-screen xl:w-2/5-screen relative"},[t("div",{staticClass:"flex-shrink-0 flex p-2 border-b ns-box-header justify-between items-center"},[t("h1",{staticClass:"text-xl font-bold text-primary text-center"},[e._v(e._s(e.__("Define Quantity")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"h-16 border-b ns-box-body flex items-center justify-center",attrs:{id:"screen"}},[t("h1",{staticClass:"font-bold text-3xl"},[e._v(e._s(e.finalValue))])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-3",attrs:{id:"numpad"}},e._l(e.keys,(function(n,r){return t("div",{key:r,staticClass:"text-xl font-bold border ns-numpad-key h-24 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.inputValue(n)}}},[void 0!==n.value?t("span",[e._v(e._s(n.value))]):e._e(),e._v(" "),n.icon?t("i",{staticClass:"las",class:n.icon}):e._e()])})),0)])}),[],!1,null,null,null).exports},8093:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const r={data:function(){return{title:"",message:"",input:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.input=this.$popupParams.input||"",this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.reject(!1),e.$popup.close())}))},methods:{__:n(8094).__,emitAction:function(e){this.$popupParams.onAction(e?this.input:e),this.$popup.close()},reject:function(e){void 0!==this.$popupParams.reject&&this.$popupParams.reject(e),this.$popup.close()}}};const i=(0,n(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-5/7-screen md:w-3/7-screen flex flex-col shadow-lg",class:e.size,attrs:{id:"prompt-popup"}},[t("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-2"},[t("h2",{staticClass:"text-3xl font-body"},[e._v(e._s(e.title))]),e._v(" "),t("p",{staticClass:"w-full md:mx-auto md:w-2/3 py-4 text-center"},[e._v(e._s(e.message))])]),e._v(" "),t("div",{staticClass:"p-2"},[t("div",{staticClass:"ns-input"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"w-full border p-2",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"flex border-t action-buttons"},[t("button",{staticClass:"flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Ok")))]),e._v(" "),t("hr",{staticClass:"border-r"}),e._v(" "),t("button",{staticClass:"flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.reject(!1)}}},[e._v(e._s(e.__("Cancel")))])])])}),[],!1,null,null,null).exports},2909:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2867),i=n(8094);const s={data:function(){return{value:[],options:[],description:"",label:null,type:"select"}},computed:{},mounted:function(){this.popupCloser(),this.value=this.$popupParams.value||[],this.options=this.$popupParams.options,this.label=this.$popupParams.label,this.description=this.$popupParams.description||"",this.type=this.$popupParams.type||this.type},methods:{popupCloser:r.Z,__:i.__,toggle:function(e){var t=this.value.indexOf(e);-1===t?this.value.unshift(e):this.value.splice(t,1)},isSelected:function(e){return this.value.indexOf(e)>=0},close:function(){this.$popupParams.reject(!1),this.$popup.close()},select:function(e){void 0!==e&&(this.value=[e]),this.$popupParams.resolve(this.value),this.close()}}};const o=(0,n(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-xl ns-box w-6/7-screen md:w-4/7-screen lg:w-3/7-screen max-h-5/6-screen overflow-hidden flex flex-col"},[t("div",{staticClass:"p-2 flex justify-between border-b items-center ns-box-header"},[t("span",{staticClass:"text-semibold text-primary"},[e._v("\n            "+e._s(e.label)+"\n        ")]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex flex-col overflow-hidden"},[e.description.length>0?t("p",{staticClass:"p-2 text-center text-sm bg-info-primary"},[e._v(e._s(e.description))]):e._e(),e._v(" "),t("div",{staticClass:"overflow-y-auto"},[t("ul",{staticClass:"ns-vertical-menu"},["select"===e.type?e._l(e.options,(function(n){return t("li",{key:n.value,staticClass:"p-2 border-b border-box-edge text-primary cursor-pointer",on:{click:function(t){return e.select(n)}}},[e._v(e._s(n.label))])})):e._e(),e._v(" "),"multiselect"===e.type?e._l(e.options,(function(n){return t("li",{key:n.value,staticClass:"p-2 border-b text-primary cursor-pointer",class:e.isSelected(n)?"active":"",on:{click:function(t){return e.toggle(n)}}},[e._v(e._s(n.label))])})):e._e()],2)])]),e._v(" "),"multiselect"===e.type?t("div",{staticClass:"flex justify-between"},[t("div"),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.__("Select")))])],1)]):e._e()])}),[],!1,null,null,null).exports},5042:()=>{}},e=>{e.O(0,[898],(()=>{return t=8802,e(e.s=t);var t}));e.O()}]);